var js=Object.defineProperty;var As=(t,e,s)=>e in t?js(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var B=(t,e,s)=>(As(t,typeof e!="symbol"?e+"":e,s),s);import{a as Os,$ as a,p as lt,m as ce,k as $s,C as b,n as Fs,d as Ds,u as Is,b as Rs,U as Ms,c as Vs,t as Ls,R as Ns,e as h,T as f,f as Ps,g as Ve,E as X,h as Z,s as L,S as Us,w as Hs,i as qs,j as Ws,l as ct,o as Q,A as zs,r as Bs}from"./vendor.3dfe9815.js";Element.prototype.toggleAttribute||(Element.prototype.toggleAttribute=function(t,e){return e!==void 0&&(e=!!e),this.hasAttribute(t)?e?!0:(this.removeAttribute(t),!1):e===!1?!1:(this.setAttribute(t,""),!0)});const Le={},Ne=t=>(Le[t]||(Le[t]=new Ks(t)),Le[t]);function Pe(t,e){try{const s=JSON.stringify(e);return s==="{}"?window.localStorage.removeItem(t):window.localStorage.setItem(t,s),!0}catch{return!1}}function Gs(t){try{return JSON.parse(t)}catch{return console.log("Failed to process local stored JSON."),{}}}class Ks{constructor(e){this.ns=e,this._=Gs(window.localStorage.getItem(e)||"{}")}set(e,s){return this._[e]={value:s,e:0},Pe(this.ns,this._)||this.remove(e),s}get(e){return this._[e]?this._[e].value:void 0}remove(e){delete this._[e],Pe(this.ns,this._)}clear(){this._={},Pe(this.ns,this._)}isEmpty(){return Object.keys(this._||{}).length===0}}const G={client:null,registrations:{},status:"disconnected",connect({key:t,clientId:e,privateChannelName:s}){if(this.status==="disconnected"){if(this.status="connecting",this.client)this.client.connect();else if(e){this.client=new Os.exports.Realtime({key:t,clientId:e}),this.client.connection.on("connected",()=>{this.status="connected",this.register("private","model_update",n=>{n.updates&&Object.keys(n.updates).forEach(o=>{a(`[data-rt='${n.id}:${o}']`).text(n.updates[o])})},{key:t,clientId:e,privateChannelName:s})});const i=()=>{this.disconnect()};this.client.connection.on("disconnected",i),this.client.connection.on("failed",i),this.client.connection.on("suspended",i)}}},disconnect(){this.status!=="disconnected"&&(this.client&&this.client.close(),this.status="disconnected"),this.client=null,this.registrations={}},register(t,e,s,{key:i,clientId:n,privateChannelName:o}){if(!this.client)return!1;const r=t==="private"?o:t,c=`/${r}/${e}`;if(this.registrations[c]||(this.registrations[c]=s,this.connect({key:i,clientId:n}),!this.client))return!1;const d=this.client.channels.get(r),m=T=>{s(T.data||T)};return d.subscribe(e,m),()=>{delete this.registrations[c],d.unsubscribe(e,m)}}},ee=(t,e={})=>{const s=t.split("."),i=s.length;return s.reduce((n,o,r)=>o==="App"&&r===0?n:(r<i-1&&!n[o]&&(n[o]={}),n[o]),e)},Ys=()=>Math.random().toString(36).substr(2),Js=t=>{const e={};for(const[s,i]of new URL(t).searchParams.entries())if(s.endsWith("[]")){const n=s.slice(0,-2);e[n]||(e[n]=[]),e[n].push(i)}else e[s]=i;return e},ye=()=>Js(window.location.href),ue=t=>{window.history.replaceState(window.history.state,document.title,t)},Xs=t=>{window.history.pushState(window.history.state,document.title,t)},ut=t=>t[0].toUpperCase()+t.substr(1),Zs=t=>t[0].toLowerCase()+t.substr(1),Ue=t=>Qs(t,"-"),Qs=(t,e)=>{const s=t.replace(/([A-Z])/g,i=>e+i.toLowerCase());return s.startsWith(e)?s.substr(1):s},ei=t=>t.replace(/([\\/'*+?|()\[\]{}.^$])/g,"\\$1"),ti=t=>{const e=t.slice();let s=e.length,i,n;for(;s;)i=Math.random()*s|0,n=e[--s],e[s]=e[i],e[i]=n;return e},ke=(t,e)=>{const s=ti(t);return typeof e=="number"?s.slice(0,e):s[0]},si=(t,e=null)=>{let s;return(...i)=>{s&&window.cancelAnimationFrame(s),s=window.requestAnimationFrame(()=>{t.call(e,...i)})}},He=(t={})=>Object.keys(t).map(e=>{const s=t[e];if(!Array.isArray(s))return encodeURIComponent(e)+"="+encodeURIComponent(s);const i=[];for(let n=0;n<s.length;n++)i.push(encodeURIComponent(e+"[]")+"="+encodeURIComponent(s[n]));return i.join("&")}).filter(Boolean).join("&"),ii={escape_html(t){if(t.value)return(t.value+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescape_html(t){if(t.value)return(t.value+"").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&#39;/g,"'")},strip_scripts(t){if(t.value)return(t.value+"").replace(/<script.*?>[\s\S]*<\/script>/gi,"")},pluralize(t){const e=t.value===1?t.args[0]:t.args[1];return`${t.value} ${e}`},stringify(t){return JSON.stringify(t.value)},count(t){return te(t.value)},string(t){return t.value+""},"any?"(t){return te(t.value)>0},"many?"(t){return te(t.value)>1},"one?"(t){return te(t.value)===1},"none?"(t){return!t.value||te(t.value)===0},"zero?"(t){return te(t.value)===0},"contains?"(t){return t.value.indexOf(t.args[0])>=0},"false?"(t){return t.value===!1},"true?"(t){return t.value===!0},"null?"(t){return t.value===null},"el_is_active?"(t){return a(t.args[0]).is(".is-active")},disabled_class(t){if(t.value)return"is-disabled"},active_class(t){if(t.value)return"is-active"},hidden_class(t){if(t.value)return"is-hidden"},"current_user_is_admin?"(t){return t.currentUser.role==="admin"},"moderator?"(t){return t.currentUser.role==="admin"||t.currentUser.role==="moderator"},"guest_user?"(t){const e=t.currentUser;return!e.id||e.guest},"is_current_user?"(t){const e=t.currentUser;return e?t.value===e.id||t.value===e.username:!1},prepend(t){return t.args[0]+t.value},append(t){return t.value+t.args[0]},lt(t){return t.value<t.args[0]},gt(t){return t.value>t.args[0]},eq(t){return t.value===t.args[0]},ne(t){return t.value!==t.args[0]},in(t){return(t.args[0]||[]).indexOf(t.value)>=0},nin(t){return(t.args[0]||[]).indexOf(t.value)===-1},lower_case(t){if(t.value!=null)return t.value.toString().toLowerCase()},upper_case(t){if(t.value!=null)return t.value.toString().toUpperCase()},upper_first(t){if(t.value!=null)return ut(t.value.toString())},take(t){if(t.value!=null)return t.value.slice(0,Math.max(0,t.args[0]||0))},skip(t){if(t.value!=null)return t.value.slice(t.args[0])},split(t){return t.value?t.value.split(t.args.length>0?t.args[0]:/,[ ]*/).filter(s=>!!s):[]}},te=t=>Array.isArray(t)?t.length:t||0;class q{constructor(e,s={}){this.options=Object.assign({},s),this._app=this.options._app,delete this.options._app,this.$template=a(e),this.$template.data("template",this),this.name=this.$template.attr("class")||this.$template.attr("id")}context(){return this.contexts?this.contexts[this.contexts.length-1]:null}parentContext(e){return this.contexts?this.contexts[this.contexts.length-((e||1)+1)]:null}render(e,s,i,n){s==null&&(s={}),n==null&&(n={}),this._initFilters(i),this.contextMap=n.contextMap||{},this.includeData=n.includeData||{},this.debug=!!n.debug;const o=a(this.$template.html());this.data=n.rootData||s,this._initContexts(s,n);const r=[];o.each((d,m)=>{const T=a(m);this._processNode(T),r.push(We(T))});const c=a(e);c.html(r.join("")),c.attr("data-context","root"),c.data("context",this.data),n.contextMap||c.find("[data-context-key]").each((d,m)=>{const T=a(m);s=this.contextMap[T.data("context-key")],s&&T.data("context",s)})}_initFilters(e){this.filters=this.options.filters||ii,e&&(this.filters=Object.assign({},this.filters,e)),!this.filters._controller&&this._app.controller&&(this.filters._controller=this._app.controller)}_initContexts(e,s){if(s.contexts)this.contexts=s.contexts;else{const i=s.parentContext||this.parentContext();this.contexts=i?[i,e]:[e]}}_processNode(e,s){if(e.is("script"))return;const i=e.data();if(i&&Object.keys(i).length>0){if(i.bindEach&&!s){this._processBindEach(e,i.bindEach);return}i.template&&(i.bindTo?this._withChildContext(this._processBindingValue(i.bindTo),()=>{this.context()&&this._processTemplate(e,i)}):this._processTemplate(e,i)),Object.keys(i).forEach(n=>{this._processBinding(e,n,i)})}e.children().each((n,o)=>{i.bindTo?this._withChildContext(this._processBindingValue(i.bindTo),()=>{this._processNode(a(o))}):this._processNode(a(o))}),e===this.$caseNode&&(this.caseValue=this.prevCaseValue),e.is("include")&&e.replaceWith(We(e))}_processBindEach(e,s){const i=this._processBindingValue(s);if(i&&Array.isArray(i)){const n=[];i.forEach(r=>{this._withChildContext(r,()=>{const c=e.clone();c.removeAttr("data-bind-each"),this._processContextMapping(c),this._processNode(c,!0),n.push(We(c))})});const o=n.join("");e.html(o),e.replaceWith(o)}else e.remove()}_withChildContext(e,s){this.contexts.push(e),s(),this.contexts.pop()}_processTemplate(e,s){const i=this.$template.parent();ai.call(this,e,s.template,i).render(e,this.context()||e.data("context"),this.filters,{root:i,contextMap:this.contextMap,includeData:s,contexts:this.contexts}),e.attr("data-template-selector",s.template),this._processContextMapping(e)}_processContextMapping(e){if(!e.data("context-key")){const s=Ys();this.contextMap[s]=this.context(),e.attr("data-context-key",s)}}_processBinding(e,s,i){if(this.$node=e,this._currentBinding=`data-${Ue(s)}`,!s.match(/bind[A-Z]/))return;let n;const o=s.substr(4);o!=="When"&&(n=this._processBindingValue(i[s])),e.removeAttr(this._currentBinding);const r=n!=null;switch(o){case"Each":case"To":break;case"Class":r&&e.addClass(n);break;case"Text":r&&e.text(n);break;case"Html":r&&e.html(n);break;case"ReplaceWith":r&&e.replaceWith(n);break;case"Value":r&&(e.is("textarea")?e.html(n):e.attr("value",n));break;case"Case":this.prevCaseValue=this.caseValue,this.caseValue=(n||"").toString(),this.$caseNode=e;break;case"When":(e.data("bind-case")?this.prevCaseValue:this.caseValue)!==(i[s]||"").toString()&&qe(e);break;case"ShowIf":n?e.show():e.hide();break;case"HideIf":n?e.hide():e.show();break;case"ShowUnless":n?e.hide():e.show();break;case"HideUnless":n?e.show():e.hide();break;case"If":n||qe(e);break;case"Unless":n&&qe(e);break;default:if(o.match(/^Data[A-Z]/))r&&(e.data(Zs(o.substr(4)),n),e.attr(Ue(o),n));else if(r){const d=Ue(o);d==="checked"?(e.prop("checked",n),n&&e.attr("checked",!0)):e.attr(d,n)}break}}_processBindingValue(e){if(!e)return null;if(e=e.toString(),e.includes("{{")){for(;e.includes("{{");)e=this._processNextBindingToken(e);if(!e.includes("::")&&!e.includes("|"))return e}return this._processValuePaths(e)}_processNextBindingToken(e){const s=e.indexOf("{{")+2,i=e.indexOf("}}"),n=e.substr(s,i-s),o=this._processValuePaths(n)||"";return e.replace(new RegExp(`{{${ei(n)}}}`,"g"),o)}_processValuePaths(e){const s=e.split("||");if(s.length>1){let n=null;for(const o of s)if(n=this._processValuePaths(o.trim()),n)break;return n}const i=e.split("&&");if(i.length>1){let n=null;for(const o of i)if(n=this._processValuePath(o.trim()),!n)return!1;return n}return this._processValuePath(e.trim())}_processValuePath(e){if(!e)return;const[s,...i]=e.split("|"),n=this._getValue(s.trim(),e);return i.reduce((o,r)=>this._processFilter(r,o,e),n)}_getValue(e,s){switch(e){case"@":return this.context();case"@@":return this.parentContext();case"true":return!0;case"false":return!1;case".":return this.data;default:const i=parseInt(e,10);if(!isNaN(i))return i;if(e.startsWith("@@"))return this._processValue(ee(e.substr(2),this.parentContext()));if(e.startsWith("@"))return this._processValue(ee(e.substr(1),this.context()));if(e.startsWith("%"))return this._processValue(ee(e.substr(1),this.includeData||{}));if(e.startsWith("="))return e.substr(1);if(e.startsWith('"'))return e.split('"')[1];if(e.startsWith("'"))return e.split("'")[1];if(e.startsWith("App."))return this._processValue(ee(e,this._app));if(e.startsWith("$"))return this._processValue(ee(e.substr(1),this._app.data));if(e.startsWith("!"))return!this._processValuePath(e.substr(1));let n=this._processValue(ee(e,this.data));return n===void 0&&this.filters[e.split("::")[0]]&&(n=this._processFilter(e,void 0,s)),n}}_processValue(e){return typeof e=="function"?e(this.context()):e}_processFilter(e,s,i){const[n,...o]=e.split("::"),r=n.trim();if(!r||!this.filters[r])return s;const c={value:s,valuePath:i,data:this.data,parentContext:this.parentContext(),context:this.context(),includeData:this.includeData,element:this.$node,binding:this._currentBinding,template:this,appData:this._app.data,currentUser:this._app.currentUser,args:o.map(d=>this._processValuePath(d.trim())),filter:d=>this.filters[d](c),expr:d=>this._processValuePath(d)};return c.filter(r)}}const qe=function(t){t.remove(),t.data("template-removed",!0)},We=function(t){return t.is("include")?(t.attr("data-context-key")&&t.children().attr("data-context-key",t.attr("data-context-key")),t.children().attr("data-template-selector",t.attr("data-template-selector")),t.html()):t.data("template-removed")?"":ni(t)},ni=t=>a("<div></div>").append(t).html();function ai(t,e,s){if(e instanceof q)return e;let i;return s?(i=s.find(e),i.length===0&&(i=a(e))):i=a(e),i=i.eq(0),i.data("template")||new q(i,{_app:this._app})}class de{constructor(e,s={}){this.options=Object.assign({},s),this._app=this.options._app,delete this.options._app,this.element=a(e),this.placeholder=this.element.find(".view-placeholder").eq(0),this.$templates=this.element.children('script[type="template"]'),this.template=new q(this.options.template?a(this.options.template):this.$templates.eq(0),{_app:this._app}),this.options.target?this.target=this.options.target:(this.target=this.element.find(".view").eq(0),this.target.length===0&&(this.target=a('<div class="view"></div>').appendTo(this.element))),this.data=this.options.data||this.element.data("view-data"),this.filters=this.filters||this.options.filters||{},this.options.render&&this.on("render",this.options.render),this._controllers=[],this.element.data("view",this),document.addEventListener("turbolinks:visit",()=>{this.destroy()},{once:!0})}destroy(){if(!this.destroyed){for(this._bindings&&this._bindings.forEach(e=>{e()});this._controllers.length>0;){const e=this._controllers.pop();e&&!e.destroyed&&e.destroy()}this.element.data("view",null),this.destroyed=!0}}render(e){return e==null&&(e={}),this.setFilters(e.filters),e.data&&(this.data=e.data),Ae(),this.template.render(this.target,this.data||this.target.data("context"),this.filters,e),this.target.show(),this.target.data("view",this),this.placeholder.hide(),this._updateUi(),this._callChildPartialRenderEvents({partial:!1}),this.renderEvents.view&&this.renderEvents.view.call(this,{options:e}),this.trigger("view:render",{options:e}),this.rendered=!0,this.element.addClass("js-rendered"),this}trigger(e,s){s=s||{},s.view=this,this.element.trigger(e,s)}on(e,s){return e=`view:${e}`,this._bindings=this._bindings||[],this._bindings.push(()=>this.element.off(e,null,s)),this.element.on(e,null,s)}renderPartial(e,s,i){typeof s=="string"?i=i||{}:s instanceof q||(i=s||{}),i=i||{},this.setFilters(i.filters),Ae();let n=typeof e=="string"?this.element.find(e):a(e);n=oi.call(this,n,n.data("context"),s,this.filters,i),s=n.data("template").name;const o={element:n,template:s,partial:!0,options:i};return this._callPartialRenderEvent(n,o),this._callChildPartialRenderEvents(o),this.renderEvents.partial&&this.renderEvents.partial.call(this,o),this.trigger("view:render",o),this._updateUi(),n.attr("data-context","partial"),n}setFilters(e){e&&(this.filters=Object.assign({},this.filters,e))}_callChildPartialRenderEvents(e){this.target.find("[data-template-selector]").each((s,i)=>{this._callPartialRenderEvent(a(i),e)})}_callPartialRenderEvent(e,s){const i=Object.assign({},s);e.data("template-selector")&&(i.template=e.data("template-selector").substr(1));const n=this.renderEvents[i.template];n&&(i.element=e,n.call(this,i))}_updateUi(){oe(),je(this._app),$()}}de.prototype.renderEvents={};const N=(t,e,s)=>{t.each((i,n)=>{const o=a(n),r=o.data("view")||o.closest("view").data("view");r&&(s&&r.setFilters(s),r.render({data:e}))})};function oi(t,e,s,i,n={}){if(s=s||t.data("template")||t.data("template-selector"),!s)return t;if(!(s instanceof q)){const c=a(s).eq(0);s=c.data("template")||new q(c,{_app:this._app})}e=e||t.data("context")||{};const o=a("<div></div>");s.render(o,e,i,n);const r=o.children();return r.data("template",s),r.data("context",e),t.replaceWith(r),a(r)}class g{constructor(e,s){if(this.element=a(e),this.options=Object.assign({},this.constructor.defaults,s||{}),this._app=this.options._app,delete this.options._app,this._controllers=[],this._unregisters=[],this.element.length>0){let i=this.element.data("controls");i||(i=[],this.element.data("controls",i)),i.push(this),ri.call(this),document.addEventListener("turbolinks:visit",()=>{this.destroy()},{once:!0})}}destroy(){if(this.destroyed)return;ci.call(this);const e=this.element.data("controls");if(e){const s=e.indexOf(this);s!==-1&&e.splice(s,1)}for(;this._controllers.length>0;){const s=this._controllers.pop();s&&!s.destroyed&&s.destroy()}for(;this._unregisters.length>0;){const s=this._unregisters.pop();s&&s()}this.destroyed=!0}renderViews(e){e==null&&(e=this.data);const s=this.filters?ui(this):null;this.element.find("view").each((i,n)=>N(a(n),e,s)),oe(),je(this._app),$()}}const ri=function(){!this.events||(this._bindings=[],Object.keys(this.events).forEach(t=>{const e=this.events[t];t.split(",").forEach(s=>{this._bindings.push(li.call(this,s,e))})}))},li=function(t,e){const s=t.split(" "),i=s[s.length-1],n=i.replace("|"," "),o=this,r=function(c,d){return e.call(o,a(this),c,d)};if(t===n)return this.element.on(n,r),()=>this.element.off(n,r);{let c=this.element;return t.startsWith("window")?(c=a(window),t=null):t.startsWith("#")?c=a("body"):t.startsWith("body")&&(c=a("body"),t=t.replace("body ","")),t&&(t=t.replace(` ${i}`,"")),c.on(n,t,r),()=>c.off(n,t,r)}},ci=function(){this._bindings&&this._bindings.forEach(t=>{t()})},ui=t=>Object.keys(t.filters).reduce((e,s)=>{const i=t.filters[s];return typeof i=="function"&&(e[s]=i.bind(t)),e},{});class se extends g{constructor(e,s){super(e,s);this.emptyText=this.options.emptyText||this.element.html()||"",this.setLanguage(this.options.lang||this.options.language||this.element.data("language")||this._app.data.language),this.setMarkdown(this.options.markdown||this.element.data("markdown"))}setMarkdown(e){e==null&&(e=this.markdown),this.markdown=e;const s=Object.assign({},di,{renderer:new hi({language:this.lang})});this.element.html(lt.sanitize(ce(e||this.emptyText,s))),this._processCodeBlocks(),this._processLinks()}setLanguage(e){this.lang=e,this.markdown&&this.setMarkdown()}_processLinks(){this.element.find("a").each((e,s)=>{s.target="_blank",a(s).on("click",i=>i.stopPropagation())})}_processCodeBlocks(){if(!this.lang||!this.markdown)return;const s=(this.markdown.match(/^``` ?([a-z]*) *$/gm)||[]).map(o=>o.replace(/``` */g,"")).filter((o,r,c)=>o&&c.indexOf(o)===r);if(s.length<=1)return;const i=s[0],n=o=>{if(!o.is("pre"))return;const r=o.find("code");if(r.length===0)return;const c=r.prop("className").replace(/lang(?:uage)?-/,"");c!==this.lang&&(s.includes(this.lang)||c!==i)&&o.hide()};this.element.find("pre").each((o,r)=>{const c=a(r);(c.next().is("pre")||c.prev().is("pre"))&&n(c)})}}const dt=(t,e)=>t.replace(/^if(-not)?:/,"").split(",").includes(e),di={gfm:!0,breaks:!1,smartLists:!0,highlight:(t,e)=>Ke(t,e)};class hi extends ce.Renderer{constructor(e={}){let s="";e.language&&(s=e.language,delete e.language);super(e);this._language=s}codespan(e){if(e&&e.length>2&&e.startsWith("$")&&e.endsWith("$")){const s=ht(e.slice(1,-1));if(s)return s}return super.codespan(e)}code(e,s,i){if(s){if(/^if:/.test(s))return dt(s,this._language)?ce(e,Object.assign({},this.options,{renderer:this})):"";if(/^if-not:/.test(s))return dt(s,this._language)?"":ce(e,Object.assign({},this.options,{renderer:this}));if(s[0]==="%")return`<div class="block block--${s.substr(1)}">`+ce(e,Object.assign({},this.options,{renderer:this}))+"</div>";if(s==="math"){const n=ht(e);if(n)return`<div>${n}</div>`}}try{return super.code(e,s,i)}catch(n){return console.warn("Failed to highlight markdown code block",n.message),`<pre><code>${e}</code></pre>`}}}const ht=t=>$s.renderToString(t,{throwOnError:!1});class pt extends de{}pt.prototype.renderEvents={view(){const t=this.target||this.element;!t||window.requestAnimationFrame(()=>{const e=new se(t.find(".markdown"),{_app:this._app});this._controllers.push(e)})}};const W=b.Pos;function pi(t,e,s,i){if(!i||e>s)return 0;const n=t.clipPos(W(e,0)),o=t.clipPos(W(s)),r=t.getRange(n,o);e<=t.firstLine()?t.replaceRange("",n,W(o.line+1,0)):t.replaceRange("",W(n.line-1),o);const c=n.line+i;if(c<=t.firstLine())return t.replaceRange(r+`
`,W(c,0)),t.firstLine()-n.line;const d=t.clipPos(W(c-1));return t.replaceRange(`
`+r,d),d.line+1-n.line}function ft(t,e){const s=t.getCursor("head"),i=t.getCursor("anchor");t.operation(()=>{const n=pi(t,Math.min(s.line,i.line),Math.max(s.line,i.line),e);t.setSelection(W(i.line+n,i.ch),W(s.line+n,s.ch))})}b.commands.moveLinesUp=t=>{ft(t,-1)};b.commands.moveLinesDown=t=>{ft(t,1)};b.keyMap.default["Alt-Up"]="moveLinesUp";b.keyMap.default["Alt-Down"]="moveLinesDown";b.defineMode("coq",function(t,e){var s=["Abort","About","Add","All","Arguments","Asymmetric","Axiom","Bind","Canonical","Check","Class","Close","Coercion","CoFixpoint","Comments","CoInductive","Context","Constructors","Contextual","Corollary","Defined","Definition","Delimit","Fail","Eval","End","Example","Export","Fact","Fixpoint","From","Global","Goal","Graph","Hint","Hypotheses","Hypothesis","Implicit","Implicits","Import","Inductive","Infix","Instance","Lemma","Let","Local","Ltac","Module","Morphism","Next","Notation","Obligation","Open","Parameter","Parameters","Prenex","Print","Printing","Program","Patterns","Projections","Proof","Proposition","Qed","Record","Relation","Remark","Require","Reserved","Resolve","Rewrite","Save","Scope","Search","SearchAbout","Section","Set","Show","Strict","Structure","Tactic","Time","Theorem","Types","Unset","Variable","Variables","View"],i=["as","at","cofix","crush","else","end","False","fix","for","forall","fun","if","in","is","let","match","of","Prop","return","struct","then","True","Type","when","with"],n=["after","apply","assert","auto","autorewrite","case","change","clear","compute","congruence","constructor","congr","cut","cutrewrite","dependent","destruct","eapply","eassumption","eauto","econstructor","elim","exists","field","firstorder","fold","fourier","generalize","have","hnf","induction","injection","instantiate","intro","intros","inversion","left","move","pattern","pose","refine","remember","rename","replace","revert","rewrite","right","ring","set","simpl","specialize","split","subst","suff","symmetry","transitivity","trivial","unfold","unlock","using","vm_compute","where","wlog"],o=["assumption","by","contradiction","discriminate","exact","now","omega","reflexivity","tauto"],r=["admit","Admitted"],c={};i.map(function(w){c[w]="keyword"}),r.map(function(w){c[w]="keyword"}),s.map(function(w){c[w]="builtin"}),n.map(function(w){c[w]="tactic"}),o.map(function(w){c[w]="terminator"});function d(w,v){if(w.eatSpace())return null;var C=w.next();if(v.begin_sentence&&/[-*+{}]/.test(C))return"coq-bullet";if(C==="(")return w.peek()==="*"?(w.next(),v.commentLevel++,v.tokenize=T,v.tokenize(w,v)):(v.begin_sentence=!1,"parenthesis");if(/\s/.test(C)||(v.begin_sentence=!1),C===".")return w.peek()!=="."?(v.tokenize=E,v.tokenize(w,v)):(w.next(),"operator");if(C==='"')return v.tokenize=m,v.tokenize(w,v);if(C===")")return"parenthesis";if(C==="~")return w.eatWhile(/\w/),"variable-2";if(C==="`")return w.eatWhile(/\w/),"quote";if(/\d/.test(C))return w.eatWhile(/[\d]/),"number";if(/[+\-*&%=<>!?|]/.test(C))return"operator";if(/[\[\]]/.test(C))return"bracket";w.eatWhile(/\w/);var j=w.current();return c.hasOwnProperty(j)?c[j]:"variable"}function m(w,v){for(var C,j=!1,R=!1;(C=w.next())!=null;){if(C==='"'&&!R){j=!0;break}R=!R&&C==="\\"}return j&&!R&&(v.tokenize=d),"string"}function T(w,v){for(var C;v.commentLevel&&(C=w.next());)C==="("&&w.peek()==="*"&&(w.next(),v.commentLevel++),C==="*"&&w.peek()===")"&&(w.next(),v.commentLevel--);return v.commentLevel||(v.tokenize=d),"comment"}function E(w,v){if(v.tokenize=d,w.eol()||w.match(/\s/,!1))return v.begin_sentence=!0,"statementend"}return{startState:function(){return{begin_sentence:!0,tokenize:d,commentLevel:0}},token:function(w,v){return v.tokenize(w,v)},blockCommentStart:"(*",blockCommentEnd:"*)",lineComment:null}});b.defineMIME("text/x-coq",{name:"coq"});b.defineMode("nasm",function(){function t(r){for(var c={},d=r.split(" "),m=0;m<d.length;++m)c[d[m]]=!0;return c}var e=t("aaa aad aam aas adc add and arpl bound bsf bsr bswap bt btc btr bts call cbw cdq clc cld cli clts cmc cmp cmps cmpxchg cwd cwde daa das dec div enter esc hlt idiv imul in inc ins int into invd invlpg iret iretd ja jae jb jbe jc jcxz je jecxz jg jge jl jle jmp jna jnae jnb jnbe jnc jne jng jnge jnl jnle jno jnp jns jnz jo jp jpe jpo js jz lahf lar lds lea leave les lfs lgdt lidt lgs lldt lmsw lock lods loop loope loopz loopnz loopne lsl lss ltr mov movs movsx movzx mul near neg nop not or out outs pop popa popad popf popfd push pusha pushad pushf pushfd rcl rcr rep repe repz repne repnz ret retf rol ror sahf sal sar sbb scas section setae setnb setb setnae setbe setna sete setz setne setnz setl setnge setge setng setle setng setg setnle sets setns setc setnc seto setno setp setpe setnp setpo sgdt sidt shl shld shr shrd sldt smsw stc std sti stos str sub test verr verw wait fwait wait fwait wbinvd xchg xlat xlatb xor equ"),s=t("db dw dd dq dt do dy dz resb resw resd resq rest reso resy resz"),i=t("section segment .data .text .bss"),n=t("ip eip eax ebx ecx edx edi esi ebp esp ax bx cx dx di si bp sp ah al bh bl ch cl dh dl ax bx cx dx cs ds ss es fs gs cr0 cr2 cr3 db0 db1 db2 db3 db6 db7 tr6 tr7 st rax rcx rdx rbs rsp rbp rsi rdi"),o=";";return{startState:function(){return{tokenize:null}},token:function(r,c){if(c.tokenize)return c.tokenize(r,c);var d,m=r.next();if(m===o)return r.skipToEnd(),"comment";if(m==="'")return r.skipTo("'"),"string";if(m==='"')return r.eatWhile(/\w/),"string";if(m==="."&&(r.eatWhile(/\w/),d=r.current().toLowerCase(),i.propertyIsEnumerable(d)))return"tag";if(/\d/.test(m))return m==="0"&&r.eat("x")?(r.eatWhile(/[0-9a-fA-F]/),"number"):(r.eatWhile(/\d/),"number");if(/\w/.test(m)&&(r.eatWhile(/\w/),r.eat(":")||(d=r.current().toLowerCase(),i.propertyIsEnumerable(d))))return"tag";if(e.propertyIsEnumerable(d))return r.eatWhile(/\w/),"keyword";if(s.propertyIsEnumerable(d))return r.eatWhile(/\w/),"tag";if(n.propertyIsEnumerable(d))return r.eatWhile(/\w/),"builtin"},lineComment:o}});b.defineMIME("text/x-nasm","nasm");b.defineMode("perl6",function(t,e){var s={"->":4,"++":4,"--":4,"**":4,"=~":4,"!~":4,"*":4,"/":4,"%":4,x:4,"+":4,"-":4,".":4,"<<":4,">>":4,"<":4,">":4,"<=":4,">=":4,"==":4,"!=":4,"<=>":4,"~~":4,"&":4,"|":4,"^":4,"&&":4,"||":4,"//":4,"..":4,"...":4,"?":4,":":4,"=":4,"+=":4,"-=":4,"*=":4,",":4,"=>":4,"::":4,BEGIN:[5,1],END:[5,1],GETC:[5,1],READ:[5,1],READLINE:[5,1],DESTROY:[5,1],TIE:[5,1],TIEHANDLE:[5,1],UNTIE:[5,1],$ARG:5,$_:5,"@ARG":5,"@_":5,'$"':5,$$:5,"$(":5,$EGID:5,"$)":5,$0:5,$SUBSEP:5,"$;":5,$UID:5,"$<":5,$EUID:5,"$>":5,$a:5,$b:5,"$^C":5,"$^D":5,$ENV:5,"%ENV":5,"$^F":5,"@F":5,"$^H":5,"%^H":5,$INPLACE_EDIT:5,"$^I":5,"$^M":5,$OSNAME:5,"$^O":5,"${^OPEN}":5,$PERLDB:5,"$^P":5,$SIG:5,"%SIG":5,$BASETIME:5,"$^T":5,"${^TAINT}":5,"${^UNICODE}":5,"${^UTF8CACHE}":5,"${^UTF8LOCALE}":5,$PERL_VERSION:5,"$^V":5,"${^WIN32_SLOPPY_STAT}":5,$EXECUTABLE_NAME:5,"$^X":5,$1:5,$MATCH:5,"$&":5,"${^MATCH}":5,$PREMATCH:5,"$`":5,"${^PREMATCH}":5,$POSTMATCH:5,"$'":5,"${^POSTMATCH}":5,$LAST_PAREN_MATCH:5,"$+":5,$LAST_SUBMATCH_RESULT:5,"$^N":5,"@LAST_MATCH_END":5,"@+":5,"%LAST_PAREN_MATCH":5,"%+":5,"@LAST_MATCH_START":5,"@-":5,"%LAST_MATCH_START":5,"%-":5,$LAST_REGEXP_CODE_RESULT:5,"$^R":5,"${^RE_DEBUG_FLAGS}":5,"${^RE_TRIE_MAXBUF}":5,$ARGV:5,"@ARGV":5,ARGV:5,ARGVOUT:5,$OUTPUT_FIELD_SEPARATOR:5,$OFS:5,"$,":5,$INPUT_LINE_NUMBER:5,$NR:5,"$.":5,$INPUT_RECORD_SEPARATOR:5,$RS:5,"$/":5,$OUTPUT_RECORD_SEPARATOR:5,$ORS:5,"$\\":5,$OUTPUT_AUTOFLUSH:5,"$|":5,$ACCUMULATOR:5,"$^A":5,$FORMAT_FORMFEED:5,"$^L":5,$FORMAT_PAGE_NUMBER:5,"$%":5,$FORMAT_LINES_LEFT:5,"$-":5,$FORMAT_LINE_BREAK_CHARACTERS:5,"$:":5,$FORMAT_LINES_PER_PAGE:5,"$=":5,$FORMAT_TOP_NAME:5,"$^":5,$FORMAT_NAME:5,"$~":5,"${^CHILD_ERROR_NATIVE}":5,$EXTENDED_OS_ERROR:5,"$^E":5,$EXCEPTIONS_BEING_CAUGHT:5,"$^S":5,$WARNING:5,"$^W":5,"${^WARNING_BITS}":5,$OS_ERROR:5,$ERRNO:5,"$!":5,"%OS_ERROR":5,"%ERRNO":5,"%!":5,$CHILD_ERROR:5,"$?":5,$EVAL_ERROR:5,"$@":5,$OFMT:5,"$#":5,"$*":5,$ARRAY_BASE:5,"$[":5,$OLD_PERL_VERSION:5,"$]":5,if:[1,1],elsif:[1,1],else:[1,1],while:[1,1],unless:[1,1],for:[1,1],foreach:[1,1],q:null,qq:null,qr:null,quotemeta:null,qw:null,qx:null,y:null},i=["macro sub submethod method multi proto only rule token regex category"],n=["module class role package enum grammar slang subset"],o=["self"],r=["use require"],c=["if else elsif unless"],d=["let my our state temp has constant"],m=["for loop repeat while until gather given"],T=["take do when next last redo return contend maybe defer","default exit make continue break goto leave async lift"],E=["is as but trusts of returns handles where augment supersede"],w=["BEGIN CHECK INIT START FIRST ENTER LEAVE KEEP","UNDO NEXT LAST PRE POST END CATCH CONTROL TEMP"],v=["die fail try warn"],C=["prec irs ofs ors export deep binary unary reparsed rw parsed cached","readonly defequiv will ref copy inline tighter looser equiv assoc","required"],j=["NaN Inf"],R=["oo fatal"],ve=["Object Any Junction Whatever Capture Match","Signature Proxy Matcher Package Module Class","Grammar Scalar Array Hash KeyHash KeySet KeyBag","Pair List Seq Range Set Bag Mapping Void Undef","Failure Exception Code Block Routine Sub Macro","Method Submethod Regex Str Blob Char Byte","Codepoint Grapheme StrPos StrLen Version Num","Complex num complex Bit bit bool True False","Increasing Decreasing Ordered Callable AnyChar","Positional Associative Ordering KeyExtractor","Comparator OrderingPair IO KitchenSink Role","Int int int1 int2 int4 int8 int16 int32 int64","Rat rat rat1 rat2 rat4 rat8 rat16 rat32 rat64","Buf buf buf1 buf2 buf4 buf8 buf16 buf32 buf64","UInt uint uint1 uint2 uint4 uint8 uint16 uint32","uint64 Abstraction utf8 utf16 utf32"],Ss=["eager hyper substr index rindex grep map sort join lines hints chmod","split reduce min max reverse truncate zip cat roundrobin classify","first sum keys values pairs defined delete exists elems end kv any","all one wrap shape key value name pop push shift splice unshift floor","ceiling abs exp log log10 rand sign sqrt sin cos tan round strand","roots cis unpolar polar atan2 pick chop p5chop chomp p5chomp lc","lcfirst uc ucfirst capitalize normalize pack unpack quotemeta comb","samecase sameaccent chars nfd nfc nfkd nfkc printf sprintf caller","evalfile run runinstead nothing want bless chr ord gmtime time eof","localtime gethost getpw chroot getlogin getpeername kill fork wait","perl graphs codes bytes clone print open read write readline say seek","close opendir readdir slurp pos fmt vec link unlink symlink uniq pair","asin atan sec cosec cotan asec acosec acotan sinh cosh tanh asinh","acos acosh atanh sech cosech cotanh sech acosech acotanh asech ok","plan_ok dies_ok lives_ok skip todo pass flunk force_todo use_ok isa_ok","diag is_deeply isnt like skip_rest unlike cmp_ok eval_dies_ok nok_error","eval_lives_ok approx is_approx throws_ok version_lt plan eval succ pred","times nonce once signature new connect operator undef undefine sleep","from to infix postfix prefix circumfix postcircumfix minmax lazy count","unwrap getc pi e context void quasi body each contains rewinddir subst","can isa flush arity assuming rewind callwith callsame nextwith nextsame","attr eval_elsewhere none srand trim trim_start trim_end lastcall WHAT","WHERE HOW WHICH VAR WHO WHENCE ACCEPTS REJECTS does not true iterator by","re im invert flip"],Es=["div x xx mod also leg cmp before after eq ne le lt","gt ge eqv ff fff and andthen Z X or xor","orelse extra m mm rx s tr"],A=function(l,p){var x,S,I;for(x=0;x<l.length;x++)for(I=l[x].split(" "),S=0;S<I.length;S++)s[I[S]]=p};A(i,1),A(n,1),A(o,1),A(r,1),A(c,1),A(d,2),A(m,1),A(T,1),A(E,1),A(w,1),A(v,1),A(C,1),A(j,1),A(R,1),A(ve,2),A(Ss,3),A(Es,4);var y="string-2",k=/[goseximacplud]/;function _(l,p,x,S,I){return p.chain=null,p.style=null,p.tail=null,p.tokenize=function(u,H){for(var Ie=!1,Re,Me=0;Re=u.next();){if(Re===x[Me]&&!Ie)return x[++Me]!==void 0?(H.chain=x[Me],H.style=S,H.tail=I):I&&u.eatWhile(I),H.tokenize=xe,S;Ie=!Ie&&Re=="\\"}return S},p.tokenize(l,p)}function De(l,p,x){return p.tokenize=function(S,I){return S.string==x&&(I.tokenize=xe),S.skipToEnd(),"string"},p.tokenize(l,p)}function xe(l,p){if(l.eatSpace())return null;if(p.chain)return _(l,p,p.chain,p.style,p.tail);if(l.match(/^\-?[\d\.]/,!1)&&l.match(/^(\-?(\d*\.\d+(e[+-]?\d+)?|\d+\.\d*)|0x[\da-fA-F]+|0b[01]+|\d+(e[+-]?\d+)?)/))return"number";if(l.match(/^<<(?=\w)/))return l.eatWhile(/\w/),De(l,p,l.current().substr(2));if(l.sol()&&l.match(/^\=item(?!\w)/))return De(l,p,"=cut");var x=l.next();if(x=='"'||x=="'"){if(l.prefix(3)=="<<"+x){var S=l.pos;l.eatWhile(/\w/);var I=l.current().substr(1);if(I&&l.eat(x))return De(l,p,I);l.pos=S}return _(l,p,[x],"string")}if(x=="q"){var u=l.look(-2);if(!(u&&/\w/.test(u))){if(u=l.look(0),u=="x"){if(u=l.look(1),u=="(")return l.eatSuffix(2),_(l,p,[")"],y,k);if(u=="[")return l.eatSuffix(2),_(l,p,["]"],y,k);if(u=="{")return l.eatSuffix(2),_(l,p,["}"],y,k);if(u=="<")return l.eatSuffix(2),_(l,p,[">"],y,k);if(/[\^'"!~\/]/.test(u))return l.eatSuffix(1),_(l,p,[l.eat(u)],y,k)}else if(u=="q"){if(u=l.look(1),u=="(")return l.eatSuffix(2),_(l,p,[")"],"string");if(u=="[")return l.eatSuffix(2),_(l,p,["]"],"string");if(u=="{")return l.eatSuffix(2),_(l,p,["}"],"string");if(u=="<")return l.eatSuffix(2),_(l,p,[">"],"string");if(/[\^'"!~\/]/.test(u))return l.eatSuffix(1),_(l,p,[l.eat(u)],"string")}else if(u=="w"){if(u=l.look(1),u=="(")return l.eatSuffix(2),_(l,p,[")"],"bracket");if(u=="[")return l.eatSuffix(2),_(l,p,["]"],"bracket");if(u=="{")return l.eatSuffix(2),_(l,p,["}"],"bracket");if(u=="<")return l.eatSuffix(2),_(l,p,[">"],"bracket");if(/[\^'"!~\/]/.test(u))return l.eatSuffix(1),_(l,p,[l.eat(u)],"bracket")}else if(u=="r"){if(u=l.look(1),u=="(")return l.eatSuffix(2),_(l,p,[")"],y,k);if(u=="[")return l.eatSuffix(2),_(l,p,["]"],y,k);if(u=="{")return l.eatSuffix(2),_(l,p,["}"],y,k);if(u=="<")return l.eatSuffix(2),_(l,p,[">"],y,k);if(/[\^'"!~\/]/.test(u))return l.eatSuffix(1),_(l,p,[l.eat(u)],y,k)}else if(/[\^'"!~\/(\[{<]/.test(u)){if(u=="(")return l.eatSuffix(1),_(l,p,[")"],"string");if(u=="[")return l.eatSuffix(1),_(l,p,["]"],"string");if(u=="{")return l.eatSuffix(1),_(l,p,["}"],"string");if(u=="<")return l.eatSuffix(1),_(l,p,[">"],"string");if(/[\^'"!~\/]/.test(u))return _(l,p,[l.eat(u)],"string")}}}if(x=="m"){var u=l.look(-2);if(!(u&&/\w/.test(u))&&(u=l.eat(/[(\[{<\^'"!~\/]/),u)){if(/[\^'"!~\/]/.test(u))return _(l,p,[u],y,k);if(u=="(")return _(l,p,[")"],y,k);if(u=="[")return _(l,p,["]"],y,k);if(u=="{")return _(l,p,["}"],y,k);if(u=="<")return _(l,p,[">"],y,k)}}if(x=="s"){var u=/[\/>\]})\w]/.test(l.look(-2));if(!u&&(u=l.eat(/[(\[{<\^'"!~\/]/),u))return u=="["?_(l,p,["]","]"],y,k):u=="{"?_(l,p,["}","}"],y,k):u=="<"?_(l,p,[">",">"],y,k):u=="("?_(l,p,[")",")"],y,k):_(l,p,[u,u],y,k)}if(x=="y"){var u=/[\/>\]})\w]/.test(l.look(-2));if(!u&&(u=l.eat(/[(\[{<\^'"!~\/]/),u))return u=="["?_(l,p,["]","]"],y,k):u=="{"?_(l,p,["}","}"],y,k):u=="<"?_(l,p,[">",">"],y,k):u=="("?_(l,p,[")",")"],y,k):_(l,p,[u,u],y,k)}if(x=="t"){var u=/[\/>\]})\w]/.test(l.look(-2));if(!u&&(u=l.eat("r"),u&&(u=l.eat(/[(\[{<\^'"!~\/]/),u)))return u=="["?_(l,p,["]","]"],y,k):u=="{"?_(l,p,["}","}"],y,k):u=="<"?_(l,p,[">",">"],y,k):u=="("?_(l,p,[")",")"],y,k):_(l,p,[u,u],y,k)}if(x=="`")return _(l,p,[x],"variable-2");if(x=="/")return/~\s*$/.test(l.prefix())?_(l,p,[x],y,k):"operator";if(x=="$"){var S=l.pos;if(l.eatWhile(/\d/)||l.eat("{")&&l.eatWhile(/\d/)&&l.eat("}"))return"variable-2";l.pos=S}if(/[$@%]/.test(x)){var S=l.pos;if(l.eat("^")&&l.eat(/[A-Z]/)||!/[@$%&]/.test(l.look(-2))&&l.eat(/[=|\\\-#?@;:&`~\^!\[\]*'"$+.,\/<>()]/)){var u=l.current();if(s[u])return"variable-2"}l.pos=S}if(/[$@%&]/.test(x)&&(l.eatWhile(/[\w$\[\]]/)||l.eat("{")&&l.eatWhile(/[\w$\[\]]/)&&l.eat("}"))){var u=l.current();return s[u]?"variable-2":"variable"}if(x=="#"&&l.look(-2)!="$")return l.skipToEnd(),"comment";if(/[:+\-\^*$&%@=<>!?|\/~\.]/.test(x)){var S=l.pos;if(l.eatWhile(/[:+\-\^*$&%@=<>!?|\/~\.]/),s[l.current()])return"operator";l.pos=S}if(x=="_"&&l.pos==1){if(l.suffix(6)=="_END__")return _(l,p,["\0"],"comment");if(l.suffix(7)=="_DATA__")return _(l,p,["\0"],"variable-2");if(l.suffix(7)=="_C__")return _(l,p,["\0"],"string")}if(/\w/.test(x)){var S=l.pos;if(l.look(-2)=="{"&&(l.look(0)=="}"||l.eatWhile(/\w/)&&l.look(0)=="}"))return"string";l.pos=S}if(/[A-Z]/.test(x)){var H=l.look(-2),S=l.pos;if(l.eatWhile(/[A-Z_]/),/[\da-z]/.test(l.look(0)))l.pos=S;else{var u=s[l.current()];return u?(u[1]&&(u=u[0]),H!=":"?u==1?"keyword":u==2?"def":u==3?"atom":u==4?"operator":u==5?"variable-2":"meta":"meta"):"meta"}}if(/[a-zA-Z_]/.test(x)){var H=l.look(-2);l.eatWhile(/\w/);var u=s[l.current()];return u?(u[1]&&(u=u[0]),H!=":"?u==1?"keyword":u==2?"def":u==3?"atom":u==4?"operator":u==5?"variable-2":"meta":"meta"):"meta"}return null}return{startState:function(){return{tokenize:xe,chain:null,style:null,tail:null}},token:function(l,p){return(p.tokenize||xe)(l,p)},electricChars:"{}"}});b.defineMIME("text/x-perl6","perl6");b.StringStream.prototype.look=function(t){return this.string.charAt(this.pos+(t||0))};b.StringStream.prototype.prefix=function(t){if(t){var e=this.pos-t;return this.string.substr(e>=0?e:0,t)}else return this.string.substr(0,this.pos-1)};b.StringStream.prototype.suffix=function(t){var e=this.string.length,s=e-this.pos+1;return this.string.substr(this.pos,t&&t<e?t:s)};b.StringStream.prototype.nsuffix=function(t){var e=this.pos,s=t||this.string.length-this.pos+1;return this.pos+=s,this.string.substr(e,s)};b.StringStream.prototype.eatSuffix=function(t){var e=this.pos+t,s;e<=0?this.pos=0:e>=(s=this.string.length-1)?this.pos=s:this.pos=e};b.defineSimpleMode("prolog",{start:[{regex:/"/,token:"string",next:"string_double_quote"},{regex:/`/,token:"string",next:"string_back_quote"},{regex:/'/,token:"atom",next:"atom"},{regex:/[a-z][0-9a-zA-Z_]*/,token:"atom"},{regex:/\s*(?:(?:%.*)|(?:\s+))\s*/,token:"comment"},{regex:/\/\*/,token:"comment",next:"comment"},{regex:/(?:[A-Z_][a-zA-Z0-9_]*)/,token:"variable"},{regex:/(?:0o[0-7]+|0x[0-9a-f]+|0b[01]+|0'(?:''|\\[abfnrtv\\'"`]|\\x?\d+\\|.)|\d+(?:\.\d+(?:e[+-]?\d+)?)?)/,token:"number"},{regex:/([#\$\&\*\+\-\.\/\:\<\=\>\?@\^\~\\]+)/,token:"graphic"},{regex:/\./,token:"point"},{regex:/\!/,token:"cut"},{regex:/[,;\(\)]/,token:"paren"},{regex:/\s+/,token:null}],comment:[{regex:/.*?\*\//,token:"comment",next:"start"},{regex:/.*/,token:"comment"}],atom:[{regex:/'/,token:"atom",next:"start"},{regex:/(?:\\(?:x?\d+)?\\)|(?:'')|(?:\\')|[^']/,token:"atom"}],string_double_quote:[{regex:/"/,token:"string",next:"start"},{regex:/[^"]|""|\\"/,token:"string"}],string_back_quote:[{regex:/`/,token:"string",next:"start"},{regex:/[^`]|``|\\`/,token:"string"}]});b.defineMIME("text/x-prolog","prolog");b.defineMIME("text/x-purescript","haskell");var mt="and as assert begin class constraint done downto exception external fun esfun function functor include inherit initializer lazy let pub mutable new nonrec object of open or pri rec then to type val virtualtry catch finally do else for if switch while import library export part of show hide is as".split(" "),fi="try catch match with else for if switch while do begin end in module sig struct".split(" "),gt="unit int char exn string int32 int64 float bool option mod land lor lxor lsl lsr asr".split(" "),_t="true false Error Ok None Some".split(" ");function Ce(t){for(var e={},s=0;s<t.length;++s)e[t[s]]=!0;return e}b.defineMIME("application/reason",{name:"clike",keywords:Ce(mt),blockKeywords:Ce(fi),atoms:Ce(gt),builtin:Ce(_t),hooks:{"{":function(t,e){if(t.eat("|"))return e.longString=!0,e.tokenize=_i,e.tokenize(t,e)},"[":function(t,e){return t.eat("|")?"operator":null},"|":function(t,e){return t.eat("]"),"operator"},'"':function(t,e){return e.tokenize=gi,e.tokenize(t,e)},"'":function(t,e){return e.tokenize=mi,e.tokenize(t,e)},"/":function(t,e){return t.eat("*")?(e.tokenize=ze(1),e.tokenize(t,e)):!1}}});function mi(t,e){for(var s=0;t.next()!=null;){if(t.eat("'")&&s<=4)return e.tokenize=null,"string";if(!/\w/.test(t.peek()))return e.tokenize=null,"variable-2";s++}return e.tokenize=null,null}function gi(t,e){for(var s,i=!1,n=!1;(s=t.next())!=null;){if(s==='"'&&!n){i=!0;break}n=!n&&s==="\\"}return i&&!n&&(e.tokenize=!1),"string"}function ze(t){return function(e,s){for(var i;i=e.next();)if(i=="*"&&e.eat("/"))if(t==1){s.tokenize=null;break}else return s.tokenize=ze(t-1),s.tokenize(e,s);else if(i=="/"&&e.eat("*"))return s.tokenize=ze(t+1),s.tokenize(e,s);return"comment"}}function _i(t,e){for(var s,i;e.longString&&(i=t.next())!=null;)s==="|"&&i==="}"&&(e.longString=!1),s=i;return e.longString||(e.tokenize=!1),"string"}b.registerHelper("hintWords","application/reason",mt.concat(gt).concat(_t));b.defineMode("reason",function(t){return Object.assign(b.getMode(t,"application/reason"),{lineComment:void 0})},"clike");Fs.register(b);Ds(b);b.registerGlobalHelper("hint","agda-input",(t,e)=>t&&t.name==="agda",Is(Ms));b.registerGlobalHelper("hint","julia-helper",(t,e)=>t&&t.name==="julia",Rs);class wi extends g{constructor(e,s){super(e,s)}cache(){return this._cache||(this._cache=Ne(this.stashGroup()),this._cache._=this._cache._||{}),this._cache}stashGroup(){return this.options.stashGroup||"default_group"}getStash(){if(this.stashId)return this.cache().get(this.stashId)}updateStash(){let e=this.getValue();e===""&&(e=" "),e===this.originalValue&&(e=null),(e||this.cache().get(this.stashId))&&this.stashId&&this.cache().set(this.stashId,e)}setStashId(e){this.stashId!==e&&this.setValue(this.getValue(),e,!0)}emptyStash(){this.cache().clear()}setValue(e,s,i){return e===this.getValue()?!1:(this.updateStash(),this.originalValue=e,s&&(this.stashId=s),i&&(e=this.getStash()||e),e===" "&&(e=""),this._setValue(e))}isDirty(){return!!this.originalValue&&this.getValue()!==this.originalValue}markClean(){this.originalValue=this.getValue(),this.updateStash()}}const he=(t,e)=>{const s=new AbortController;return(async()=>{try{await Vs(t,{signal:s.signal}),e&&e()}catch(i){if(i.name==="AbortError")return;throw i}})(),s};function bi(t,e,s){const i=document.querySelector(t);i.classList.add("animated",e),i.addEventListener("animationend",function n(){i.classList.remove("animated",e),i.removeEventListener("animationend",n),typeof s=="function"&&s(i)})}const vi=(t,e,s)=>{if(!t)return;const i=t.scrollTop;return fe({step:n=>{t.scrollTop=n*(e-i)+i},duration:s})},ie=(t,{duration:e=400,finish:s}={})=>{if(!!t)return t.style.opacity=0,t.style.display="inline-block",t.style.visibility="visible",fe({step:i=>{t.style.opacity=i},finish:s,duration:e})},pe=(t,{duration:e=400,finish:s}={})=>{if(!!t)return fe({step:i=>{t.style.opacity=1-i},finish:()=>{t.style.display="none",t.style.visibility="hidden",typeof s=="function"&&s()},duration:e})},O=(t,{duration:e=400,finish:s}={})=>{if(!t)return;t.style.height=0,t.style.display="block",wt(t);const i=t.scrollHeight;return fe({step:n=>{t.style.height=`${(i*n).toFixed(2)}px`},finish:()=>{t.style.display="block",t.style.height=null,bt(t),typeof s=="function"&&s()},duration:e})},D=(t,{duration:e=400,finish:s}={})=>{if(!t)return;const i=t.scrollHeight;return t.style.display="block",wt(t),fe({step:n=>{t.style.height=`${(i*(1-n)).toFixed(2)}px`},finish:()=>{t.style.display="none",t.style.height=null,bt(t),typeof s=="function"&&s()},duration:e})},wt=t=>Object.assign(t.style,{overflow:"hidden",marginTop:"0",marginBottom:"0",paddingTop:"0",paddingBottom:"0"}),bt=t=>Object.assign(t.style,{overflow:null,marginTop:null,marginBottom:null,paddingTop:null,paddingBottom:null}),xi=t=>.5-Math.cos(t*Math.PI)/2,fe=({step:t,finish:e,timing:s=xi,duration:i=400})=>{if(typeof t!="function")throw new TypeError("step must be a function");if(typeof s!="function")throw new TypeError("timing must be a function");const n=performance.now(),o={id:0};return o.id=requestAnimationFrame(function r(c){const d=i===0?1:Math.max(Math.min((c-n)/i,1),0);t(s(d)),d<1?o.id=requestAnimationFrame(r):typeof e=="function"&&e()}),o};class me extends g{constructor(e,s){super(e,s);this.$box=this.element.find(".alert-box"),this.currentAnimation=null,this.$box.length===0&&(this.element.is(".alert-box")?this.$box=this.element:this.$box=a("<div></div>").addClass("alert-box").appendTo(this.element)),this.$msgContainer=this.$box.find(".message"),this.$msgContainer.length===0&&(this.$msgContainer=this.$box)}container(){return this.options.boxContainer?this.$box:(this.$box.show(),this.element)}sanitize(e,s){return this.options.sanitize?this.options.sanitize(e,s):e}pickMessage(e){const s=this.options[`${e}Message`];return Array.isArray(s)?ke(s):typeof s=="function"?s(this):s}showResult(e,s,i){e?this.success(s,i):this.fail(s,i)}success(e,s){e=this.sanitize(e,"success"),this.$box.removeClass(this.options.failClassName).removeClass(this.options.workingClassName).removeClass(this.options.warnClassName).addClass(this.options.successClassName),this.show(e||this.pickMessage("success"),s)}fail(e,s){e=this.sanitize(e,"fail"),this.$box.addClass(this.options.failClassName).removeClass(this.options.successClassName).removeClass(this.options.warnClassName).removeClass(this.options.workingClassName),this.show(e||this.pickMessage("fail"),s)}warn(e,s){e=this.sanitize(e,"fail"),this.$box.addClass(this.options.warnClassName).removeClass(this.options.failClassName).removeClass(this.options.successClassName).removeClass(this.options.workingClassName),this.show(e,s)}working(e,s){e=this.sanitize(e,"working"),this.$box.addClass(this.options.workingClassName).removeClass(this.options.successClassName).removeClass(this.options.failClassName).removeClass(this.options.warnClassName),this.show(e,s)}show(e,s){if(this.update(e,s),this.cancelWaitHide(),!e)return this.hide();const i=this.container();if(s===0){i.show();return}i.hide();const n=()=>this.waitHide(s);this.stopCurrentAnimation(),this.currentAnimation=this.options.useSlide?O(i.get(0),{finish:n}):ie(i.get(0),{finish:n})}hide(){const e=this.container();this.stopCurrentAnimation(),this.currentAnimation=this.options.useSlide?D(e.get(0)):pe(e.get(0))}cancelWaitHide(){this._waitHide!=null&&this._waitHide.abort()}waitHide(e){(e>0||e!==0&&this.options.displayDuration>0)&&(this.cancelWaitHide(),this._waitHide=he(e||this.options.displayDuration,()=>this.hide()))}update(e,s){if(!e||(this.element.show(),this.options.showClose&&(e+="<a class='close'>&times;</a>"),this.$msgContainer.html(e),s===0))return;const i=this.container();this.stopCurrentAnimation(),this.currentAnimation=this.options.useSlide?O(i.get(0)):ie(i.get(0))}stopCurrentAnimation(){this.currentAnimation&&(cancelAnimationFrame(this.currentAnimation.id),this.currentAnimation=null)}}me.prototype.events={"a.close click"(t,e){e.preventDefault(),e.stopPropagation(),this.hide()}};me.defaults={displayDuration:5e3,successClassName:"success",warnClassName:"warning",failClassName:"alert",workingClassName:"working",successMessage:"",failMessage:"",showClose:!1,boxContainer:!0,useSlide:!1,sanitize:null};const yi={white:"#FFF",yellow:"#ECB613",blue:"#3C7EBB",purple:"#9574E6",black:"#333"},Be=["Good Job!","Impressive!","Outstanding!","Correct!","Great!","Correctamundo!","Excellent!"],ki=["Incorrect!","Nope! Try again."],Te="default",vt=function(t,e){return e.options.commands!=null&&e.options.commands[t]?(e.options.commands[t](),!0):!1};b.commands.save=t=>vt("save",t);b.commands.test=t=>vt("test",t);const xt=t=>{t.somethingSelected()?t.indentSelection("add"):t.getOption("indentWithTabs")?t.replaceSelection("	","end","+input"):t.execCommand("insertSoftTab")},yt=t=>{t.indentSelection("subtract")};b.keyMap["vim-insert"].Tab=xt;b.keyMap["vim-insert"]["Shift-Tab"]=yt;const kt={"\\"(t){t.replaceSelection("\\"),t.execCommand("autocomplete")}},Ci={extraKeys:{Space(t){const e=t.state.completionActive;e&&(e.widget.pick(),t.replaceSelection(" "))}},closeCharacters:/[\s]/,completeSingle:!1},Ct=function(t,e){e?(t.addKeyMap(kt),t.setOption("hintOptions",Ci)):(t.removeKeyMap(kt),t.setOption("hintOptions",null))};class M extends wi{constructor(e,s){super(e,s);var o,r;this.options.mode||(this.options.mode=this._app.data.language),this.keyMap=this.options.keyMap||this._app.localStorage.get("editorKeyMap")||Te,this.options.theme=this.options.theme||this._app.data.editorTheme||"codewars",this.width=this.options.width,this.height=this.element.height(),this.element.addClass("text-editor-container"),this.textarea=this.element.find("textarea"),this.textarea.length===1&&(this.options.value=this.textarea.val(),this.textarea.hide()),this.container=this.element.find(".js-editor"),this.config=Ti();const i=this.options.tabSize;this.editor=new b(this.container.get(0),{value:this.options.value||"",mode:this.options.mode,tabSize:i,indentUnit:i,smartIndent:(o=this.options.smartIndent)!=null?o:!0,autoCloseBrackets:(r=this.options.autoCloseBrackets)!=null?r:!0,indentWithTabs:!1,readOnly:this.options.readOnly,lineNumbers:this.options.lineNumbers,lineWrapping:this.options.lineWrapping,foldGutter:this.options.foldGutter,styleActiveLine:this.options.styleActiveLine,electricChars:!1,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],keyMap:this.keyMap,extraKeys:this.extraKeys(),commands:this.options.commands,matchBrackets:!0,undoDepth:600}),(this.options.mode==="agda"||this.options.mode==="julia")&&Ct(this.editor,!0),this.setTheme(this.options.theme),this.editor.on("change",()=>this.element.trigger("texteditor.change")),this.editor.on("focus",()=>{this.focused=!0,this.element.trigger("texteditor.focus")}),this.editor.on("blur",()=>{this.focused=!1,this.element.trigger("texteditor.blur")}),this.editor.on("scroll",()=>this.element.trigger("texteditor.scroll")),(this.options.value||this.options.stashId)&&this.setValue(this.options.value,this.options.stashId,this.options.preferStash),setTimeout(()=>{this.resize(),this.keyMap!==Te&&this.setBindings(this.keyMap)},0);const n=this.element.find(".editor-msg-container");n.appendTo(this.container),this.messages=new me(n,{boxContainer:!1,showClose:!0,displayDuration:0,successMessage:this.options.successMessage,sanitize(c,d){return c&&c.replace("Test::Error: ","")}}),this._controllers.push(this.messages),this.minHeight=this.element.height()}extraKeys(){const e=b.keyMap.default===b.keyMap.macDefault?"Cmd":"Ctrl",s={[`${e}-Enter`]:()=>this.onSubmit(),[`${e}-/`]:()=>this.editor.toggleComment(),Tab:xt,["Shift-Tab"]:yt};return this.keyMap!=="vim"&&(s.Esc=()=>{this.options.esc?this.options.esc(this):this.toggleFullScreen()}),this.options.extraKeys?Object.assign(s,this.options.extraKeys):s}setExtraKeys(e){this.options.extraKeys=e,this.editor.setOption("extraKeys",this.extraKeys())}toggleBindings(e){this.setBindings(this.keyMap!==e?e:Te)}setBindings(e){e==="default"&&(e="sublime"),e=e||Te,this.keyMap=e,this.editor.setOption("keyMap",e),this.editor.setOption("extraKeys",this.extraKeys()),this._app.localStorage.set("editorKeyMap",this.keyMap)}setOption(e,s){this.options.name=s;const i=`set${ut(e)}`;this[i]?this[i](s):this.editor.setOption(e,s)}onSubmit(){this.element.trigger("texteditor.submit",this,this.getValue())}getCursorLineStart(){return this.editor.getCursor("from").line}getCursorLineEnd(){return this.editor.getCursor("to").line}selectAllCurrentLines(){this.editor.setSelection(b.Pos(this.getCursorLineStart(),0),this.editor.getCursor("end"))}setTheme(e){this.editor.setOption("theme",e)}setMode(e,s){switch(e){case"nasm":s||(e="c");break;case"bf":s||(e="javascript");break;case"shell":case"sql":s||(e="ruby");break}const i=Se(this.config,e,"smartIndent",!0),n=Se(this.config,e,"autoCloseBrackets",!0),o=Se(this.config,e,"indentWithTabs",!1),r=Se(this.config,e,"tabSize",St(e)),c=Tt(e);Ct(this.editor,c==="agda"||c==="julia"),this.editor.setOption("mode",c),this.editor.setOption("tabSize",r),this.editor.setOption("indentUnit",r),this.editor.setOption("smartIndent",i),this.editor.setOption("autoCloseBrackets",n),this.editor.setOption("indentWithTabs",o)}setReadOnly(e){this.editor.setOption("readOnly",e)}setCursor(e=0,s=0){this.editor.setCursor(b.Pos(e,s))}scrollToLine(e=0){this.editor.scrollIntoView(b.Pos(e,0))}focus(){this.editor.focus()}getValue(){return this.editor.getValue()}_setValue(e){return e===""&&this.editor.setValue(" "),this.editor.setValue(e||"")}refresh(){const e=this.getValue();this.editor.setValue(""),this._setValue(e)}resize(){const e=this.element.parent();let s=this.fullScreenEnabled?a(window).height()-20:e.height();this.container.siblings().each(function(i,n){const o=a(n);o.css("position")==="static"&&o.is(":visible")&&(s-=o.outerHeight(!0))}),s>0&&this.setHeight(s)}setHeight(e,s){if(e<1)throw"height cannot be less than 1";this._setHeightWait!=null&&this._setHeightWait.reject(),!(s&&(s===!0&&(s=this.minHeight),e<s))&&(this.height=e,this.container.height(e),this.editor.setSize({width:"100%",height:Si(this.height)}))}save(){this.textarea.val(this.getValue()),this.options.emptyStashOnSave&&this.emptyStash(),typeof this.options.save=="function"&&this.options.save(this)}change(e){this.editor.on("change",()=>e(this))}enterFullScreen(){this.fullScreenEnabled||(this.fullScreenEnabled=!0,this.options.enterFullScreen?this.options.enterFullScreen():(this.originalScroll=a(window).scrollTop(),this.originalParent=this.element.parent(),this.element.addClass("is-full-screen"),this.element.appendTo("#app"),this.resize()),this.element.find("li.shrink").show(),this.element.find("li.expand").hide(),a("#uvTab, #shell, #main_header, #main_footer, #intercom-container").hide(),a("html").addClass("has-full-screen-control"),this.focus())}exitFullScreen(){!this.fullScreenEnabled||(this.fullScreenEnabled=!1,this.options.exitFullScreen?this.options.exitFullScreen():(this.element.removeClass("is-full-screen"),this.element.appendTo(this.originalParent),this.element.height("")),setTimeout(()=>a(window).trigger("resize"),0),this.element.find("li.expand").show(),this.element.find("li.shrink").hide(),a("#uvTab, #shell, #main_header, #main_footer, #intercom-container").show(),a(window).scrollTop(this.originalScroll),a("html").removeClass("has-full-screen-control"),this.focus())}toggleFullScreen(){this.fullScreenEnabled?this.exitFullScreen():this.enterFullScreen()}setBorder(e){const s=this.element.find(".CodeMirror").removeClass(`has-${this.currentBorder}-border`);this.currentBorder=e,e&&s.addClass(`has-${e}-border`)}}M.prototype.events={"texteditor.change"(){this.updateStash(),this.options.change&&this.options.change(this),this.textarea.text(this.editor.getValue()),this.textarea!=null&&this.textarea.length>0&&this.textarea.val(this.getValue())},"li.expand click"(){this.enterFullScreen()},"li.shrink click"(){this.exitFullScreen()},"window resize"(){this.resize()}};M.defaults={value:null,allowFullScreen:!0,tabSize:2,indentUnit:2,theme:null,mode:null,lineNumbers:!0,readOnly:!1,highlightActiveLine:!0,emptyStashOnSave:!1,save:null,change:null,stashGroup:"code_editor",successMessage:Be,foldGutter:!0,lineWrapping:!1,styleActiveLine:!0,width:"100%",height:null,esc:null};const Ti=()=>{try{const t=localStorage.getItem("editorOptions");return t?JSON.parse(t):{}}catch{return{}}},Se=(t,e,s,i)=>{const n=t[`[${e}]`];return n&&s in n?n[s]:s in t?t[s]:i},Si=t=>typeof t=="number"?`${t}px`:t;class ne extends g{constructor(e,s){super(e,s);const i=()=>{this.editor=new M(this.element.find(".text-editor-container"),{_app:this._app,mode:"markdown",theme:this.options.theme,lineNumbers:!1,lineWrapping:!0,stashGroup:this.options.stashGroup,value:this.options.originalValue,styleActiveLine:this.options.styleActiveLine,allowFullScreen:this.options.allowFullScreen,enterFullScreen:this.onEnterFullScreen.bind(this),exitFullScreen:this.onExitFullScreen.bind(this),smartIndent:!1,autoCloseBrackets:!1,change:()=>this.refresh(),extraKeys:{End:"goLineRight",Home:"goLineLeft"}}),this.previewDisplay=new se(this.element.find(".markdown").eq(0),{_app:this._app,emptyText:this.options.emptyPreviewText,language:this.options.language}),this._controllers.push(this.editor,this.previewDisplay),this.originalValue=this.options.originalValue||this.editor.getValue(),this.refreshHeight(),setTimeout(()=>this.updatePreview(),0),this.panels=[this.editor.element,this.previewDisplay.element],typeof this.ready=="function"&&this.ready()},n=()=>{this.options.alwaysVisible||this.element.is(":visible")?i():this.destroyed||setTimeout(n,500)};n()}focus(){this.editor.focus()}refreshHeight(e){e==null&&(e=this.options.editorHeight||this.element.height()),this.element.is(":visible")&&(this.fullScreenEnabled||this.editor.setHeight(e))}refresh(){this.updatePreview(),this.isDirty()?this.dirtyFired||(this.element.trigger("markdowneditor.dirty",this,this.getValue()),this.dirtyFired=!0):this.dirtyFired&&this.markClean()}isDirty(){return this.getValue()!==this.originalValue}markClean(){this.originalValue=this.editor.getValue(),this.dirtyFired=!1,this.element.trigger("markdowneditor.clean",this,this.getValue())}getValue(){return this.editor.getValue()}setValue(...e){this.editor.setValue(...e)}setStashId(e){this.editor.setStashId(e)}updatePreview(){this.previewDisplay.setMarkdown(this.getValue())}setLanguage(e){this.previewDisplay.setLanguage(e)}setTheme(e){this.editor.setTheme(e)}appendToParent(e){a(this).appendTo(e)}resize(){let e=a(window).height();this.fullScreenEnabled&&(e-=Object.values(this.element.css(["paddingTop","paddingBottom"])).reduce((i,n)=>parseInt(n,10),0));for(let s of this.panels)a(s).height(e);this.editor.resize()}onEnterFullScreen(){if(!this.fullScreenEnabled){this.fullScreenEnabled=!0,this.originalParents=[],this.originalHeight=this.editor.element.height(),this.fullScreenContainer().appendTo("#app").hide(),this.collapseLink().on("click",()=>this.editor.exitFullScreen());for(let e of this.panels)this.originalParents.push(e.parent()),e.addClass("is-full-screen").appendTo(this.fullScreenContainer());ie(this.fullScreenContainer().get(0)),setTimeout(()=>this.resize(),0)}}onExitFullScreen(){if(!!this.fullScreenEnabled){this.fullScreenEnabled=!1,this.editor.setHeight(this.originalHeight);for(let e=0;e<this.panels.length;e++)this.panels[e].removeClass("is-full-screen").height("").appendTo(this.originalParents[e]);this.fullScreenContainer().remove(),typeof this.options.exitFullScreen=="function"&&this.options.exitFullScreen()}}fullScreenContainer(){return this._fullScreenContainer||(this._fullScreenContainer=a('<div id="markdown_full_screen"></div>')),this._fullScreenContainer}collapseLink(){return this._collapseLink||(this._collapseLink=a('<a class="collapse-btn"><i class="icon-moon-collapse"></i>Exit Full Screen</a>').appendTo(this.fullScreenContainer())),this._collapseLink}}ne.prototype.events={".btn-expand click, .js-expand click"(t,e){e.preventDefault(),e.stopPropagation(),this.editor.enterFullScreen()}};ne.defaults={allowFullScreen:!0,emptyPreviewText:null,stashGroup:"markdown",language:null,styleActiveLine:!0,editorHeight:null,theme:null,alwaysVisible:!1};var Ei={agda:`{-# OPTIONS --safe #-}
module Test where

open import Example

check : {A : Set} {a b c : A} \u2192 a \u2261 b \u2192 b \u2261 c \u2192 a \u2261 c
check = _\u21C6_
`,bf:`// You can use the Mocha (JavaScript) framework for testing BF.
// TODO: replace with your own tests (TDD), these are just here to demonstrate usage.

describe("Your Test Suite", function () {
  it("should return Hello World!", function () {
    // use runBF() to run your program, you can pass it arguments
    Test.assertEquals(runBF(), "Hello World!");
  });
});
`,c:`// TODO: Replace examples and use TDD by writing your own tests. The code provided here is just a how-to example.

#include <criterion/criterion.h>

// replace with the actual method being tested
int foo(int,int);

Test(the_multiply_function, should_pass_all_the_tests_provided) {
    cr_assert_eq(foo(1, 1), 1);
}
`,cfml:`// https://testbox.ortusbooks.com/
component extends="CodewarsBaseSpec" {
    // Submitted solution is written to Solution.cfc
    function beforeAll(){
        SUT = createObject( 'Solution' );
    }

    function run(){
        describe( "Example", function(){
            it( "returns sum", function(){
                expect( SUT.add(1, 1) ).toBe( 2 );
            });
        });
    }
}
`,clojure:`;; TODO: TDD using clojure.test framework
`,cobol:`123456*8901
      * See https://github.com/codewars/cobol-test
       identification division.
       program-id. tests.

       data division.
       working-storage section.
       01  arg1        pic s9(5).
       01  arg2        pic s9(5).
       01  arg1-str    pic -9(5).
       01  arg2-str    pic -9(5).
       01  result      pic s9(6).
       01  expected    pic s9(6).

       procedure division.
      * Fixed Tests
           testsuite 'Fixed Tests'.
           testcase 'Test 1'.
           move 3 to arg1
           move -5 to arg2
           call 'solution' using
               by content arg1 arg2
               by reference result
           expect result to be -2.0.

      * Random Tests
           testsuite "Random Tests".
           perform set-random-seed
           perform 5 times
               compute arg1 = function random() * 199999 - 99999
               compute arg2 = function random() * 199999 - 99999
               move arg1 to arg1-str
               move arg2 to arg2-str
               testcase 'Testing ' arg1-str ' + ' arg2-str.
               add arg1 to arg2 giving expected
               call 'solution' using
                   by content arg1 arg2
                   by reference result
               expect result to be expected.
           end-perform

           end tests.

       end program tests.
`,coffeescript:`# Create your own tests here. These are some of the methods available:
#  Test.expect(boolean, [optional] message)
#  Test.assertEquals(actual, expected, [optional] message)
#  Test.assertSimilar(actual, expected, [optional] message)
#  Test.assertNotEquals(actual, expected, [optional] message)
`,commonlisp:`(in-package #:cl-user)
(defpackage #:challenge/tests/solution
  (:use #:cl
        #:rove
        #:challenge/solution))
(in-package #:challenge/tests/solution)
; Solution can be imported from \`challenge/solution\`.
; Optional preloaded package (\`challenge/preloaded\`) can be provided by kata authors.

; Write tests with Rove (https://github.com/fukamachi/rove).
; The use of \`testing\` is recommended for better output on Codewars.
(deftest test-solution
  (testing "add"
    (ok (= (add 1 1) 2))))
`,coq:`Require Solution.
Require Import Preloaded.
From CW Require Import Loader.

CWGroup "Solution.example".
  CWTest "should have the correct type".
    CWAssert Solution.example : (forall (A : Type) (a b c : A),
      a = b -> b = c -> a = c).
  CWTest "should be closed under the global context".
    CWAssert Solution.example Assumes.
CWEndGroup.
`,cpp:`// TODO: Replace examples and use TDD by writing your own tests

Describe(any_group_name_you_want)
{
    It(should_do_something)
    {
        Assert::That("some value", Equals("another value"));
    }
};
`,crystal:`# Spec example:
# TODO: replace with your own tests (TDD), these are just how-to examples.

describe "Solution" do
  it "should test something" do
     foo.should eq "bar"
  end
end
`,csharp:`namespace Solution {
  using NUnit.Framework;
  using System;

  // TODO: Replace examples and use TDD by writing your own tests

  [TestFixture]
  public class SolutionTest
  {
    [Test]
    public void MyTest()
    {
      Assert.AreEqual("expected", "actual");
    }
  }
}
`,d:`module solution_test;

import solution : add;

// fluent asserts is supported
version(unittest) import fluent.asserts;

// Name the unittest block
@("add returns the sum")
unittest {
    add(1, 1).should.equal(2).because("1 + 1 == 2");
    assert(add(1, 1) == 2);
}
`,dart:`// See https://pub.dartlang.org/packages/test
import "package:test/test.dart";
import "package:solution/solution.dart";

void main() {
  test("add", () {
    expect(add(1, 1), equals(2));
  });
}
`,elixir:`# TODO: Replace examples and use TDD by writing your own tests

defmodule TestSolution do
  use ExUnit.Case

  test "some test description" do
    assert "actual" == "expected"
  end
end
`,elm:`module ExampleTest exposing (..)
-- Codewars uses [elm-test](https://package.elm-lang.org/packages/elm-explorations/test/1.1.0).
-- Replace this with your own tests.

import Expect exposing (Expectation)
import Test exposing (..)

import Example

suite : Test
suite =
  describe "Example"
    [ test "add" <|
      \\_ -> (Example.add 1 1) |> Expect.equal 2
    ]
`,erlang:`% Test using EUnit (http://erlang.org/doc/apps/eunit/chapter.html)
% TODO: replace with your own tests (TDD), these are just here to demonstrate usage.
-module(example_tests).
-include_lib("eunit/include/eunit.hrl").

example_test_() ->
  {"Two Oldest Ages",
    [{"returns [45, 87] for [1,5,87,45,8,8]", ?_assertMatch([45, 87], [45])}]}.
`,factor:`! Use vocabulary tools.testest for testing.
! See https://github.com/codewars/testest

USING: example tools.testest ;
IN: example.tests

: run-tests ( -- )
  "Example" describe#{
    "test case" it#{
      <{ 1 1 example ->  1 }>
    }#
  }#
;

MAIN: run-tests
`,forth:`\\ ttester.fs with extension for Codewars
\\ See https://github.com/codewars/ttester-codewars

s" example" describe#{
  s" returns sum" it#{
    <{ 1 1 example -> 2 }>
  }#
}#
`,fortran:`! CW2 example
program TestCases
  use CW2
  use Solution
implicit none
  call describe("add")
    call it("adds integers")
      call assertEquals(2, add(1, 1))
    call endContext()
  call endContext()
end program
`,fsharp:`// Fuchu Spec example:
// TODO: replace with your own tests (TDD), these are just how-to examples.
// See https://github.com/mausch/Fuchu for documentation

module Tests = begin
    open Fuchu
    let suite =
        testList "Solution" [
            testCase "Example Test" <|
              fun _ -> Assert.Equal("2+2", 4, 2+2)
        ]
end
`,go:`// TODO: replace with your own tests (TDD). An example to get you started is included below.
// Ginkgo BDD Testing Framework <http://onsi.github.io/ginkgo/>
// Gomega Matcher Library <http://onsi.github.io/gomega/>

package kata_test
import (
  . "github.com/onsi/ginkgo"
  . "github.com/onsi/gomega"
  . "codewarrior/kata"
)
var _ = Describe("Test Example", func() {
//   It("should test that the solution returns the correct value", func() {
//     Expect(Solution(1)).To(Equal(2))
//   })
})
`,groovy:`// You can test using JUnit or Spock. JUnit is shown below
// TODO: replace this example test with your own, this is just here to demonstrate usage.
import org.junit.Test

class TestExample {
  @Test
  void returnsProduct() {
    assert Example.multiply(2, 2) == 4
  }
}
`,haskell:`module ExampleSpec where
-- Tests can be written using Hspec http://hspec.github.io/
-- Replace this with your own tests.

import Test.Hspec
import Example

-- \`spec\` of type \`Spec\` must exist
spec :: Spec
spec = do
    describe "add" $ do
        it "adds Nums" $ do
            (add 1 1) \`shouldBe\` (2 :: Integer)

`,haxe:`// Tests are written using https://github.com/haxe-utest/utest
import utest.Assert;
import Solution;

class SolutionTest extends utest.Test {
  function testExample() {
    Assert.equals(2, Example.add(1, 1));
  }
}
`,idris:`module ExampleSpec
-- Tests can be written using [specdris](https://github.com/pheymann/specdris)
-- \`specSuite : IO ()\` is required.

import Specdris.Spec
import Example

%access export
%default total

specSuite : IO ()
specSuite = spec $ do
  describe "add" $ do
    it "adds two natural numbers" $ do
      (1 \`add\` 1) \`shouldBe\` 2
`,java:`import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.assertEquals;

// TODO: Replace examples and use TDD by writing your own tests

class SolutionTest {
    @Test
    void testSomething() {
        // assertEquals("expected", "actual");
    }
}
`,javascript:`// Since Node 10, we're using Mocha.
// You can use \`chai\` for assertions.
const chai = require("chai");
const assert = chai.assert;
// Uncomment the following line to disable truncating failure messages for deep equals, do:
// chai.config.truncateThreshold = 0;
// Since Node 12, we no longer include assertions from our deprecated custom test framework by default.
// Uncomment the following to use the old assertions:
// const Test = require("@codewars/test-compat");

describe("Solution", function() {
  it("should test for something", function() {
    // Test.assertEquals(1 + 1, 2);
    // assert.strictEqual(1 + 1, 2);
  });
});
`,julia:`# FactCheck example:
# TODO: replace with your own tests (TDD), these are just how-to examples.
using FactCheck
facts("Testing basics") do
  @fact 1 --> 1
  @fact 2*2 --> 4
  @fact uppercase("foo") --> "FOO"
  @fact 2*[1,2,3] --> [2,4,6]
end
`,kotlin:`// You can test using JUnit or KotlinTest. JUnit is shown below
// TODO: replace this example test with your own, this is just here to demonstrate usage.

// TODO: replace with whatever your package is called
package solution

import kotlin.test.assertEquals
import org.junit.Test

class TestExample {
  @Test
  fun multiply() {
    assertEquals(4, multiply(2, 2))
  }
}
`,lean:`import Preloaded Solution

theorem submission : SUBMISSION := immediate
#print axioms submission
`,lua:`-- TODO: Replace examples and use TDD by writing your own tests
local solution = require 'solution'
describe("solution", function()
  it("test for something", function()
    assert.are.same("expected", solution.foo())
  end)
end)
`,nasm:`; this is just an example. See https://docs.codewars.com/languages/nasm
#include <criterion/criterion.h>
int add(int, int);
Test(add_test, should_add_integers) {
  cr_assert_eq(add(1, 1), 2);
}
`,objc:`// TODO: replace with your own tests, these are just how-to examples.
// Codewars uses UnitKit unit testing framework.
// See https://docs.codewars.com/languages/objc/unitkit
@implementation TestSuite
- (void) testsIfReturnsActual
{
  UKStringsEqual(@"expected", Solution(@"value"));
  UKStringsNotEqual(@"expected", Solution(@"value"));
}
@end
`,ocaml:`(* TODO: replace with your own tests, these are just how-to examples.
 * OUnit Spec example:
 * See http://ounit.forge.ocamlcore.org/api-ounit-2.0.0 for documentation
 *)

module Tests = struct
    open OUnit
    let suite = [
        "Suite Name" >:::
            [
                "Test Name" >:: (fun _ ->
                    assert_equal "Expected" "Actual"
                )
            ]
        ]
    ;;
end
`,pascal:`unit ExampleTests;
// Tests are written with [FPTest](https://github.com/graemeg/fptest).

{$mode objfpc}{$H+}

interface

uses
  TestFramework,
  Example;

type TExampleTests = class(TTestCase)
  published
    procedure TestAdd;
end;

procedure RegisterTests;

implementation

procedure RegisterTests;
begin
  TestFramework.RegisterTest(TExampleTests.Suite);
end;

procedure TExampleTests.TestAdd;
begin
  CheckEquals(2, Add(1, 1));
end;
end.
`,perl:`# You can use \`Test::More\` to write tests.
# https://metacpan.org/pod/Test::More
# use strict;
# use warnings;
# use Test::More;
# \`Test::Most\` can be used to load commonly needed features.
# See https://metacpan.org/pod/Test::Most
use Test::Most;

# The name of the solution package is inferred from the code.
use Solution;

subtest "examples" => sub {
  is(Solution::add(1, 1), 2);
};

done_testing();
`,php:`<?php
use PHPUnit\\Framework\\TestCase;

// PHPUnit Test Examples:
// TODO: Replace examples and use TDD by writing your own tests
class ExampleTest extends TestCase
{
    // test function names should start with "test"
    public function testThatSomethingShouldHappen() {
      $this->assertEquals("a", "a");
      $this->assertEquals([0], [0]);
    }
}
`,powershell:`# You can test with Pester (https://github.com/pester/Pester)
# TODO: replace with your own tests (TDD), these are just here to demonstrate usage.
$Results = answer_to_life @(4,2)

Describe 'My Solution' {
  It 'Should return 42' {
    $Results[0] | Should be 42
  }
}
`,prolog:`% plunit can be used to test solution
:- begin_tests(example).
:- include(example).

test(example_test) :-
        X is 1+1,
        assertion(X == 2).

:- end_tests(example).
`,purescript:`module ExampleSpec where
-- Tests can be written using spec https://purescript-spec.github.io/purescript-spec
-- Replace this with your own tests.

import Prelude

import Test.Spec (Spec, describe, it)
import Test.Spec.Assertions (shouldEqual)

import Example (add')

spec :: Spec Unit
spec =
  describe "Example" do
    describe "add'" do
      it "returns sum" do
        (add' 1 1) \`shouldEqual\` 2
`,python:`import codewars_test as test
# TODO Write tests
import solution # or from solution import example

# test.assert_equals(actual, expected, [optional] message)
@test.describe("Example")
def test_group():
    @test.it("test case")
    def test_case():
        test.assert_equals(1 + 1, 2)
`,r:`# You can test with testthat (http://r-pkgs.had.co.nz/tests.html#test-structure)
# TODO: replace with your own tests (TDD), these are just here to demonstrate usage.

test_that("example", {
  expect_equal(actual, expected)
})
`,racket:`#lang racket
(require "solution.rkt")
(require rackunit
         codewars/rackunit)

;; codewars/rackunit provides \`run-tests\`.
;; See RackUnit documentation. https://docs.racket-lang.org/rackunit
(run-tests
  (test-suite
   "example"
   (test-case
    "add"
    (check-equal? (add 1 1) 2))))
`,raku:`use v6;
# You can write tests using the standard Test module.
# https://docs.raku.org/language/testing
use Test;
# The name of the solution module is inferred from the code.
use Solution;

subtest "examples", {
    is(add(1, 1), 2);
}
done-testing;
`,reason:`/* You can write tests using Jest.
 * See https://github.com/glennsl/bs-jest
 * Replace with your own tests.
 */
open Jest;

describe("add", () => {
  open Expect;
  test("1 + 1", () =>
    expect(Solution.add(1, 1)) |> toBe(2));
});
`,ruby:`# From Ruby 3.0, RSpec is used under the hood.
# See https://rspec.info/
# Defaults to the global \`describe\` for backwards compatibility, but \`RSpec.desribe\` works as well.
describe "Example" do
  it "should return the sum" do
    expect(add(1, 1)).to eq(2)
    # The following is still supported, but new tests should now use them.
    # Test.assert_equals(add(1, 1), 2)
  end
end
`,rust:`// Add your tests here.
// See https://doc.rust-lang.org/stable/rust-by-example/testing/unit_testing.html

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_add() {
        assert_eq!(add(1, 2), 3);
    }
}
`,scala:`// You can test using ScalaTest (http://www.scalatest.org/).
import org.scalatest.flatspec.AnyFlatSpec
import org.scalatest.matchers.should.Matchers

// TODO: replace this example test with your own, this is just here to demonstrate usage.
// See http://www.scalatest.org/ to learn more.
class ExampleSpec extends AnyFlatSpec with Matchers {
  "multiply(2, 2)" should "return 4" in {
    Example.multiply(2, 2) should be (4)
  }
}
`,shell:`# TODO: replace with your own tests (TDD). An example to get you started is included below.

# run the solution and store its result
# output = run_shell args: ['my_arg']

# describe "Solution" do
#   it "should return the argument passed in" do
#     expect(output).to include('my_arg')
#   end
# end
`,solidity:`// You can test using JavaScript/Truffle
// TODO: replace this example test with your own, this is just here to demonstrate usage.

const Example = artifacts.require("ExampleToken");
contract('Example', function(accounts) {
  it("should put 10000 in the first account", async function() {
    const m = await Example.deployed();

    const balance = await m.balanceOf.call(accounts[0]);
    assert.equal(balance.valueOf(), 10000, "10000 wasn't in the first account");
  });
});
`,sql:`# TODO: replace with your own tests (TDD), these are just how-to examples to get you started.

# Ruby/Rspec/Sequel Example:
# While the code section is pure SQL, for testing we use Ruby & Rspec.
# Sequel (https://github.com/jeremyevans/sequel) is used to setup the database and run queries.
# The connection is already made for you, use DB to access.

DB.create_table :items do
  primary_key :id
  String :name
  Float :price
end

items = DB[:items] # Create a dataset

# Populate the table
items.insert(:name => 'a', :price => 10)
items.insert(:name => 'b', :price => 35)
items.insert(:name => 'c', :price => 20)

# calling run_sql will print the results and return them so that you can test data within them.
# if you want to test different sets of data, then its best to move this code into its own top level describe
# block. If you are only testing one set though, its better to set the results before you enter a describe block
# so that the results are presented at the top of the output.
results = run_sql

describe :items do
   it "should return 3 items" do
    expect(results.count).to eq 3
   end
end

# Other tips about using run_sql:
# The SQL/code section supports multiple statements, seperated of course by a ";".
# When multiple SELECT statements are issued:
#    run_sql will return an array of arrays, unless only one SELECT statement returned results
#    INSERT and UPDATE results will not be included in the list
#    SELECT statements that return no results will not be included in the list
`,swift:`import XCTest
// XCTest Spec Example:
// TODO: replace with your own tests (TDD), these are just how-to examples to get you started

class SolutionTest: XCTestCase {
    static var allTests = [
        ("Test Example", testExample),
    ]

    func testExample() {
        let actual = 1
        XCTAssertEqual(actual, 1)
    }
}

XCTMain([
    testCase(SolutionTest.allTests)
])
`,typescript:`// See https://www.chaijs.com for how to use Chai.
import { assert } from "chai";

import { example } from "./solution";

// TODO Add your tests here
describe("example", function() {
  it("test", function() {
    // assert.strictEqual(1 + 1, 2);
  });
});
`,vb:`Imports NUnit.Framework

<TestFixture>
Public Class AdderTest
    <Test>
    Public Sub ShouldAddInts()
        Assert.AreEqual(2, Adder.Add(1, 1))
    End Sub
End Class
`};class ae extends M{constructor(e,s){super(e,s)}emptyCodeMsg(){return ke(["Code is missing!","Where is the code?","Why you no send me any code?","Present must your code be before run it we can","Code is missing that is why you fail","Code you must!","Feed me code!","Where did the code go?","Some code would be nice...","There seems to be a lack of code going on here","The idea here would be to code something...","Well this isn't going very well. We need some code..."])}defaultFixtureText(e){return Ei[e]}}ae.prototype.events=Object.assign({},M.prototype.events);ae.defaults=Object.assign({},M.defaults);class Ge extends de{configureDisabled(e){if(e.element.parent(".is-disabled").length>0){const s=e.element.find("input");s.addClass("is-disabled"),s.attr("disabled",!0)}}configureMarkdownField(e,s){const i=e.element.find(".markdown-editor"),n=new ne(i,Object.assign({},s||{},{_app:this._app}));n.ready=function(){e.element.parent(".is-disabled").length>0&&n.editor.setReadOnly(!0)},i.on("texteditor.change",()=>{e.element.data("context").value=n.getValue()}),i.data("editor",n),i.addClass("js-markdown-editor")}configureCodeEditorField(e,s){const i=new ae(e.element,Object.assign({},s||{},{_app:this._app}));e.element.on("texteditor.change",()=>{e.element.data("context").value=i.getValue()}),e.element.data("editor",i),e.element.addClass("js-code-editor")}}Ge.prototype.filters={field_class(t){let e="field";return t.context.id&&(e+=` ${t.context.id}`),t.includeData.required&&(e+=" required"),t.context.errors&&t.context.errors.length>0&&(e+=" has-error"),e},field_value_class(t){let e="field";return t.context.errors&&t.context.errors.length>0&&(e+=" has-error"),e}};Ge.prototype.renderEvents={view(){this.element.find("select").each((t,e)=>{const s=a(e);s.attr("value")&&s.val(s.attr("value"))})},hidden_field(t){t.element.on("change",function(){t.element.data("context").value=a(this).val()})},input_field(t){t.element.find("input").on("change, keyup",function(){t.element.data("context").value=a(this).val()}),this.configureDisabled(t)},checkbox_field(t){t.element.find("input").on("change",function(){t.element.data("context").value=a(this).is(":checked")}),this.configureDisabled(t)},markdown_field(t){this.configureMarkdownField(t)},code_editor_field(t){this.configureCodeEditorField(t)}};class Ee extends de{constructor(e,s){super(e,s);!window.location.hash||window.location.hash.includes("/")||this.element.one("view:render",()=>{!this._app.comments||setTimeout(()=>{this._app.comments.focus(window.location.hash)},100)})}}Ee.prototype.filters={"blocked_new?"(t){return!t.appData.created_by_id||!t.currentUser||!t.currentUser.blocked_by_user_ids?!1:t.currentUser.blocked_by_user_ids.indexOf(t.appData.created_by_id)>=0},"blocked_comment?"(t){const e=t.currentUser&&t.currentUser.blocked_user_ids||[];return e.indexOf(t.context.user_id)>=0||e.indexOf(t.context.user_id)>=0},"hide_content?"(t){return t.context.masked&&!t.context.markdown},post_label(t){return t.context.id?"Update":t.context.nest_level===1?"Reply":"Post"},masked_flag_title(t){return t.context.masked?"Un-flag this comment as having spoilers within it.":"Flag this comment as a spoiler. It will be hidden from users who have not yet solved the kata."},"current_user_comment?"(t){return t.context.user_id===t.currentUser.id},"has_replies?"(t){return t.context.comments!=null&&t.context.comments.length>0},"allow_reply?"(t){return!t.filter("blocked_new?")&&t.context.nest_level===0&&(!t.filter("hide_content?")||t.filter("current_user_is_admin?")||t.filter("current_user_comment?")||t.filter("has_replies?"))},"can_edit?"(t){return t.filter("current_user_comment?")&&!t.filter("has_replies?")||t.filter("current_user_is_admin?")},"can_remove?"(t){const e=t.context.nest_level===0&&t.filter("can_edit?");return!t.context.type&&(e||t.filter("moderator?"))},"can_resolve?"(t){if(!t.currentUser)return!1;const e=t.value||t.context;return e["resolvable?"]&&(e.allowed_resolver_ids!=null&&e.allowed_resolver_ids.indexOf(t.currentUser.id)>=0||t.filter("current_user_is_admin?")||t.currentUser.can_resolve_comments)},"labels_allowed?"(t){return t.context.nest_level!==1&&t.data.allowedLabels!=null&&t.data.allowedLabels.length>0},new_comment_class(t){let e="";return(t.context.id||t.context.active)&&(e+="is-active"),t.context.modal||(e+=" mt-5"),e},nested_comments_class(t){if(t.context.collapsed||t.expr("@comments | none?"))return"is-hidden"},hr_class(t){if(t.data.totalComments===0)return"is-hidden"},label_tag_class(t){if(t.context["resolvable?"])switch(t.context.label){case"issue":return"issue-label";case"question":return"question-label";default:return"is-lightened"}else return"is-low-light"},"no_markdown?"(t){return!(t.context.masked||t.context.markdown)},comment_class(t){let e=t.expr("@type | lower_case");return t.filter("no_markdown?")&&(e+=" no-markdown"),e},label_name(t){return t.context.label_text?t.context.label_text:"No Label"},spoiler_class(t){return t.context.masked?"is-active":"is-auto-hidden"},"show_mark_closed?"(t){if(t.expr("@@ | can_resolve?")&&t.context.nest_level>0)return t.expr("current_user_is_admin?")||!t.context.id}};Ee.prototype.renderEvents={view(){this._app.labelVotes.updateVotes(),setTimeout(()=>$(),100)},partial(t){this._app.votes.updateVotes()},_comment_new(t){if(!(!this._app.currentUser.id||this._app.currentUser.guest)&&!t.element.data("editor")){const s=new ne(t.element,{_app:this._app,styleActiveLine:!1,editorHeight:135,alwaysVisible:!0});t.element.data("editor",s)}a("body").find("select").each((s,i)=>{const n=a(i);n.attr("value")&&n.val(n.attr("value"))}),this.options.focusEditor&&setTimeout(()=>t.element.data("editor").focus(),100)}};const je=t=>a("view").each((e,s)=>{const i=a(s);if(!i.data("view")&&i.closest("template").length===0){const n=ji(i.data("view-type"));new n(i,{_app:t})}}),ji=t=>{switch(t){case"MarkdownView":return pt;case"CommentsView":return Ee;case"FormView":return Ge;default:return de}},Tt=t=>{if(!t||/^if(?:-not)?:/.test(t))return"text/plain";switch(t){case"bash":case"shell":return"shell";case"bf":return"text/x-brainfuck";case"c":return"text/x-c";case"cpp":return"text/x-c++src";case"cfml":return"javascript";case"csharp":return"text/x-csharp";case"sql":return"text/x-pgsql";case"solidity":case"typescript":return"application/typescript";case"php":return"text/x-php";case"scala":return"text/x-scala";case"java":return"text/x-java";case"objc":return"text/x-objectivec";case"kotlin":return"text/x-kotlin";case"racket":return"scheme";case"lisp":case"commonlisp":return"text/x-common-lisp";case"ocaml":return"text/x-ocaml";case"fsharp":return"text/x-fsharp";case"nim":return"text/x-nim";case"python":case"python3":return"python";case"purescript":case"idris":return"text/x-haskell";case"elm":return"text/x-elm";case"perl6":case"raku":return"text/x-perl6";case"d":return"text/x-d";case"factor":return"text/x-factor";case"forth":return"text/x-forth";case"coq":return"text/x-coq";case"vb":return"text/x-vb";case"prolog":return"text/x-prolog";case"lean":return"agda";case"math":case"latex":return"text/x-latex";case"cobol":return"text/x-cobol";case"haxe":return"text/x-haxe";case"json":return"application/json";default:return t}},St=t=>{switch(t){case"kotlin":case"python":case"python3":case"rust":case"vb":case"cfml":case"raku":case"perl":case"d":return 4;default:return 2}},oe=function(t){t==null&&(t=a("body")),t.find("code").each(function(e,s){const i=a(s);if(i.data("highlighted")||!i.html())return;let n=i.data("language")||i.parent().attr("lang");!n&&/lang(?:uage)?-/.test(i.attr("class")||"")&&(n=i.attr("class").split(" ")[0].replace(/lang(?:uage)?-/,""));try{i.html(Ke(i.text(),n)),i.data("highlighted",!0)}catch(o){console.warn(`Failed to highlight: ${o.message}`),console.warn(o)}})},Ke=function(t,e){const s=Ai(t)?"text/plain":Tt(e),i=document.createElement("div");return b.runMode(t,s,i,{tabSize:St(e)}),i.innerHTML},Ai=t=>{const e=t.split(`
`);return e.length>2e3||e.some(s=>s.length>500)},Ye="[data-tippy-content]",ge=()=>{for(const t of document.querySelectorAll(Ye))t._tippy||Ls(t,{delay:[400,0],theme:"codewars",arrow:Ns})},Ae=()=>window.requestAnimationFrame(()=>{for(const t of document.querySelectorAll(Ye))t._tippy&&t._tippy.hide()}),Oi=()=>{for(const t of document.querySelectorAll(Ye))t._tippy&&t._tippy.destroy()},$=()=>a(window).trigger("resize");class $i extends g{constructor(e,s){super(e,s);this.renderViews()}}class Fi extends g{constructor(e,s){super(e,s);this.renderViews()}}class Di extends g{constructor(e,s){super(e,s);this.renderViews()}}class Oe extends g{constructor(e,s){super(e,s);this.descriptionShown=!1,this.fixtureShown=!1}postVote(e,s){e.closest("ul").addClass("is-disabled").find("li.is-active").removeClass("is-active"),h.post(this._app.route("challenge_vote"),{vote:s}).then(i=>{const n=i.data;e.closest("ul").removeClass("is-disabled"),n.success?(this._app.data.vote=n.vote,this.renderFeedback()):this._app.alerts.fail(n.message||"Failed to cast vote, please try again later")})}renderFeedback(){const s=a("#vote_feedback").data("view");s&&s.render()}isDiscussView(){return a("body").hasClass("discuss_view")}}Oe.prototype.events={"#toggle_description a click"(t){this.descriptionShown?(D(a("#description_panel").get(0)),this.descriptionShown=!1,t.text("Show Kata Description")):(this.descriptionMarkdown||(this.descriptionMarkdown=new se("#description",{_app:this._app,language:this._app.data.activeLanguage}),this.descriptionMarkdown.setMarkdown(this._app.data.description),this._controllers.push(this.descriptionMarkdown)),O(a("#description_panel").get(0)),this.descriptionShown=!0,t.text("Hide Kata Description"))},"#toggle_fixture a click"(t){t.text()==="Hide Kata Test Cases"?(D(a("#fixture_panel").get(0)),t.text("Show Kata Test Cases"),this.fixtureShown=!1):(O(a("#fixture_panel").get(0)),t.text("Hide Kata Test Cases"),this.fixtureShown=!0)},"#show_beta_info a click"(){D(a("#show_beta_info").get(0)),O(a("#beta_info").get(0))},"#show_beta_about a click"(){D(a("#show_beta_about").get(0)),O(a("#beta_about").get(0))},"ul.vote-assessment li:not(.is-disabled) click"(t,e){let s=t.data("value");(s===this._app.data.vote||s===1&&this._app.data.vote>0)&&(s=null),this.postVote(t,s)},".js-add-suggestion click"(t){this._app.comments.showNewCommentModal({comments:this.isDiscussView()?a(".comments .new-comment"):a(""),title:"Please provide constructive feedback explaining the suggestion you have.",label:"enhancement",confirmHtml:"Add Suggestion"})},".js-add-issue click"(t){this._app.comments.showNewCommentModal({comments:this.isDiscussView()?a(".comments .new-comment"):a(""),title:"Please provide constructive feedback explaining the issue you found.",label:"issue",confirmHtml:"Add Issue"})},".assessment-ranks .ranks li click"(t){t.closest(".assessment-ranks").find("li.is-active").removeClass("is-active");let e=t.data("rank");e===this._app.data.assessed_rank&&(e=null),h.post(this._app.route("assess_rank"),{rank:e}).then(s=>{const i=s.data;i.success?(this._app.data.assessed_rank=e,this.renderFeedback()):this._app.alerts.fail(i.message||"Failed to cast vote, please try again later")})}};class Je extends g{constructor(e,s){super(e,s)}}Je.prototype.events={".js-compare-solutions click"(t){const e=t.closest(".js-result-group, .js-solution-group").find(".js-compare");if(e.is(":visible"))D(e.get(0)),t.removeClass("is-red-text");else{if(t.addClass("is-red-text"),!e.html()){const s=a(e.data("template"));(s.data("template")||new q(s,{_app:this._app})).render(e,{solution:this._app.data.solution}),oe(e)}O(e.get(0))}Ae()}};const U=t=>{const e=document.createElement("script");e.innerHTML=t,document.body.appendChild(e)},Xe=t=>{document.addEventListener("turbolinks:request-start",e=>{e.data.xhr.setRequestHeader("X-Refreshed","true")},{once:!0}),f.visit(t)};class Et extends g{constructor(e,s){super(e,s);this.renderViews();const i=new Oe(this.element,{_app:this._app}),n=new Je(this.element,{_app:this._app});this._controllers.push(i,n),this.commentFilters={showSpoiler:()=>!0}}}Et.prototype.events={".js-unlock-solutions click"(t){h.post(this._app.route("unlock_solutions"),{},{responseType:"text"}).then(e=>{U(e.data)})},".js-unlock-test-cases click"(t){h.post(this._app.route("unlock_test_cases"),{},{responseType:"text"}).then(e=>{U(e.data)})}};const Ii=20;class jt extends g{constructor(e,s){super(e,s);this.src="",this.connection=null,this.connectionDestroyed=!1,this.darkMode=this._app.darkMode;const i=this.element.data("src");i&&this.connect(this.darkMode?i:i.replace("theme=dark","theme=day"))}destroy(){this.destroyConnection(),f.clearCache(),super.destroy()}connect(e){this.src=e;const s=this.element.get(0),i=s.cloneNode();this.element=a(i),this.element.attr("src",e),this.connection=Ps({timeout:Ii*1e3,iframe:i,methods:{onReady:()=>{},onReceipt:n=>{this.element.trigger("message.notifyReceipt",n)},authorize:async()=>{try{return(await h.post("/api/v1/runner/authorize")).data.token}catch(n){Z(n,{response:n.response&&n.response.data}),this._app.alerts.fail("Authorization Failed")}}}}),this.connectionDestroyed=!1,s.parentNode.replaceChild(i,s)}async run(e){if(!this.connection)return;this.request=e;const s=await this.getChild();if(!!s){this.element.show();try{const i=await s.run(e);i.result?(this.response=i.result,this.element.trigger("message.notifyResponse",this.response)):i.error&&Ve(i.error)}catch(i){if(i.code===X.ConnectionDestroyed&&this.connectionDestroyed)return;Z(i),console.error(i)}}}async display(e){if(!this.connection)return;const s=await this.getChild();if(!!s)try{s.display(e)}catch(i){if(i.code===X.ConnectionDestroyed&&this.connectionDestroyed)return;Z(i),console.error(i)}}expand(){if(this.expanded)return;const e=this.element.data("expand");!e||(this.connect(e),this.expanded=!0)}async setTheme(e){if(!this.connection||this.darkMode===e)return;this.element.show();const s=await this.getChild();if(!!s)try{s.setOptions({theme:e?"night":"day"}),this.darkMode=e}catch(i){if(i.code===X.ConnectionDestroyed&&this.connectionDestroyed)return;Z(i),console.error(i)}}async getChild(){if(!this.connection)return null;try{return await this.connection.promise}catch(e){if(e.code===X.ConnectionDestroyed)return this.connectionDestroyed||(Z(e),console.error(e)),null;if(e.code===X.ConnectionTimeout){if(this.connectionDestroyed)return null;Ve("Runner frame connection timed out");const s=new URL(this.src),i=`${s.protocol}//${s.host}`;return this.onConnectionFailure({title:"Connection Timed Out",content:["<p>Timed out while loading the runner frame.</p>","<p>Please verify that nothing is preventing access to",`<a class="underline" href="${i}" target="_blank" rel="noopener">${i}</a>,`,"such as ad-blockers or firewall rules.</p>"].join(" ")})}return Z(e),console.error(e),this.onConnectionFailure({title:"Unknown Failure",content:["<p>Unexpected error occured while connecting to the runner frame.","If the problem persists, please let us know any details by opening an issue on",'<a class="underline" href="https://github.com/codewars/codewars.com" target="_blank" rel="noopener">GitHub</a>.</p>'].join(" ")})}}destroyConnection(){if(!!this.connection){try{this.connection.promise.catch(()=>{}),this.connection.destroy()}catch(e){if(e.code!==X.ConnectionDestroyed)throw e}this.connection=null,this.connectionDestroyed=!0,this.unloadFrame()}}unloadFrame(){const e=this.element.get(0);e.removeAttribute("src");const s=e.cloneNode();e.parentNode.replaceChild(s,e),this.element=a(s)}reconnect(){this.destroyConnection(),this.connect(this.src)}async onConnectionFailure({title:e,content:s}){const i=document.createElement("div");switch(i.innerHTML=s,await L({title:e,content:i,icon:"error",buttons:{reconnect:!0}})){case"reconnect":return this.reconnect(),this.getChild();default:return null}}}class _e extends g{constructor(e,s){super(e,s);this.runner=new jt(this.element.find("iframe"),{_app:this._app}),this.runner.setTheme(this._app.darkMode),this._controllers.push(this.runner),!!this.options.box&&(this.box=new me(this.element,{successMessage:this.options.successMessage,failMessage:this.options.failMessage,warnClassName:"info",displayDuration:0,showClose:this.options.showClose}),this._controllers.push(this.box))}showStatus(e){!this.box||!this.runner.request||(this.runner.request.fixture&&this.runner.request.fixture!==""?this.box.showResult(e,null,0):this.box.warn("No tests cases provided",0))}}_e.prototype.events={"iframe message.notifyResponse"(){this.showStatus(this.runner.response&&this.runner.response.result&&this.runner.response.result.completed)},"#app dark-mode-toggled"(t,e,s){this.runner.setTheme(s)}};_e.defaults={showClose:!1,successMessage:Be,failMessage:ki,box:!0};class K extends g{constructor(e,s){super(e,s)}showRunResult(e){let s=e.closest(".run-result");s.length===0&&(s=e.closest(".panel").find(".run-result")),s.removeClass("is-hidden"),this.result=s.data("runResult"),this.panel=new _e(s,{_app:this._app,box:!1}),this.panel.runner.expand(),this._controllers.push(this.panel),setTimeout(()=>{this.panel.runner.display(this.result)},500);const i=this.result.output||this.result.response&&this.result.response.result&&this.result.response.result.output;i&&this.panel.runner.element.height(Math.min(i.length*30+200,400))}}K.prototype.events={".code-snippet-list-item.is-collapsed click"(t){t.removeClass("is-collapsed")},".code-snippet-list-item.is-collapsed a click"(t,e){e.preventDefault()},"a.js-show-fixture click"(t){t.closest(".panel").find(".code-snippet-fixture-details").show(),t.closest("li").hide()},"a.js-show-run-result click"(t){this.showRunResult(t),t.closest("li").hide()},".run-result-link a click"(t){const e=t.closest(".run-result-link").hide();this.showRunResult(e.next())}};class Ri extends g{constructor(e,s){super(e,s);const i=new K(this.element,{_app:this._app});this._controllers.push(i)}}const At=t=>{Ot(`https://twitter.com/intent/tweet?text=${encodeURIComponent(t)}`)},Mi=(t={})=>{const e=encodeURIComponent(t.imageUrl||a('meta[property="og:image"]').attr("content")),s=encodeURIComponent(t.url||a('meta[property="og:url"]').attr("content")),i=encodeURIComponent(t.title||a('meta[property="og:title"]').attr("content")),n=encodeURIComponent(t.body||a('meta[property="og:description"]').attr("content"));Ot(`https://www.facebook.com/sharer/sharer.php?s=100&p[url]=${s}&p[images][0]=${e}&p[title]=${i}&p[summary]=${n}`,t)},Ot=(t,e={})=>{const s=e.width||550,i=e.height||450,n=e.left||Math.round(screen.width/2-s/2),o=e.top||Math.round(screen.height/2-i/2);window.open(t,"_blank",`left=${n},top=${o},width=${s},height=${i},personalbar=0,toolbar=0,scrollbars=1,resizable=1`)};class $e extends g{constructor(e,s){super(e,s);(!this._app.data.permissions||this._app.data.permissions.save===!1)&&a(".js-edit-challenge").remove()}}$e.prototype.events={".js-share-email click"(t,e){window.open(t.attr("href"),"mail"),e.preventDefault(),e.stopPropagation()},".js-share-twitter click"(t){At(t.data("share-text"))},".js-share-facebook click"(t){Mi({title:t.data("share-title"),body:t.data("share-body")})}};class $t extends g{constructor(e,s){super(e,s);this.renderViews();const i=new Oe(this.element,{_app:this._app}),n=new $e(this.element.find(".js-train-social"),{_app:this._app});this._controllers.push(i,n)}}$t.prototype.events={".js-unlock-test-cases click"(t){h.post(this._app.route("unlock_test_cases"),{},{responseType:"text"}).then(e=>{U(e.data)})}};/*!
  SerializeJSON jQuery plugin.
  https://github.com/marioizquierdo/jquery.serializeJSON
  version 2.9.0 (Jan, 2018)

  Copyright (c) 2012-2018 Mario Izquierdo
  Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
  and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
*/const Ze=(t,e)=>{var s,i,n,o,r,c,d,m,T,E,w,v;return s=Y,i=s.setupOpts(e),n=t.serializeArray().map(C=>({name:C.name,value:C.value.replace(/\r\n/g,`
`)})),s.readCheckboxUncheckedValues(n,i,t),o={},n.forEach(C=>{r=C.name,c=C.value,m=s.extractTypeAndNameWithNoType(r),T=m.nameWithNoType,E=m.type,E||(E=s.attrFromInputWithName(t,r,"data-value-type")),s.validateType(r,E,i),E!=="skip"&&(w=s.splitInputNameIntoKeysArray(T),d=s.parseValue(c,r,E,i),v=!d&&s.shouldSkipFalsy(t,r,T,E,i),v||s.deepSet(o,w,d,i))}),o},Y={defaultOptions:{checkboxUncheckedValue:void 0,parseNumbers:!1,parseBooleans:!1,parseNulls:!1,parseAll:!1,parseWithFunction:null,skipFalsyValuesForTypes:[],skipFalsyValuesForFields:[],customTypes:{},defaultTypes:{string:function(t){return String(t)},number:function(t){return Number(t)},boolean:function(t){var e=["false","null","undefined","","0"];return e.indexOf(t)===-1},null:function(t){var e=["false","null","undefined","","0"];return e.indexOf(t)===-1?t:null},array:function(t){return JSON.parse(t)},object:function(t){return JSON.parse(t)},auto:function(t){return Y.parseValue(t,null,null,{parseNumbers:!0,parseBooleans:!0,parseNulls:!0})},skip:null},useIntKeysAsArrayIndex:!1},setupOpts:function(t){var e,s,i,n,o,r;r=Y,t==null&&(t={}),i=r.defaultOptions||{},s=["checkboxUncheckedValue","parseNumbers","parseBooleans","parseNulls","parseAll","parseWithFunction","skipFalsyValuesForTypes","skipFalsyValuesForFields","customTypes","defaultTypes","useIntKeysAsArrayIndex"];for(e in t)if(s.indexOf(e)===-1)throw new Error("serializeJSON ERROR: invalid option '"+e+"'. Please use one of "+s.join(", "));return n=function(c){return t[c]!==!1&&t[c]!==""&&(t[c]||i[c])},o=n("parseAll"),{checkboxUncheckedValue:n("checkboxUncheckedValue"),parseNumbers:o||n("parseNumbers"),parseBooleans:o||n("parseBooleans"),parseNulls:o||n("parseNulls"),parseWithFunction:n("parseWithFunction"),skipFalsyValuesForTypes:n("skipFalsyValuesForTypes"),skipFalsyValuesForFields:n("skipFalsyValuesForFields"),typeFunctions:Object.assign({},n("defaultTypes"),n("customTypes")),useIntKeysAsArrayIndex:n("useIntKeysAsArrayIndex")}},parseValue:function(t,e,s,i){var n,o;return n=Y,o=t,i.typeFunctions&&s&&i.typeFunctions[s]?o=i.typeFunctions[s](t):i.parseNumbers&&n.isNumeric(t)?o=Number(t):i.parseBooleans&&(t==="true"||t==="false")?o=t==="true":i.parseNulls&&t=="null"?o=null:i.typeFunctions&&i.typeFunctions.string&&(o=i.typeFunctions.string(t)),i.parseWithFunction&&!s&&(o=i.parseWithFunction(o,e)),o},isObject:function(t){return t===Object(t)},isUndefined:function(t){return t===void 0},isValidArrayIndex:function(t){return/^[0-9]+$/.test(String(t))},isNumeric:function(t){return t-parseFloat(t)>=0},optionKeys:function(t){return Object.keys(t)},readCheckboxUncheckedValues:function(t,e,s){var i,n,o,r;e==null&&(e={}),i="input[type=checkbox][name]:not(:checked):not([disabled])",n=s.find(i).add(s.filter(i)),n.each(function(c,d){if(o=a(d),r=o.attr("data-unchecked-value"),r==null&&(r=e.checkboxUncheckedValue),r!=null){if(d.name&&d.name.indexOf("[][")!==-1)throw new Error("serializeJSON ERROR: checkbox unchecked values are not supported on nested arrays of objects like '"+d.name+"'. See https://github.com/marioizquierdo/jquery.serializeJSON/issues/67");t.push({name:d.name,value:r})}})},extractTypeAndNameWithNoType:function(t){var e;return(e=t.match(/(.*):([^:]+)$/))?{nameWithNoType:e[1],type:e[2]}:{nameWithNoType:t,type:null}},shouldSkipFalsy:function(t,e,s,i,n){var o=Y,r=o.attrFromInputWithName(t,e,"data-skip-falsy");if(r!=null)return r!=="false";var c=n.skipFalsyValuesForFields;if(c&&(c.indexOf(s)!==-1||c.indexOf(e)!==-1))return!0;var d=n.skipFalsyValuesForTypes;return i==null&&(i="string"),!!(d&&d.indexOf(i)!==-1)},attrFromInputWithName:function(t,e,s){var i,n,o;return i=e.replace(/(:|\.|\[|\]|\s)/g,"\\$1"),n='[name="'+i+'"]',o=t.find(n).add(t.filter(n)),o.attr(s)},validateType:function(t,e,s){var i,n;if(n=Y,i=n.optionKeys(s?s.typeFunctions:n.defaultOptions.defaultTypes),!e||i.indexOf(e)!==-1)return!0;throw new Error("serializeJSON ERROR: Invalid type "+e+" found in input name '"+t+"', please use one of "+i.join(", "))},splitInputNameIntoKeysArray:function(t){var e;return e=t.split("["),e=e.map(s=>s.replace(/\]/g,"")),e[0]===""&&e.shift(),e},deepSet:function(t,e,s,i){var n,o,r,c,d,m;if(i==null&&(i={}),m=Y,m.isUndefined(t))throw new Error("ArgumentError: param 'o' expected to be an object or array, found undefined");if(!e||e.length===0)throw new Error("ArgumentError: param 'keys' expected to be an array with least one element");n=e[0],e.length===1?n===""?t.push(s):t[n]=s:(o=e[1],n===""&&(c=t.length-1,d=t[c],m.isObject(d)&&(m.isUndefined(d[o])||e.length>2)?n=c:n=c+1),o===""?(m.isUndefined(t[n])||!Array.isArray(t[n]))&&(t[n]=[]):i.useIntKeysAsArrayIndex&&m.isValidArrayIndex(o)?(m.isUndefined(t[n])||!Array.isArray(t[n]))&&(t[n]=[]):(m.isUndefined(t[n])||!m.isObject(t[n]))&&(t[n]={}),r=e.slice(1),m.deepSet(t[n],r,s,i))}},Vi=(t,e)=>new V(t,e),Ft=t=>typeof t=="object"&&t!==null&&t._type==="progress";class V{static find(e){return this.requests.find(s=>s.dmid===e)}static register(e){G.connect(e),G.register("private","defer_response",s=>{const i=V.find(s.dmid);i?i.handleData(s):V.data[s.dmid]=s},e)}static push(e,s){this.register(s),this.requests.push(e)}static remove(e){const s=this.requests.indexOf(e);s>=0&&this.requests.splice(s,1)}constructor({url:e,method:s,data:i,timeout:n,deferred:o},r){if(V.push(this,r),typeof o!="function")throw new TypeError("deferred must be a function");this.start=Date.now(),this.timeout=n,this.handler=o,this.pollDuration=2500,h({url:e,method:s,data:i}).then(c=>{const d=c.data;if(d.dmid){this.dmid=d.dmid;const m=V.data[d.dmid];m?this.handleData(m):(this.status="polling",this.poll())}else this.handleData(d)})}handleData(e){if(Ft(e)||this.status==="complete")return;const s=this.handler,i=n=>{s(n),this.status="complete",delete V.data[this.dmid],V.remove(this)};e&&e.cached?this.getCache(i):i(e)}poll(){setTimeout(()=>{this.status==="polling"&&this.getCache(e=>{Ft(e)?Date.now()-this.start<this.timeout?this.poll():this.handleData():this.handleData(e)})},this.pollDuration)}cancel(){this.status="cancelled"}getCache(e){!this.dmid||this.status!=="complete"&&h.get(`/api/v1/deferred/${this.dmid}`).then(s=>{const i=s.data;i&&e(i)})}}V.data={};V.requests=[];const Li=async()=>{new Us.Tour({useModalOverlay:!0,defaultStepOptions:{cancelIcon:{enabled:!0},scrollTo:{behavior:"smooth",block:"center"},classes:"codewars",arrow:!1,buttons:[{text:"Back",action(){return this.back()}},{text:"Next",action(){return this.next()}}]},steps:[{title:"Getting Started",text:"Let's go through what each component is for.",buttons:[{text:"OK",action(){return this.next()}}]},{title:"Name",text:`The name is used to uniquely identify a kata.
The best practice is to use a name that gives other users a good idea of what type of challenge they will be getting themselves into.`,attachTo:{element:'[data-tour="name"]',on:"bottom-start"},buttons:[{text:"Next",action(){return this.next()}}]},{title:"Discipline",text:`
<div class="prose">
<p>The discipline is the category that the kata belongs to.
You should pick the category that best describes what the kata is intended to focus on.</p>
<ul>
<li>Fundamentals: Focus on core language and API knowledge</li>
<li>Algorithms: Focus on the logic required to complete the task</li>
<li>Bug Fixes: Focus on fixing the code</li>
<li>Refactoring: Focus on transforming and improving the code</li>
<li>Puzzles: Focus on creativity and solving puzzles</li>
</ul>
</div>
`,attachTo:{element:'[data-tour="discipline"]',on:"auto"}},{title:"Description",text:"Use this editor to add description of the kata in Markdown.",attachTo:{element:'[data-tour="description"]',on:"auto"}},{title:"Language",text:"Select the language you want to use here.",attachTo:{element:'[data-tour="language"]',on:"bottom-start"}},{title:"Complete Solution",text:"A working solution for your kata. Make sure to write a correct and maintainable code.",attachTo:{element:'[data-tour="complete-solution"]',on:"bottom-start"}},{title:"Initial Solution",text:"The code users start from when training on your kata.",attachTo:{element:'[data-tour="initial-solution"]',on:"bottom-start"}},{title:"Preloaded",text:"Optional code that can be provided for different purposes. For example, reducing boilerplate.",attachTo:{element:'[data-tour="preloaded"]',on:"bottom-start"}},{title:"Test Cases",text:"The test cases are the set of tests that users need to pass in order to complete your kata.",attachTo:{element:'[data-tour="test-cases"]',on:"bottom-end"}},{title:"Example Test Cases",text:"The example test cases are the set of tests that users can edit while solving your kata.",attachTo:{element:'[data-tour="sample-tests"]',on:"bottom-start"}},{title:"Examples",text:"Try inserting an example to get you started.",attachTo:{element:'[data-tour="example"]',on:"bottom-end"},buttons:[{text:"Back",action(){return this.back()}},{text:"OK",action(){return this.next()}}]}]}).start()};class Dt extends g{constructor(e,s){super(e,s);this.renderViews();const i=["answer","fixture","setup","package","example_fixture"];if(this._app.data.languages&&!this._app.data.languagesDecoded){for(const r of Object.keys(this._app.data.languages)){const c=this._app.data.languages[r];i.forEach(d=>{c[d]=decodeURIComponent(c[d])})}this._app.data.languagesDecoded=!0}V.register(this._app.ablyConfig);const n=a("form");n.length>0&&n.get(0).reset(),this.outputPanel=new _e("#code_results",{_app:this._app,showClose:!0});const o={_app:this._app,change:r=>{r.isDirty()&&!this.languageBeingSet&&(this.dirty=!0)},stashGroup:this._app.data.id||"newkata"};this.cache=Ne(o.stashGroup),this.codeSetup=new M("#code_setup",o),this.codeAnswer=new M("#code_answer",o),this.codeFixture=new M("#code_fixture",o),this.codeExampleFixture=new M("#code_example_fixture",o),this.codePackage=new M("#code_package",o),this.editors=[this.codeSetup,this.codeAnswer,this.codeFixture,this.codeExampleFixture,this.codePackage],this.markdownEditor=new ne("#description",{_app:this._app,stashGroup:o.stashGroup}),this._controllers.push(this.outputPanel,...this.editors,this.markdownEditor),this.cache.isEmpty()?this.setLanguage():this._app.confirmModal.show({titleHtml:"We found un-saved edits",messageHtml:"You have local edits that have not been saved. What would you like to do with them?",cancelHtml:"Discard",confirmHtml:"Keep",cancel:()=>{this.emptyStashes(),this.setLanguage()},confirm:()=>{this.dirty=!0,this.setLanguage()}}),this.dirty=!1,this._app.data.showIntro&&setTimeout(()=>Li(),1e3)}getFormData(){const{code_challenge:e}=Ze(a("form.simple_form[action]"),{parseBooleans:!0});return{languages:this._app.data.languages,language:this._app.data.language,code_challenge:e}}getVersion(){return a(".lang-dd:visible dd.is-active").data("version")}setVersion(e){const s=this._app.data.languages[this._app.data.language];s.default_version=e||this.getVersion()}setLanguage(e){e==null&&(e=this._app.data.language),this._app.data.language=e,a(".lang-dd").hide(),a(`#${e}_version`).show();let s=this._app.data.languages[e];s||(this._app.data.languages[e]=s={name:e}),this.setVersion();const i=(r,c,d)=>{if(c.save(),setTimeout(()=>c.setMode(e,r==="answer"||r==="setup"),0),c.setReadOnly(d),c.options.save=()=>s[r]=c.getValue(),c.setValue(s[r],`${e}_${r}`,!0),this._app.data.languageErrors&&(a("#languages .has-error").removeClass("has-error"),this._app.data.languageErrors[e]))for(let m of this._app.data.languageErrors[e]){const T=`#code_${m.name}`;Ni(T,m.message,{ignoreMsg:!0}),a(`.tabs a[href='${T}']`).closest("dd").addClass("has-error")}},n=this._app.data.lockedFixtures.indexOf(e)>=0,o=a(".icon-moon-lock");n?o.show():o.hide(),this.languageBeingSet=!0,i("setup",this.codeSetup),i("answer",this.codeAnswer),i("fixture",this.codeFixture,n),i("example_fixture",this.codeExampleFixture),i("package",this.codePackage),this.languageBeingSet=!1,this.markdownEditor.setStashId("description"),this.markdownEditor.setLanguage(e),ue(this._app.route("edit",{language:e}))}save(e){this._app.data.published?this.publish(e):(this.beforeSubmit(),h.post(this._app.route("save"),this.getFormData(),{responseType:"text"}).then(s=>{this.emptyStashes(),U(s.data),typeof e=="function"&&e()}))}beforeSubmit(){for(const e of this.editors)e.save();this.markdownEditor.editor.exitFullScreen()}publish(e){this.beforeSubmit(),Vi({url:this._app.route("publish"),method:"POST",data:this.getFormData(),timeout:5e4,deferred:s=>{if(s&&s.html){this.emptyStashes();const i=window.location.href;f.controller.cache.put(i,f.Snapshot.wrap(s.html));const n=a('meta[name="csrf-token"]').attr("content");document.addEventListener("turbolinks:render",()=>{a("meta[name=csrf-token]").attr("content",n)},{once:!0}),f.visit(i,{action:"restore"}),typeof e=="function"&&e()}else this._app.confirmModal.show({titleHtml:"<i class='icon-moon-warning'></i> Publishing Timed Out!",messageHtml:"The server timed out while trying to publish your changes."})}},this._app.ablyConfig),this._app.confirmModal.show({hideActions:!0,titleHtml:`<div class="inline-block w-8 pr-2">${Ui}</div>Please wait while we publish`,messageHtml:"We are validating your code and publishing your changes. This shouldn't take too long."})}emptyStashes(){this.cache.clear()}validateCode(){this.running=!0;const e=a("#code_results");e.is(":visible")||O(e.get(0),{duration:100});const s={language:this._app.data.language,code:this._activeSolution(),fixture:this._activeTest(),setup:this.codePackage.getValue(),languageVersion:this.getVersion(),testFramework:this._app.data.testFrameworks[this._app.data.language]};this.outputPanel.runner.run(s)}handleResponse(){}insertExample(e){const s=()=>{const i=this._app.route("language_example",{language:this._app.data.language,category:e});h.get(i).then(n=>{const o=n.data;o.success&&(this.codeAnswer.setValue(o.answer),this.codeFixture.setValue(o.fixture),this.codeSetup.setValue(o.setup))})};this.codeAnswer.getValue()||this.codeSetup.getValue()||this.codeFixture.getValue()?this._app.confirmModal.show({titleHtml:'<i class="icon-moon-warning"></i> Possible loss of data!',messageHtml:"You are about to replace your current code with example code. Are you sure you want to discard your changes?",confirmHtml:"Yes, go ahead and replace with example code",confirm:s}):s()}_activeSolution(){const e=document.querySelector('[data-editor-group="solutions"] .is-active .code-editor');switch(e&&e.id){case"code_setup":return this.codeSetup.getValue();case"code_answer":case"code_package":default:return this.codeAnswer.getValue()}}_activeTest(){const e=document.querySelector('[data-editor-group="tests"] .is-active .code-editor');switch(e&&e.id){case"code_example_fixture":return this.codeExampleFixture.getValue();case"code_fixture":default:return this.codeFixture.getValue()}}}Dt.prototype.events={"window beforeunload"(t,e){if(this.dirty)return e.preventDefault(),"You risk losing your progress!"},"window keydown"(t,e){if(e.keyCode===8&&!a(e.target).is("input, textarea"))return e.preventDefault(),!1;if(e.keyCode===83&&e.metaKey)return this.save(),e.preventDefault(),!1},"#validate_answer click"(t,e){e.preventDefault(),this.validateCode()},"#code_answer texteditor.submit, #code_fixture texteditor.submit, #code_package texteditor.submit, #code_example_fixture texteditor.submit"(){this.validateCode()},"#insert_example click"(t,e){e.preventDefault(),this.insertExample(a("#code_challenge_category").val())},"#categories li click"(t,e){a("#code_challenge_category").val(t.data("value")),a("#categories li").removeClass("is-active"),t.addClass("is-active")},"#language_dd dd click"(t,e){this.setLanguage(t.data("language"))},".lang-dd dd click"(t,e){this.setVersion()},"#revert click"(t,e){e.preventDefault(),this.emptyStashes(),f.visit()},"#retire click"(){this._app.confirmModal.show({titleHtml:"Are you sure you want to retire this kata?",messageHtml:"This cannot be undone via the UI",confirmHtml:"Retire it",confirm:()=>{h.post(this._app.route("retire")).then(t=>{t.data.success&&f.visit()})}})},"#save click"(t,e){e.preventDefault(),this.save()},"#preview click"(t,e){e.preventDefault();const s=()=>f.visit(this._app.route("preview",{language:this._app.data.language}));this.dirty?this._app.confirmModal.show({titleHtml:"You have un-saved changes",messageHtml:"You must save your changes before previewing. Do you want to continue?",confirmHtml:"Yes, I want to save changes and continue",confirm:()=>{this.save(s)}}):s()},"#publish click"(t,e){e.preventDefault(),this.publish()},"#unpublish click"(t,e){e.preventDefault(),this.beforeSubmit(),h.post(this._app.route("unpublish"),this.getFormData(),{responseType:"text"}).then(s=>{this.emptyStashes(),U(s.data)})},"#delete click"(t,e){e.preventDefault(),this._app.confirmModal.show({titleHtml:'<i class="icon-moon-warning"></i> Are you sure you want to delete this code kata?',messageHtml:"You will not be able to undo this action",confirmHtml:"Yes, I want to delete this kata",confirm:()=>{h.delete(this._app.route("destroy"),{responseType:"text"}).then(s=>{U(s.data)})}})},"#code_answerLabel click"(){setTimeout(()=>{this.codeAnswer.refresh(),this.codeAnswer.resize()},0)},"#initial_setupLabel click"(){setTimeout(()=>{this.codeSetup.refresh(),this.codeSetup.resize()},0)},"#code_packageLabel click"(){setTimeout(()=>{this.codePackage.refresh(),this.codePackage.resize()},0)},"#code_fixtureLabel click"(){setTimeout(()=>{this.codeFixture.refresh(),this.codeFixture.resize()},0)},"#code_exampleFixtureLabel click"(){setTimeout(()=>{this.codeExampleFixture.refresh(),this.codeExampleFixture.resize()},0)},"input change"(){this.dirty=!0},"textarea change"(){this.dirty=!0},"select change"(){this.dirty=!0},"#language_dd i.remove click"(t,e){e.stopPropagation(),e.preventDefault();const s=t.closest("dd").data("language"),i=t.closest("dd").text(),n=this._app.data.languages[s];this._app.confirmModal.show({titleHtml:`<i class='icon-moon-warning'></i> Are you sure you want to delete ${i}?`,messageHtml:"This action is destructive. All data related to this language will be deleted from the record.",confirmHtml:"Yes, I want to delete this language",confirm:()=>{const o=()=>{if(a(t).closest("dd").removeClass("has-value"),this._app.data.languages[s]=null,this._app.data.language===s){for(let r of this.editors)r.setValue("");this.setLanguage()}};n&&n.id?h.delete(this._app.route("remove_language",{language:s})).then(r=>{r.data.success&&o()}):o()}})},"#runner_frame message.notifyResponse"(){this.running&&this.outputPanel.runner.response&&(this.running=!1,this.handleResponse())}};const Ni=(t,e,s)=>{let i,n;s==null&&(s={});const o=a(t),r=o.closest(".field")[e?"addClass":"removeClass"]("has-error");let c=r.find("small");const d=o.closest("form").find(".alert-box.error");return d.find(`[data-selector='${t}']`).remove(),s.fieldName&&d.find(`[data-field='${s.fieldName}']`).remove(),e?(c.length===0&&(c=a("<small></small>"),r.find(".field_value").append(c)),ie(c.html(e).get(0)),n=s.fieldLabel||Pi(r),s.ignoreMsg||(i=a("<li></li>"),i.attr("data-selector",t),i.html(`${n} ${e}`),s.msgClass&&globalThis.msg.addClass(s.msgClass),d.find("ul").append(i),ie(d.get(0)))):(c.hide(),d.find("li").length===0&&!s.ignoreMsg&&d.hide()),{$field:o,$container:r,$small:c,labelText:n,$msg:i,$msgBox:d}},Pi=t=>{let e=a(t);return e.is(".field")||(e=e.closest(".field")),e.find("label").clone().find("*").remove().end().text()},Ui=`
<svg viewbox="0 0 57 57" stroke="currentColor" class="text-cw-red">
<g transform="translate(1 1)" stroke-width="2" fill="none" fill-rule="evenodd">
  <circle cx="5" cy="50" r="5">
    <animate attributeName="cy" begin="0s" dur="2.2s" values="50;5;50;50" calcMode="linear" repeatCount="indefinite"/>
    <animate attributeName="cx" begin="0s" dur="2.2s" values="5;27;49;5" calcMode="linear" repeatCount="indefinite"/>
  </circle>
  <circle cx="27" cy="5" r="5">
    <animate attributeName="cy" begin="0s" dur="2.2s" from="5" to="5" values="5;50;50;5" calcMode="linear" repeatCount="indefinite"/>
    <animate attributeName="cx" begin="0s" dur="2.2s" from="27" to="27" values="27;49;5;27" calcMode="linear" repeatCount="indefinite"/>
  </circle>
  <circle cx="49" cy="50" r="5">
    <animate attributeName="cy" begin="0s" dur="2.2s" values="50;50;5;50" calcMode="linear" repeatCount="indefinite"/>
    <animate attributeName="cx" from="49" to="49" begin="0s" dur="2.2s" values="49;5;27;49" calcMode="linear" repeatCount="indefinite"/>
  </circle>
  </g>
</svg>
`;class J extends g{constructor(e,s){super(e,s);this.waypoint(),this.checkWaypoint()}checkWaypoint(){Hi(this.$waypoint,e=>{e&&setTimeout(()=>this.loadNext(),0)})}waypoint(){this.$waypoint=this.element.find(this.options.waypointSelector)}replaceLoad(e){h.get(e,{responseType:"text"}).then(s=>{this.element.html(s.data),this._updateUi(),this.waypoint()})}loadNext(){const e=this.$waypoint.data("page"),s=new URL(document.location);s.searchParams.set("page",e),h.get(s.href,{responseType:"text"}).then(i=>{this.$waypoint.replaceWith(i.data),window.requestAnimationFrame(()=>{this.waypoint(),this._updateUi(),this.options.loaded&&this.options.loaded(this),a("#app").trigger("infinitescrollcontent")})})}_updateUi(){oe(),je(this._app),$(),ge()}}J.prototype.events={"a.js-infinite-button click"(t){this.$waypoint=t,t.html("Loading...").addClass("is-disabled"),this.loadNext()},".js-infinite-button a click"(t){this.$waypoint=t.closest(".js-infinite-button"),t.html("Loading...").addClass("is-disabled"),this.loadNext()},"window scroll"(){this.checkWaypoint()}};J.defaults={waypointSelector:".js-infinite-marker"};function Hi(t,e){t.height()&&qi(t.get(0))?t.data("waypoint-in-view")||(e(!0,t),t.data("waypoint-in-view",!0)):t.data("waypoint-in-view")&&(e(!1,t),t.data("waypoint-in-view",!1))}const qi=t=>{const e=t.getBoundingClientRect();return e.bottom>0&&e.right>0&&e.left<(window.innerWidth||document.documentElement.clientWidth)&&e.top<(window.innerHeight||document.documentElement.clientHeight)};class It extends g{constructor(e,s){super(e,s);this.start=null,this.end=null,this.values=[],this.element.find("li.is-active").each((i,n)=>{const o=a(n),r=o.index();this.start==null&&(this.start=r),r>this.end&&(this.end=r),this.values.push(o.data("range-value"))})}resetState(){this.hoverEnd=null,this.mouseDown=!1,this.refresh()}clear(){this.start=null,this.end=null,this.refresh()}refresh(){this.values=[];let e=this.start,s=this.hoverEnd!=null?this.hoverEnd:this.end;s!=null?e>s&&(e=s,s=this.start):s=e,this.element.find("ul").children().each((i,n)=>{const o=a(n);i===e||i>e&&i<=s?(o.addClass("is-active"),this.values.push(o.data("range-value"))):o.removeClass("is-active")})}}It.prototype.events={mouseleave(){this.resetState()},mouseup(){this.resetState()},"li mouseover"(t){this.mouseDown&&(this.hoverEnd=t.index(),this.refresh())},"li mousedown"(t,e){if(e.which===1){const s=t.index();s===this.start?(this.start=null,this.end=null,t.removeClass("is-active")):(this.start=s,this.end=null,t.addClass("is-active")),this.mouseDown=!0}},"li mouseup"(t,e){if(e.which===1){const s=t.index();this.start!=null&&s!==this.start&&(this.end=s),this.resetState(!0),e.stopPropagation(),this.element.trigger("change",{range:this})}}};class Rt extends g{constructor(e,s){super(e,s);this._app.currentUser.hideAds&&a("#carbonads-container").hide(),this.ranksRange=new It("#ranks"),this.markCompleted(),this.infiniteScroll=new J("section.items-list",{_app:this._app,loaded:()=>{this.markCompleted()}}),this._controllers.push(this.ranksRange,this.infiniteScroll),ye().q&&a("#filters input").trigger("focus")}filterUrl(e){const s={q:e||a("#search-input").val(),r:this.ranksRange.values,tags:this._app.data.tags,xids:a("#ids_filter").val(),beta:a("#beta_filter").val(),beta_state:a("#beta_state_filter").val(),category:a("#category_filter").val(),order_by:a("#order_by").val()};return Object.keys(s).forEach(function(i){!s[i]&&i!=="q"&&delete s[i]}),this._app.route("search",{language:a("#language_filter").val()},s)}search(e){e==null&&(e=a("#search-input").val()),e=e.replace(/#/g,""),this.filter(e)}filter(e){f.clearCache(),f.visit(this.filterUrl(e))}markCompleted(){this._app.data.completedCodeChallengeIds!=null&&this._app.data.completedCodeChallengeIds.forEach(e=>{a(`#${e} .js-check.is-hidden`).removeClass("is-hidden")})}}Rt.prototype.events={"#search click"(){this.search()},"#search-input keypress"(t,e){e.keyCode===13&&(e.preventDefault(),this.search())},".suggestions a.keyword-tag click"(t){this.search(t.text())},"#filters change"(){this.filter()}};class we extends g{constructor(e,s){super(e,s)}configureIde(){if(this.outputPanel){this.outputPanel.destroy();const e=this._controllers.indexOf(this.outputPanel);e!==-1&&this._controllers.splice(e,1),this.outputPanel=null}this.outputPanel=new _e("#code_results",{_app:this._app}),this._controllers.push(this.outputPanel),this.setBindings(this._app.localStorage.get("editorKeyMap"))}toggleBindings(e){e==null&&(e=this._app.data.mode),this.setBindings(this.keybinds!==e?e:"default")}setBindings(e){this.element.find("#vim_mode, #emacs_mode").removeClass("is-active"),e!=="default"&&this.element.find(`#${e}_mode`).addClass("is-active"),this.editors!=null&&this.editors.forEach(s=>s.setBindings(e)),a(".markdown-editor").each(function(){const s=a(this).data("editor");s!=null&&s.editor.setBindings(e)}),this.keybinds=e,this._app.data.mode=e}toggleTabs(){const e=a('a[data-tab="description"]');e.parent().is(".is-active")?a('a[data-tab="output"]').trigger("click"):e.trigger("click")}toggleFocusedEditor(){this.editor.focused&&this.fixture?this.fixture.focus():this.editor.focus()}isOutputVisible(){return a("#output_frame").is(":visible")}showOutput(){a('a[data-tab="output"]').trigger("click")}showOutputWaiting(e){this.showOutput(),this.editor.setBorder(),this.fixture&&this.fixture.setBorder()}showResults(e,s){a(".btn.js-run").removeClass("is-disabled"),this.showOutputWaiting(),s&&this.setEditorBorder(s,e)}setEditorBorder(e,s){e.setBorder(s?"green":"red")}reset(){this._app.confirmModal.show({titleHtml:"Reset your solution and example test cases?",messageHtml:"This will replace your solution and example test cases with the default setup. Are you sure?",confirmHtml:"Yes. Do it!",confirm:()=>{this.editor.setValue(this.language.setup),this.fixture.setValue(this.language.exampleFixture)}})}getSetupCode(){return null}getLanguage(){return this.language.languageName}getCode(){if(this.editor)return this.editor.getValue()}getFixture(){if(this.fixture)return this.fixture.getValue()}getTestFramework(){return this.language&&this.language.testFramework}run(e={}){this.running=!0;const s=Object.assign({language:this.getLanguage(),code:this.getCode(),fixture:this.getFixture(),setup:this.getSetupCode(),testFramework:this.getTestFramework()},e);this.outputPanel.runner.run(s)}handleResponse(){(this.fixture||this.editor).messages.hide(),a(".js-run").removeClass("is-disabled")}defaultFixtureText(e){return this.editor.defaultFixtureText(e)}}we.prototype.events={"window popstate, window beforeunload"(){this.editor&&(this.editor.updateStash(),this.fixture.updateStash())},"window keydown"(t,e){if(e.keyCode===8&&!a(e.target).is("input, textarea"))return e.preventDefault(),!1},"#fixture_help click"(){this._app.confirmModal.show({cancelHtml:"Got It",titleHtml:"Test Cases Help",messageHtml:`<p>The test cases section is provided so that you can use Test Driven Development while coding your solution. For some kata, authors may have provided some example test cases to get you started. When you click "Submit" your solution will be validated against the kata author's test cases, which are usually more thorough than the example tests cases that may be provided. <br><br>You run your tests by clicking the "Run Tests" button. You can also use the <span class='text-ui-text-lc'>Cmd/Control key + '</span> shortcut to run your test cases.</p> <p>Please read the documentation for <a href='https://docs.codewars.com/languages' class='is-alt' target='_blank' rel='noopener'>languages and test frameworks</a>.</p>`})},"div#fixture texteditor.submit"(){this.validate()},"#validate_btn click"(){this.validate()},"#maximize_layout click"(){this.setLayout("max")},"#minimize_layout click"(){this.setLayout("min")},"#vim_mode click"(){this.toggleBindings("vim")},"#emacs_mode click"(){this.toggleBindings("emacs")},"#runner_frame message.notifyReceipt"(t,e){this.running&&(a(".btn.js-run").addClass("is-disabled"),this.showOutputWaiting())},"#runner_frame message.notifyResponse"(){this.running&&this.outputPanel.runner.response&&(this.running=!1,this.handleResponse())}};class Qe extends we{constructor(e,s){super(e,s);this.languages={},this.play()}setLayout(e){switch(e){case"max":a("body").addClass("maximized").addClass("no-sidenav");break;case"min":a("body").removeClass("maximized").removeClass("no-sidenav");break}this.layout=e,setTimeout(()=>a(window).trigger("resize"),100)}validate(e={}){this.showOutputWaiting(),this.fixture.messages.hide(),this.run(Object.assign({languageVersion:this.language.activeVersion,relayId:this.language.solutionId,ciphered:["setup"]},e))}attempt(){if(!this.getCode()){this.editor.messages.fail(this.editor.emptyCodeMsg());return}a("#attempt_btn").addClass("is-disabled"),this.attempting=!0,this.validate({ciphered:["setup","fixture"],fixture:this._app.data.languageInfo.fixture})}handleResponse(){(this.fixture||this.editor).messages.hide();const e=this.outputPanel.runner,s=this.attempting;this.attempting=!1,this.editor.messages.hide();let i=!1,n=null;e.response&&e.response.type==="execution success"&&(i=e.response.result.completed,h.post(this._app.route("notify",{solutionId:this.language.solutionId}),{token:e.response.token,testFramework:e.request.testFramework,code:e.request.code,fixture:e.request.fixture,languageVersion:this.language.activeVersion}).then(o=>{const r=o.data;i&&r.success&&s&&(this.editor.markClean(),this.editor.messages.working(`<i class='icon-moon-circle-check is-green-text is-nudged-down'></i> ${ke(Be)} You may take your time to refactor/comment your solution. Submit when ready.`),this._app.data.published&&(this.readyCode=e.request.code,a("#submit_btn").removeClass("is-hidden"),a("#attempt_btn").hide()))},o=>{window.alert("There was a server issue while sending the request. Please try again."),Hs(r=>{r.setTags({attempting:s+""}),r.setExtras({description:"Error while posting play notification",error:o,attempting:s,solutionId:this.language.solutionId}),Ve("Failed to notify response")})}),n=this.editor,s||this.getFixture()&&this.getFixture!==""&&(n=this.fixture)),this.showResults(i,n)}submit(){!this.readyCode||this.readyCode!==this.editor.getValue()||(this.editor.messages.working("Submitting your final kata solution..."),h.post(this._app.route("finalize",{solutionId:this.language.solutionId})).then(e=>{const s=e.data;s.success?setTimeout(()=>{f.visit(this._app.route("solutions",{language:this._app.data.activeLanguage}))},1500):this.editor.messages.fail(s.debug||"There was an issue submitting your final kata solution")}))}skip(){this._app.data.published&&h.post(this._app.route("skip",this.language),{language_name:this._app.data.activeLanguage}).then(e=>{f.visit(e.data.route)})}backToEditor(){f.visit(this._app.route("editor",{language:this._app.data.activeLanguage}))}surrender(){this._app.confirmModal.show({titleHtml:"Unlock Solutions",messageHtml:"This will cause you to forfeit your ability to earn honor/rank for this kata. Are you sure?",confirmHtml:"Yes, show me the solutions",confirm:()=>{h.post(this._app.route("forfeit"),{},{responseType:"text"}).then(e=>{U(e.data);const s=e.headers["turbolinks-location"];s&&Xs(s)})}})}getSetupCode(){const e=this._getLanguage();return e&&e.package||""}play(){this.isPlaying=!0,this._playLanguage()}_playLanguage(e){if(e==null&&(e=this._app.data.activeLanguage),a(`.js-${this.languageName}`).hide(),a(`.js-${e}`).show(),this.languages[e]){this._setLanguage(e);return}h.post(this._app.route("session",{language:e})).then(s=>{this.started||(this.started=!0),this.languages[e]=s.data,this._setLanguage(e)}).catch(s=>{this._app.alerts.fail("The kata failed to load. Please try reloading the page.")})}_getLanguage(e){return e==null&&(e=this._app.data.activeLanguage),this.languages[e]}_setLanguage(e){const s=this.languages[e];s.views=s.views||0,s.views++,this._app.data.languageInfo=s,this.language=s,this.languageName=e,s.newPlay=!1,this.showPlay()}showPlay(){a("#play").show(),a(".language-tabs a").each((e,s)=>a(s).attr("href",null)),this.render(),this.playVisible=!0,a(window).trigger("resize")}render(){this.renderViews(),this.configureEditors(),this.configureIde(),this.initMarkdown(),setTimeout(()=>this.afterRender(),100)}afterRender(){const e=!this.language.solutionId&&this.language.recently_attempted||this.language.views>1;this.editor.setValue(this.language.workingCode||this.language.setup,`${this.language.resultId}-${this.languageName}`,e),setTimeout(()=>this.editor.setMode(this._app.data.activeLanguage,!0),0),this.editor.focus();const s=this.language.workingFixture||this.language.exampleFixture||this.defaultFixtureText(this.languageName);this.fixture.setValue(s,`${this.language.resultId}-${this.languageName}-fixture`,e),this.fixture.setMode(this._app.data.activeLanguage),a("#active_version_label").text(a("#language_version dd.is-active").text())}configureEditors(){const e=b.keyMap.default===b.keyMap.macDefault?"Cmd":"Ctrl",s={};s[`${e}-'`]=()=>this.validate(),s[`${e}-Alt-Enter`]=()=>this.validate(),s[`${e}-;`]=()=>this.attempt(),s[`${e}-I`]=()=>this.toggleTabs(),s[`${e}-Alt-I`]=()=>this.toggleTabs(),s[`${e}-U`]=()=>this.toggleFocusedEditor(),s[`${e}-Alt-U`]=()=>this.toggleFocusedEditor(),this.editor=new ae("div#code",{_app:this._app,mode:this._app.data.activeLanguage,stashGroup:this._app.data.id,extraKeys:s,commands:{save:()=>this.validate()}}),this.fixture=new ae("div#fixture",{_app:this._app,mode:this._app.data.activeLanguage,stashGroup:this._app.data.id,extraKeys:s,commands:{save:()=>this.validate()}}),this.editors=[this.editor,this.fixture]}initMarkdown(){this.markdownDisplay=new se("#description",{_app:this._app,language:this._app.data.activeLanguage}),this.markdownDisplay.setMarkdown(this._app.data.description),this.markdownDisplay.setLanguage(this.languageName)}}Qe.prototype.events=Object.assign({},we.prototype.events,{"#language_dd dd click"(t,e){var s,i;this._app.data.activeLanguage!==t.data("value")&&(ue(t.data("href")),this._app.data.activeLanguage=t.data("value"),((i=(s=this._app.routes)==null?void 0:s.session)==null?void 0:i.endsWith("session"))===!1&&(this._app.routes.session=this._app.routes.session.replace(/\/[\da-f]+$/i,"")),this.isPlaying&&this._playLanguage())},"#play_btn click"(){this.play()},"#skip_btn click"(){this.skip()},"#edit_draft_btn click"(){this.backToEditor()},"div#code texteditor.submit"(){this.readyCode&&this.readyCode===this.editor.getValue()?this.submit():this.attempt()},"div#code texteditor.change"(){!this.readyCode||setTimeout(()=>{this.readyCode===this.editor.getValue()?(a("#attempt_btn").hide(),a("#submit_btn").removeClass("is-hidden")):(a("#submit_btn").addClass("is-hidden"),a("#attempt_btn").show(),this.attempting||this.editor.messages.hide())},0)},"#reset_btn:not(.is-disabled) click"(){this.reset()},"#attempt_btn:not(.is-disabled) click"(){this.attempt()},"#submit_btn:not(.is-disabled) click"(){this.submit()},"#surrender_btn click"(){this.surrender()},"#language_version dd.is-active click"(t){this.language.activeVersion=t.data("version")}});Qe.prototype.filters={active_label(){const t=this.language.languageVersions;if(!t)return;const e=t.find(i=>this.language.activeVersion===i.id);if(e&&e.label)return e.label;const s=t[t.length-1];return s&&s.label},version_class(t){if(this.language.activeVersion===t.context.id)return"is-active";if(!t.context.supported)return"is-disabled"},version_title(t){if(!t.context.supported)return"This version is not available"}};class Wi extends g{constructor(e,s){super(e,s);this._app.currentUser.hideAds&&a("#carbonads-container").hide();const i=new $e(this.element.find(".js-train-social"),{_app:this._app});this.markdownDisplay=new se("#description",{_app:this._app,language:this._app.data.activeLanguage}),this.markdownDisplay.setMarkdown(this._app.data.description),this._controllers.push(i,this.markdownDisplay)}}class Mt extends g{constructor(e,s){super(e,s);this.renderViews();const i=new Oe(this.element,{_app:this._app}),n=new $e(this.element.find(".js-train-social"),{_app:this._app}),o=new Je(this.element,{_app:this._app});this.infiniteScroll=new J("#solutions_list",{_app:this._app}),this._controllers.push(i,n,o,this.infiniteScroll)}}Mt.prototype.events={"#app infinitescrollcontent"(){N(a("view:not(.js-rendered)"))},".js-show-invalid click"(t){const e=a("<span>Loading...</span>");t.replaceWith(e);const s=new URL(document.location);s.searchParams.set("invalid_solutions","true"),h.get(s.href,{responseType:"text"}).then(i=>{const n=i.data;pe(e.get(0)),a("#invalid_solutions").replaceWith(n)})},"#show_invalid_solutions click"(t){t.closest("p").hide(),O(a("#invalid_solutions").get(0))},".js-admin-action click"(t){h.post(t.data("href")).then(e=>{const s=e.data;alert(`Action ${s.success?"successfully queued":"failed"}`)})},".js-unlock-solutions click"(t){h.post(this._app.route("unlock_solutions"),{},{responseType:"text"}).then(e=>{U(e.data)})},".js-unlock-test-cases click"(t){h.post(this._app.route("unlock_test_cases"),{},{responseType:"text"}).then(e=>{U(e.data)})}};class zi extends g{constructor(e,s){super(e,s);const i=new K(this.element,{_app:this._app});this._controllers.push(i)}}class et extends we{constructor(e,s){super(e,s);this.fields=this._app.data.fields.code_snippet,this._app.data.activeCode="code",this._app.data.activeFixture="fixture",a("#translation_details dd a:first").trigger("click");const i=new K(this.element,{_app:this._app});this._controllers.push(i)}ready(){setTimeout(()=>this.renderViews(),0)}canSave(){return this.canRun()?this._app.data.isTranslation?this.fields.code.value:!!this.fields.code.value:!1}canRun(){return this.hasCode()&&!this.running&&!this.publishing}isSupportedLanguage(e){return e==null&&(e=this.getLanguage()),this._app.data.supportedLanguages.indexOf(e)>=0}isTddLanguage(){return this._app.data.tddLanguages.indexOf(this.getLanguage())>=0}isTddEnabled(){return this._app.data.tdd&&this.isTddLanguage()}updateTags(){if(this.tags===this.fields.user_tags.value)return;const e=this.tags=this.fields.user_tags.value;this.mapTags!=null&&this.mapTags.abort(),this.mapTags=he(100,()=>{this.mapTags=null,h.post(this._app.route("map_topics"),{query:e}).then(s=>{const i=s.data;this._app.data.mappedTags=i.tags;const n=a("#tags"),o=a(n.data("template"));(o.data("template")||new q(o,{_app:this._app})).render(n,n.data("context"))})})}updateTitle(){N(a("#title"))}updateButtons(e){(e||this.canSave()!==this._app.data.canSave)&&(this._app.data.canSave=this.canSave(),N(a("#buttons")))}activeCodeEditor(){switch(this._app.data.activeCode){case"code":return this.editor;case"setup":return this.setupCode;case"package":return this.package}}toggleFocusedEditor(){this.activeCodeEditor().focused&&this.fixture?this.fixture.focus():this.activeCodeEditor().focus()}toggleTabs(){const e=a("#panel_toggles li.is-active");let s=e.next();s.length===0&&(s=e.siblings().eq(0)),s.find("a").trigger("click")}configureEditor(e,s){!e||(this._app.data.publishedForks&&e.setReadOnly(!0),e.options.stashGroup=this._app.data.id,e.setOption("commands",{save:()=>this.validate()}),e.setMode(this.getLanguage(),s),e.setExtraKeys({"Cmd-S":()=>{this._app.data.published?this.publish():this.save()},"Cmd-I":()=>this.toggleTabs(),"Cmd-U":()=>this.toggleFocusedEditor()}),this.editors.push(e))}configureEditors(){this.editors=[],this.code=this.editor=a("#code_snippet_code_field").data("editor"),this.editor&&(setTimeout(()=>this.configureEditor(this.editor,!0),0),this.editor.focus()),this.fixture=a("#code_snippet_fixture_field").data("editor"),this.fixture&&(this.configureEditor(this.fixture),this.fixture.emptyCodeMsg=()=>"You are using TDD. You must provide test cases before you can run your code. You can turn TDD mode off using the switch in the upper right corner."),this.package=a("#code_snippet_package_field").data("editor"),this.configureEditor(this.package),this.setupCode=a("#code_snippet_setup_code_field").data("editor"),this.configureEditor(this.setupCode),this.exampleFixture=a("#code_snippet_example_fixture_field").data("editor"),this.configureEditor(this.exampleFixture)}render(){this.updateButtons(!0),this.updateTitle(),N(a("#buttons, #edit, #editors, #options_bar, #language_info")),ge()}setTestFramework(e){if(e=e||this.fields.test_framework.value||a("#test_framework dd").data("framework"),!e)return;let s=a(`dd[data-framework='${e}']`);s.length===0&&(s=a("dd[data-framework]").eq(0)),s.trigger("click").trigger("click")}getLanguage(){return this.fields.language.value||this._app.data.language}getLanguageVersion(){return this.fields.language_version.value}getLanguageInfo(e){return e==null&&(e=this.getLanguage()),this._app.data.versionInfo[e]}setLanguageVersion(e,s){const i=this.fields.language.value;if(e&&e===s){e!==i?this.setLanguageVersion(i,e):this.setLanguageVersion(null,e);return}if(this._app.data.versionInfo[e]){if(e===this.fields.language.originalValue)this.setLanguageVersion(this.fields.language_version.originalValue,e);else{const n=this.getLanguageInfo(e);if(n){const o=n.find(r=>r.default);this.setLanguageVersion(o&&o.id,e)}else this.setLanguageVersion(null,e)}return}e||!i?this.fields.language_version.value=e:this.fields.language_version.value=this._app.data.versionInfo[i]!=null?this._app.data.versionInfo[i][0].id:void 0}setLanguage(e){if(e&&this.getLanguage()!==e||!this.languageSet){this.languageSet=!0,this.resetFixtures(),this.fields.language.value=e,this.setLanguageVersion(e),this.setTestFramework();const s=this.fields.language.value;this._app.data.language=s,this.render(),this.editors!=null&&this.editors.forEach(i=>i.setMode(s)),this.isSupportedLanguage()?a("#output_btn").show():a("#output_btn").hide().hasClass("is-active")&&a("#edit_btn a").trigger("click")}this.defaultFixtures()}setEditorBorder(e,s){}hasCode(){return!!(this.editor&&this.editor.getValue())}getCode(){return this._app.data.activeCode==="setup"&&!this.publishing?this.setupCode&&this.setupCode.getValue():this.editor&&this.editor.getValue()}fixtureEditors(){return[this.exampleFixture,this.fixture]}resetFixtures(){if(!this.fixture)return;const e=this.getLanguage();this.fixtureEditors().forEach(s=>{s.getValue()===s.defaultFixtureText(e)&&s.setValue("")})}defaultFixtures(){if(!this.fixture)return;const e=this.getLanguage();this.fixtureEditors().forEach(s=>{(s.getValue()||"")===""&&s.setValue(s.defaultFixtureText(e))})}getFixture(){if(!!this.fixture){if(this._app.data.activeFixture==="example_fixture")return this.exampleFixture.getValue();if(this._app.data.isTranslation||this.isTddEnabled())return this.fixture.getValue()}}getPackage(){return this.package?this.package.getValue():this.fields.package.value}getTestFramework(){return this.fields.test_framework.value||this._app.data.defaultFrameworks[this.getLanguage()]}validate(){!this.isSupportedLanguage()||(a("#output_btn").trigger("click"),this.run({language:this.getLanguage(),languageVersion:this.getLanguageVersion()+"",setup:this.getPackage(),relayId:this._app.data.id}))}save(e){this._app.alerts.working("Saving..."),a("#code_snippet_language").val(this.getLanguage()),a("#code_snippet_language_version").val(this.getLanguageVersion()),h({url:this._app.data.new?this._app.route("create"):this._app.route("update",{id:this._app.data.id}),method:this._app.data.new?"post":"put",data:Ze(a("form"),{parseBooleans:!0})}).then(s=>{const i=s.data;this.dirty=!1,this._app.alerts.hide(),this._app.data.fields=i.fields,this._app.data.errors=i.errors,i.success?(i.id&&(this._app.data.id=i.id),this._app.data.new&&i.url?f.visit(i.url):(i.url&&ue(i.url),this.updateTitle(),typeof e=="function"&&e())):(this.publishing=!1,a("#edit_btn a").trigger("click")),this.updateButtons(!0),this.updateTitle(),N(a("#editors, #options_bar, #language_info")),ge()})}publish(){this._app.alerts.working("Publishing..."),this.editor&&this.editor.messages.hide(),this.fixture&&this.fixture.messages.hide(),a(".js-run").addClass("is-disabled"),this.publishing=!0,this.save(()=>{this.validate()})}handleResponse(){if(this.updateButtons(!0),!this.publishing)return;let e=this.outputPanel.runner.response;if(!e||!e.token){this.running=!1,this.publishing=!1,this.updateButtons(!0),window.alert("Something went wrong, please try republishing again");return}this.showOutputWaiting("Publishing..."),a(".js-run").removeClass("is-disabled"),this.publishing=!1,e={token:e.token,run_result:JSON.stringify({response:{result:e.result}})},h.post(this._app.route("publish",{id:this._app.data.id}),e).then(s=>{const i=s.data;a("#publish_btn").removeClass("is-disabled"),(this._app.data.allowFailedTests||i.completed)&&!i.message?f.visit(this._app.route("show",{id:this._app.data.id})):(this._app.alerts.warn("Kumite was published with failed tests!"),this.editor.messages.hide(),this.showResults(i))})}unpublish(){h.post(this._app.route("unpublish",{id:this._app.data.id})).then(e=>{e.data.success&&f.visit()})}}et.prototype.filters={"tdd_language?"(){return this.isTddLanguage()},"tdd_enabled?"(){return this.isTddEnabled()},"active_language_supported?"(){return this.isSupportedLanguage()},"can_save?"(){return this.canSave()},"has_code?"(){return this.hasCode()},"can_run?"(){return this.canRun()},language_versions(){return this.getLanguageInfo()},active_language(){return this.getLanguage()},active_version(){return this.getLanguageVersion()},active_version_label(){const t=this.getLanguageVersion();let e=this.getLanguageInfo();if(!!e)return e=e.find(s=>s.id===t),e&&e.label||t}};et.prototype.events=Object.assign({},we.prototype.events,{"window beforeunload"(t,e){if(this.dirty)return e.preventDefault(),"You have unsaved changes!"},"#editors view:render"(){this.configureEditors(),this.setLanguage(this.getLanguage()),this.setTestFramework()},"#edit view:render"(){this.configureIde()},"#languages dd click"(t){const e=a("#languages dd.is-active");this.setLanguage(e.data("language"))},"#versions dd click"(t){this.setLanguageVersion(t.data("version"))},"#tdd_mode:not(.is-disabled) click"(t){this._app.data.tdd=!this._app.data.tdd,N(a("#options_bar, #editors")),ge()},"#edit_btn click"(){setTimeout(()=>N(a("#edit")),0)},"#save_btn click"(){this.save()},"#publish_btn:not(.is-disabled) click"(){this.publish()},"#unpublish_btn click"(){this.unpublish()},"#convert_btn click"(){this._app.confirmModal.show({titleHtml:"Are you sure you want to convert?",messageHtml:"This will create a new kata using the data in this kumite. The kumite will be unpublished/hidden.",cancelHtml:"Cancel",confirmHtml:"Do it!",cancel:()=>{},confirm:()=>{a("#buttons .btn").addClass("is-disabled"),this.save(()=>{a("#buttons .btn").addClass("is-disabled"),window.requestAnimationFrame(()=>{h.post(this._app.route("convert")).then(t=>{const e=t.data;e.data&&e.data.url&&f.visit(e.data.url)})})})}})},"texteditor.change"(){this.updateButtons(!0),this.dirty=!0},"#code_snippet_title change, #code_snippet_title keyup"(){this.updateTitle()},"#code_snippet_user_tags change, #code_snippet_user_tags keyup"(){this.updateTags()},"#code_snippet_secret change, #code_snippet_secret click"(){this.updateTitle()},"texteditor.submit"(){this.hasCode()&&this.validate()},"dd[data-framework] click"(t){a("#code_snippet_test_framework").val(t.data("framework")).trigger("change")},"#code_container dd a click"(t){this._app.data.activeCode=t.data("tab"),this.updateButtons(!0)},"#fixture_container dd a click"(t){this._app.data.activeFixture=t.data("tab")},".js-details-link click"(){a("#edit_btn a").trigger("click")}});class Vt extends g{constructor(e,s){super(e,s);const i=new K(this.element,{_app:this._app});this._controllers.push(i)}filterUrl(e){const s={q:e||a("#search-input").val(),personal:a("#personal input:checked").length===1,secrets:a("#secrets input:checked").length===1,language:this._app.data.language};return Object.keys(s).forEach(function(i){!s[i]&&i!=="q"&&delete s[i]}),this._app.route("search",null,s)}search(e){e==null&&(e=a("#search_bar input").val()),this.filter(e)}filter(e){f.clearCache(),f.visit(this.filterUrl(e))}}Vt.prototype.events={"#search click"(){this.search()},"#personal input change"(){this.search()},".js-lang click"(t){const e=t.data("lang");this._app.data.language=e===this._app.data.language?null:e,this.search()},"#search-input keypress"(t,e){e.keyCode===13&&(e.preventDefault(),this.search())}};class tt extends g{constructor(e,s){super(e,s)}}tt.prototype.events={".diff .js-expand-collapsed-line click"(t){const e=t.closest("tr");e.replaceWith(e.find("td.is-hidden table tr"))}};class Lt extends g{constructor(e,s){super(e,s);this.listItem=new K(this.element,{_app:this._app}),this.diffs=new tt(this.element),this._controllers.push(this.listItem,this.diffs)}ready(){const e=ye();e.sel?a(`#${e.sel}`).trigger("click").length===0&&this.activateRoot():this.activateRoot()}activateRoot(){a("#snippet_list .title-container:first").trigger("click")}}Lt.prototype.events={"#show_description a click"(){O(a("#show_description").hide().next().get(0))},"#branches a.js-new-branch:not(.is-disabled) click"(t){f.visit(a("article a.js-new-branch").attr("href"))},"a.js-approve:not(.is-disabled) click"(t,e){e.preventDefault(),this._app.confirmModal.show({titleHtml:"Are you sure you want to approve this translation?",messageHtml:"This cannot be undone, you will be merging this version directly into the code challenge. Are you sure?",cancelHtml:"Nevermind",confirmHtml:"I'm sure",confirm:()=>{h.post(t.attr("href"),{event:"approve"}).then(s=>{const i=s.data;i.success?(this._app.alerts.success("Successfully enqueued a job to merge approved translation. This can take a few minutes to complete."),setTimeout(()=>f.visit(),500)):this._app.alerts.fail(i.message||i.reason)}).catch(s=>{Nt.call(this,s,"approve")})}})},"a.js-reject:not(.is-disabled) click"(t,e){e.preventDefault(),this._app.confirmModal.show({titleHtml:"Are you sure you want to reject this translation?",messageHtml:"This cannot be easily undone, you will be marking this translation as rejected and removing it from this list. Are you sure?",cancelHtml:"Nevermind",confirmHtml:"I'm sure",confirm:()=>{h.post(t.attr("href"),{event:"reject"}).then(s=>{const i=s.data;i.success?(this._app.alerts.success("Successfully rejected a translation."),setTimeout(()=>f.visit(),500)):this._app.alerts.fail(i.message||i.reason)}).catch(s=>{Nt.call(this,s,"reject")})}})},".tree-container .title-container:not(.is-active) click"(t){const e=ye();e.sel=t.attr("id"),ue(`${location.pathname}?${He(e)}`),a(".tree-container .title-container.is-active").removeClass("is-active"),t.addClass("is-active"),this.viewData=t.data("view-data"),this.viewData&&(N(a("#details, #tabs, #diff, #code_blocks"),this.viewData),N(a("#comments view"),this.viewData.discourse),a(".js-new-branch").toggleClass("is-disabled",this.viewData.state==="draft")),a("#tabs dd.is-active").length===0&&a("#tabs dd:first a").trigger("click")},"#tabs dd a click"(t){this._app.data.activeTab=t.data("tab"),a("#comments > h4").toggle(this._app.data.activeTab!=="comments")},".accordion li click"(t){t.parent().find(".active .content").hide().parent("li").removeClass("active");const s=t.children(".content").first();s.show(0,()=>{s.parent("li").addClass("active")})}};function Nt(t,e){if(t.response){const s=t.response.data;t.response.status===401?this._app.alerts.fail(s.reason.replace(/^User .+:/,`Failed to ${e}:`)):this._app.alerts.fail(s.reason||s.message)}else t.request?this._app.alerts.fail("No response was received. Please try again."):this._app.alerts.fail(t.message||"Unknown Error")}class Bi extends g{constructor(e,s){super(e,s);const i=new K(this.element,{_app:this._app});this._controllers.push(i)}}class Gi extends g{constructor(e,s){super(e,s);setTimeout(()=>{this.markdownEditor=new ne("#description",{_app:this._app,stashGroup:"collection"}),this._controllers.push(this.markdownEditor)},0)}}class Pt extends g{constructor(e,s){super(e,s);this.infiniteScroll=new J("section.items-list",{_app:this._app}),this._controllers.push(this.infiniteScroll)}filterUrl(e){const s={q:e||a("#search-input").val(),created_by:a("#created_by").val(),order_by:a("#order_by").val()};return Object.keys(s).forEach(function(i){!s[i]&&i!=="q"&&delete s[i]}),this._app.route("search",null,s)}search(e){e==null&&(e=a("#search-input").val()),this.filter(e)}filter(e){a("#search").attr("disabled",""),f.clearCache(),f.visit(this.filterUrl(e))}}Pt.prototype.events={"#search click"(){this.search()},"#search-input keypress"(t,e){e.keyCode===13&&(e.preventDefault(),this.search())},"#filters change"(){this.filter()}};class Ut extends g{constructor(e,s){super(e,s);this.activateCurrentOrFirst(),this._app.data.isAuthor&&(a(".for-collection-creator").removeClass("is-hidden"),a("body").addClass("creator-view"))}totalItems(){return a("[data-items-count]").data("itemsCount")}moveBy(e,s){const i=e.closest(".list-item-kata").prop("id");h.post(this._app.route("move",{id:i}),{delta:s}).then(n=>{f.clearCache(),f.visit()})}activeLanguage(){const e=a("dd[data-language].is-active");if(e.length)return{id:e.data("language"),name:e.text()}}activeLanguageItems(){const e=this.activeLanguage();return e?a(`a[data-language='${e.id}']`).length:0}activateCurrentOrFirst(){let e=a(`dd[data-language='${this._app.currentUser.current_language}']`);e.length||(e=a("dd[data-language]")),e.trigger("click").trigger("click")}trainNow(e,s){h.post(this._app.route("train"),{all_kata:s,language:e}).then(i=>{const n=i.data;n.route&&f.visit(n.route)})}}Ut.prototype.events={".js-train click"(){const t=this.activeLanguage();this.totalItems()===1||this.activeLanguageItems()===this.totalItems()?this.trainNow(t.id,!1):this._app.confirmModal.show({titleHtml:"Which kata do you want to train on?",messageHtml:[`You prefer to train on ${t.name}.`,"Not all kata in this collection are available in that language.","Which kata should we add to your training queue?"].join(" "),confirmHtml:`${t.name} Kata Only`,cancelHtml:"All Kata",confirm:()=>this.trainNow(t.id,!0),cancel:()=>this.trainNow(t.id,!1)})},".js-remove click"(t){this._app.confirmModal.show({titleHtml:"Are you sure you want to remove?",messageHtml:"You can add it again later by finding it within the library.",confirmHtml:"Yes, remove",confirm:()=>{const e=t.closest(".list-item-kata");this._app.collectionModal.removeChallenge(this._app.data.collection,e.prop("id"),()=>{D(e.get(0))})}})},".js-move-up click"(t){this.moveBy(t,-1)},".js-move-down click"(t){this.moveBy(t,1)},".js-delete-collection click"(){h.delete(this._app.route("collection")).then(t=>{f.visit("/collections")})}};class Ht extends g{constructor(e,s){super(e,s);this.loadTrainerChallenge(),this.discourseScroll=new J(".comments-list",{_app:this._app}),this._controllers.push(this.discourseScroll),a(".medium-feed-link a").prop("target","blog")}loadDiscourse(e){const s=this._app.route("discourse",{view_id:e});ue(s),this.discourseScroll.replaceLoad(s),a("#discourse_filters .is-active").removeClass("is-active"),a(`#discourse_filters [data-view-id='${e}']`).addClass("is-active")}trainerRouteParams(){return{language:a("#trainer_language dd.is-active").data("language")||this._app.currentUser.current_language,strategy:a("#trainer_strategy dd.is-active").data("strategy")}}train(e){if(this.trainerData){const s=this.trainerRouteParams();s.id=this.trainerData.id,s.id&&(f.clearCache(),f.visit(this._app.route("train",s)))}else e||this.loadTrainerChallenge(!0,!0)}loadTrainerChallenge(e,s){const n=a("#personal_trainer_next_challenge").data("view");if(!n)return;const o=this.trainerRouteParams(),r=this._app.route("peek",o);h.get(r,{params:{dequeue:!!e}}).then(c=>{const d=c.data;n.render({data:d}),this.trainerData=d,s&&this.train(!1)})}}Ht.prototype.events={".personal-trainer .dropdown dd:not(.is-active) click"(t){this.loadTrainerChallenge()},"#personal-trainer-play click"(t){this.train()},"#personal-trainer-skip click"(t){this.loadTrainerChallenge(!0)},"#tell_me_more_referrals click"(t){a("#referral").hide(),a("#referrals").show()},"#discourse_filters a:not(.is-active) click"(t,e){this.loadDiscourse(t.data("view-id"))}};class qt extends g{constructor(e,s){super(e,s);this.challenge=this._app.data.challenge,this.challenge&&(this.editor=new ae("#code_editor",{_app:this._app,allowFullScreen:!1,lineNumbers:!1}),this.markdownDisplay=new se("#description",{_app:this._app}),this.runner=new jt("#runner_frame",{_app:this._app}),this.runner.setTheme(!0),this._controllers.push(this.editor,this.markdownDisplay,this.runner),this.setCodeChallenge())}attempt(){const e={code:this.editor.getValue(),language:this._app.data.language,source:"landing",ciphered:["setup","fixture"],languageVersion:this.session.activeVersion,setup:this.session.package,fixture:this.session.fixture,testFramework:this.session.testFramework,relayId:this.session.solutionId};if(!e.code){this.editor.messages.fail(this.editor.emptyCodeMsg());return}this.runner.run(e),a(".output").show(),a("#attempt_btn").addClass("is-disabled"),a("#try_again_btn").addClass("is-disabled")}handleResponse(){a("#attempt_btn").removeClass("is-disabled"),a("#try_again_btn").removeClass("is-disabled"),this.runner.response&&this.runner.response.type==="execution success"&&this.runner.response.result&&this.runner.response.result.completed&&(a("#try_again_btn").hide(),a("#success_msg b").html(ke(["Great Job!","Well Done!","Solid!","Impressive!"])),a("#success_msg").show(),h.post(this._app.route("notify",{solutionId:this.session.solutionId}),{token:this.runner.response.token,testFramework:this.runner.request.testFramework,code:this.runner.request.code,fixture:this.runner.request.fixture,languageVersion:this.runner.request.languageVersion}).then(e=>{setTimeout(()=>f.visit(),1e3)}))}setCodeChallenge(){this.markdownDisplay.setMarkdown(this.challenge.description),a("#other_languages, #code_editor").show(),h.post(this._app.route("session",{language:this._app.data.language})).then(e=>{this.session=e.data,a("#attempt_btn").removeClass("is-disabled")}),this.editor.setValue(this.challenge.setup),this.editor.setMode(this._app.data.language),this.editor.focus()}}qt.prototype.events={"#attempt_btn:not(.is-disabled) click"(){this.attempt()},"#code_editor codeeditor.submit"(){this.session&&this.attempt()},"#sign_up_button click"(){a("#step_start").show(),a("#landing").addClass("sign-up")},"#step_signup form submit"(t){a("#enlist_btn").addClass("is-disabled")},"#step_start [data-language] click"(t,e){f.visit(`?language=${t.attr("data-language")}`)},"#try_again_btn click"(){D(a(".output").get(0))},"#runner_frame message.notifyResponse"(){this.handleResponse()}};class Wt extends g{constructor(e,s){super(e,s)}save(){const e=a(".user_experience input:checked").val();if(e){const s={weekly_newsletter:!!a("#user_weekly_newsletter_true:checked").val(),experience:e,languages:a(".icon-list a.is-active").map((i,n)=>a(n).data("language")).toArray()};h.post(this._app.route("save"),s).then(i=>{i.data.success?(this._app.alerts.success('<i class="icon-moon-check"></i> Settings saved'),setTimeout(()=>f.visit(this._app.route("post_save")),500)):this._app.alerts.fail("Failed to save settings. Please try again")})}else a(".radio_buttons").addClass("has-error")}}Wt.prototype.events={".js-save click"(){this.save()},".icon-list a click"(t){t.toggleClass("is-active")}};class zt extends g{constructor(e,s){super(e,s)}}zt.prototype.events={"#delete_account click"(t,e){e.preventDefault(),this._app.confirmModal.show({titleHtml:"Are you sure?",messageHtml:"You are about to delete everything you have worked so hard for. If all you wish to do is stop receiving notification emails you can simply turn them off without deleting your account.",cancelHtml:"Nooo stop! I was just kidding!",confirmHtml:"Yep, I'm serious about doing this",confirm:()=>{h.delete("/user").then(s=>{s.data.success&&f.visit("/")})}})},"#forgot_password click"(t,e){e.preventDefault(),this._app.alerts.working("Requesting password instructions..."),h.post(t.attr("href")+".json").then(s=>{this._app.alerts.success("Password email instructions have been sent to your email. You must logout first before clicking the reset link within the email.",1e4)})},"#edit_user submit"(t,e){e.preventDefault(),a("#flash").remove();const{user:s}=Ze(a(t.get(0))),i=document.getElementById("remove_previous_clan_members").checked?{remove_previous_clan_members:"1"}:{};h.put("/users",{user:s},{params:i}).then(n=>{f.clearCache(),f.visit()})},".js-resend-confirmation:not(.is-disabled) click"(t,e){e.preventDefault(),t.addClass("is-disabled");const s=a("meta[name=csrf-param]").attr("content"),i=a("meta[name=csrf-token]").attr("content"),n=a([`<form method="post" action="${t.data("href")}">`,'<input name="_method" value="POST" type="hidden" />',`<input name="${s}" value="${i}" type="hidden" />`,"</form>"].join(""));n.hide(),n.appendTo("body"),n.trigger("submit")}};class Ki extends g{constructor(e,s){super(e,s);this.diffs=new tt(this.element),this._controllers.push(this.diffs)}}const Bt=(t,e)=>{const s=document.createElement("script");s.onerror=i=>{throw new URIError(`${i.target.src} failed to load`)},s.onload=e,document.body.appendChild(s),s.src=t};class Gt extends g{constructor(e,s){super(e,s);this.stripe=null,Bt("https://js.stripe.com/v3/",()=>{h.get("/subscription/key").then(i=>{this.stripe=window.Stripe(i.data.pubKey),a("#subscribe.is-disabled").removeClass("is-disabled").addClass("is-green")})})}}Gt.prototype.events={".js-radio click"(t){a(".js-radio.checked").removeClass("checked").find("i").removeClass("icon-moon-radio-on").addClass("icon-moon-radio-off"),t.addClass("checked").find("i").addClass("icon-moon-radio-on").removeClass("icon-moon-radio-off")},"#subscribe:not(.is-disabled) click"(t){a("#subscribe").addClass("is-disabled");const e=a(".js-radio.checked").data(),s=a("#coupon").val();h.post("/subscription/session",{price_id:e.priceId,coupon_id:s}).then(i=>{this.stripe.redirectToCheckout({sessionId:i.data.sessionId}).then(n=>{n.error&&alert(n.error.message)}).catch(n=>{console.error(n)})}).catch(i=>{a("#subscribe").removeClass("is-disabled"),i.response?alert(i.response.data.reason):alert("Something went wrong, please try again.")})}};class Kt extends g{constructor(e,s){super(e,s);this.stripe=null,Bt("https://js.stripe.com/v3/",()=>{h.get("/subscription/key").then(i=>{this.stripe=window.Stripe(i.data.pubKey),a("#update_payment_method.is-disabled").removeClass("is-disabled")})})}}Kt.prototype.events={"#update_payment_method:not(.is-disabled) click"(t){a("#update_payment_method").addClass("is-disabled"),h.post("/subscription/edit/session").then(e=>{this.stripe.redirectToCheckout({sessionId:e.data.sessionId}).then(s=>{s.error&&alert(s.error.message)}).catch(s=>{console.error(s)})}).catch(e=>{a("#update_payment_method").removeClass("is-disabled"),e.response?alert(e.response.data.reason):alert("Something went wrong, please try again.")})},"#reactivate:not(.is-disabled) click"(t){t.addClass("is-disabled"),h.post("/subscription/edit/renewal").then(e=>{Turbolinks.visit()}).catch(e=>{t.removeClass("is-disabled"),e.response?alert(e.response.data.reason):alert("Something went wrong, please try again.")})},"#cancel:not(.is-disabled) click"(t){t.addClass("is-disabled"),h.delete("/subscription/edit/renewal").then(e=>{Turbolinks.visit()}).catch(e=>{t.removeClass("is-disabled"),e.response?alert(e.response.data.reason):alert("Something went wrong, please try again.")})}};class Yt extends g{constructor(e,s){super(e,s);if(this.infiniteScroll=new J(".items-list",{_app:this._app}),this._controllers.push(this.infiniteScroll),this._app.data.next_rank_color){const i=a("#honor_chart");i.length&&!i.attr("data-donut-chart")&&(Yi("#honor_chart",{value:Math.max(0,Math.min(99.9,this._app.data.rank_progress+1)),radius:200,thickness:50,bg:"var(--color-donut-chart-bg)",color:yi[this._app.data.next_rank_color]}),i.attr("data-donut-chart",!0))}if(this._app.data.stats_refreshing){const i=G.register("stats_refresh",this._app.data.profile.username,()=>{f.visit()},this._app.ablyConfig);typeof i=="function"&&this._unregisters.push(i),h.get(this._app.route("check_stats")).then(n=>{n.data.ready&&Xe(window.location.pathname)})}a("[data-meter]").each((i,n)=>{const o=a(n),r=a('<div class="bg-[#d68e80] dark:bg-[#bb432c] absolute top-0 left-0 h-full inline-block transition-width ease-in-out duration-1500" style="width: 0">');o.prepend(r),window.requestAnimationFrame(()=>{r.width(`${o.attr("data-meter")}%`)})})}}Yt.prototype.events={".js-reload-action:not(.js-working) click"(t){t.text("Working..."),t.addClass("js-working"),h.post(t.data("href")).then(e=>f.visit())},"#tell_me_more_referrals click"(t){a("#referral").hide(),a("#referrals").show()},"#toggle_relationship click"(t){h.post(this._app.route("toggle_relationship")).then(e=>{const s=e.data;s.success&&(s.following?(t.find("span").text("Unfollow"),t.addClass("is-red-text").removeClass("is-green-text")):(t.find("span").text("Follow"),t.addClass("is-green-text").removeClass("is-red-text")))})},".js-delete-collection click"(t){this._app.confirmModal.show({titleHtml:"Are you sure you want to delete this collection?",messageHtml:"You will not be able to undo this operation. Are you sure?",confirmHtml:"Yes, delete it",confirm:()=>{const e=this._app.route("collection",{id:t.data("collectionId")});h.delete(e).then(s=>{D(t.closest(".list-item-collection").get(0))})}})}};function Yi(t,e){const s=document.querySelector(t),i=Object.assign({value:50,radius:50,thickness:10,bg:"rgba(255,255,255,0.125)",color:"#333",transition:"all 1s cubic-bezier(0.57, 0.13, 0.18, 0.98)"},e||{}),n=2*Math.PI*i.radius,o=n-n*(i.value/100),r=2*i.radius+i.thickness,c=document.createDocumentFragment(),d=w(r);d.appendChild(v()),d.appendChild(C()),c.appendChild(d),s.appendChild(c),s.innerHTML=s.innerHTML;const m=s.querySelector(".donut-fill");m.style.transition=i.transition,window.requestAnimationFrame(()=>{E(m,{"stroke-dasharray":n,"stroke-dashoffset":o}),m.style.opacity=1});function T(j,R={}){return E(document.createElementNS("http://www.w3.org/2000/svg",j),R)}function E(j,R={}){for(const ve of Object.keys(R))j.setAttribute(ve,R[ve]);return j}function w(j){return T("svg",{class:"donut",xmlns:"http://www.w3.org/2000/svg",viewbox:`0 0 ${j} ${j}`,transform:"rotate(270)",preserveAspectRatio:"xMidYMid meet"})}function v(){return T("circle",{class:"donut-bg",cx:"50%",cy:"50%",r:i.radius,fill:"transparent",stroke:i.bg,"stroke-width":i.thickness,"stroke-dasharray":n})}function C(){const j=T("circle",{class:"donut-fill",cx:"50%",cy:"50%",r:i.radius,fill:"transparent",stroke:i.color,"stroke-width":i.thickness,"stroke-dashoffset":n,"stroke-dasharray":n});return j.style.opacity=0,j}}class Ji extends g{constructor(e,s){super(e,s);a(`[data-username='${this._app.currentUser.username}']`).addClass("is-current-player")}}class Jt extends g{constructor(e,s){super(e,s);if(this._app.data.refreshing){const i=G.register("compare_refresh",this._app.currentUser.username,n=>{n.username===this._app.data.username&&Xe(window.location.pathname)},this._app.ablyConfig);typeof i=="function"&&this._unregisters.push(i),h.get(this._app.route("check")).then(n=>{n.data.ready&&Xe(window.location.pathname)})}}search(){const e=Object.assign({},ye(),{r:a("#rank").val(),l:a("#language").val(),q:a("#search-input").val(),page:null});for(const s of Object.keys(e))e[s]===null&&delete e[s];f.clearCache(),f.visit(`${window.location.pathname}?${He(e)}`)}}Jt.prototype.events={"#search click"(){this.search()},"#rank change"(){this.search()},"#language change"(){this.search()},"#search-input keypress"(t,e){e.keyCode===13&&(e.preventDefault(),this.search())}};class st extends g{constructor(e,s){super(e,s);this.store=it.get("personal_collections",{ablyConfig:this._app.ablyConfig,url:this._app.route("collections"),realtime:"collection"})}destroy(){this.hide(),super.destroy()}disableBtns(){this.element.find("a").addClass("is-disabled")}show(e){this.data={current:e,loading:!0},this.element.show(),this.refresh(),this.store.getAll(s=>{this.data.collections=s,this.data.adding=!1,this.data.loading=!1,this.refresh()})}hide(){this.element.hide()}findCollectionChallenge(e,s){if(s==null&&(s=this.data.current&&this.data.current.id),!!e.code_challenges)return e.code_challenges.find(i=>i.code_challenge_id===s)}addChallenge(e,s){s==null&&(s=this.data.current.id);const i=this._app.route("collection_code_challenge",{collectionId:e.id,id:""});h.post(i,{id:s})}removeChallenge(e,s,i){s==null&&(s=this.data.current.id);const n=this._app.route("collection_code_challenge",{collectionId:e.id,id:s});h.delete(n).then(o=>{typeof i=="function"&&i()})}refresh(){this.element.is(":visible")&&this.renderViews()}createCollection(e,s){e==null&&(e=this.element.find("form input").val()),s==null&&(s=this.data.current.id),h.post(this._app.route("collections"),{name:e,code_challenge_id:s}).then(i=>{this.hide()})}}st.prototype.events={"#app store.personal_collections.changed"(){this.refresh()},"body .js-add-to-collection click"(t){const e=t.data("challenge");this.show(e)},"a.js-done click"(){this.hide()},"a.js-add-toggle click"(t){const e=t.closest("li").data("context");this.disableBtns(),this.findCollectionChallenge(e)?this.removeChallenge(e):this.addChallenge(e)},"a.js-add click"(){this.data.adding=!0,this.refresh()},"a.js-create click"(){this.disableBtns(),this.createCollection()}};st.prototype.filters={"enough_honor?"(){return this._app.currentUser.honor>=20},"added?"(t){return!!this.findCollectionChallenge(t.context)},done_label(t){return this.data.adding?"Cancel":"Done"}};const Xt={};class it{static get(e,s){s.name=e;let i=Xt[e];return i||(i=Xt[e]=new it(s)),i}constructor(e={}){this.options=e,this.ablyConfig=e.ablyConfig}getAll(e){this.items?e(this.items):h.get(this.options.url).then(s=>{const i=s.data;this.response=i,this.items=i.items,e(this.items),this.options.realtime&&(G.register("private",`${this.options.realtime}_saved`,this.handleModelSaved.bind(this),this.ablyConfig),G.register("private",`${this.options.realtime}_destroyed`,this.handleModelDestroyed.bind(this),this.ablyConfig))})}handleModelSaved(e){if(this.items&&e.id){const s=this.items.find(i=>i.id===e.id);if(s){for(const i of Object.keys(s))e.hasOwnProperty(i)||delete s[i];Object.assign(s,e),this.storeChanged("updated",s)}else this.items.push(e),this.storeChanged("added",e)}}handleModelDestroyed(e){const s=this.items.findIndex(i=>i.id===e.id);if(s!==-1){const i=this.items[s];this.items.splice(s,1),this.storeChanged("destroyed",i)}}storeChanged(e,s){const i=this.options.name||this.options.realtime;a("#app").trigger(`store.${i}.changed`,{store:this,model:s})}}class Zt extends g{constructor(e,s){super(e,s);this._app.votes.updateVotes()}setFilter(e,s,i){e.closest(`.comment-${s}-filters`).find(".is-active").removeClass("is-active"),e.addClass("is-active");const n=e.closest(".comments");e.data(s)==="all"?n.find(" > ul > li.comment").show():(n.find(" > ul > li.comment").hide(),n.find(`[data-${s}="${e.data(s)||i}"]`).show())}collapseComment(e){F(z(e,{collapsed:!0}))}newComment(e,s){const i=e.closest(".comment");s=s||i.find(".nested-comments").first(),this.getActionsBar(e).hide(),this.closeNewComments(e);let n=s.find("ul.comments-list > .new-comment");const o=()=>n.find("textarea").each((r,c)=>c.focus());n.length>0?ts(n)?n.is(":visible")?D(n.get(0),{finish:()=>{$(),re(n,200),this.getActionsBar(n).show(),setTimeout(o,100)}}):O(n.get(0),{finish:()=>{$(),re(n,200),setTimeout(o,100)}}):(re(n,200),o()):(s.show(),n=F(be(a("<li></li>").appendTo(s.children("ul.comments-list")),{nest_level:1,active:!0}),"#_comment_new",{parentContext:i.data("context")}),ts(n)?O(n.hide().get(0),{finish:$}):re(n,200),setTimeout(o,400))}showNewCommentModal(e={}){this._app.confirmModal.show({titleHtml:e.title||"Please leave a comment",confirmHtml:e.confirmHtml||"Post Comment",cancel:e.cancel,view:s=>{const i={active:!0,label:e.label,allowedLabels:e.label?[e.label]:[],modal:!0};new Ee(s,{_app:this._app,template:"#_comment_new_modal",focusEditor:!0,data:i}).render()},confirm:()=>{this.saveComment(this._app.confirmModal.view.element.find(".new-comment"),e.comments),typeof e.confirm=="function"&&e.confirm()}})}saveComment(e,s){if(this.isPosting)return;const i=this.newCommentInfo(e);if(!i.data.markdown)return;const n=i.$container.attr("id");i.data.parent_comment_id=i.parentCommentId;const o=this._app.route(i.commentUrl,{comment_id:n||""});this.isPosting=!0,n?h.put(o,i.data).then(r=>{const c=r.data;c.success&&(i.$container.find(".js-spoiler-flag input").prop("checked",!1),F(be(i.$container,c.comment),"#_comment_item")),this.isPosting=!1}).catch(r=>{this.isPosting=!1,le.call(this,r)}):this.addNewComment(o,i,s)}markCommentClosed(e){if(this.isPosting)return;const s=this.newCommentInfo(e),i=this._app.route(s.commentUrl,{comment_id:s.parentCommentId})+"/close";(s.data.markdown||this._app.currentUser.role==="admin")&&(this.isPosting=!0,this.addNewComment(i,s))}newCommentInfo(e){const s=e.closest(".new-comment"),i=s.closest(".comment"),n=s.closest(".modal").length===1?"issue":null;return{$container:s,$parentComment:i,parentCommentId:i.attr("id"),commentUrl:s.closest(".comments[data-comment-url]").data("commentUrl"),data:{markdown:s.data("editor").getValue(),masked:s.find(".js-spoiler-flag input").prop("checked")===!0,label:s.find(".dropdown dd.is-active").data("value")||n}}}addNewComment(e,s,i){i==null&&(i=s.$container),h.post(e,s.data).then(n=>{const o=n.data;if(o.success)if(s.$container.find(".js-spoiler-flag input").prop("checked",!1),s.$parentComment.length===0){const c=a("<li></li>");c.insertAfter(i.next()),s.$container.removeClass("is-active").find("dd.js-default").trigger("click");const d=F(be(c,o.comment),"#_comment_item");d.hide(),ie(d.get(0),{finish:$}),s.$container.data("editor").setValue("");const m=Qt(i).data("context");m&&m.comments&&m.comments.unshift(o.comment)}else F(be(s.$parentComment,o.comment));this.isPosting=!1}).catch(n=>{this.isPosting=!1,le.call(this,n)})}closeNewComments(e){e.closest(".comments").find(".js-cancel").trigger("click")}getActionsBar(e){return e.closest(".comment").find(".js-actions-bar")}hasUserCommented(e,s){return e==null&&(e=this._app.currentUser.username),s=s||a(".comments"),s.find(`h6:visible a[href*='${e}']`).length>0}focus(e){try{a(`${e} .js-expand-nested`).trigger("click");let s=a(`${e}.comment`);s.is(":visible")||(s.parent().closest(".comment").find(".js-expand-nested").trigger("click"),s=a(`${e}.comment`)),s.addClass("is-focused"),s.length===1&&s.get(0).scrollIntoView()}catch(s){console.log(s)}}}Zt.prototype.events={".comments .js-collapse-all click"(t){t.closest(".comments").find(".comment").each((e,s)=>{const i=a(s);i.find(".js-collapse:visible").length>0&&window.requestAnimationFrame(()=>this.collapseComment(i))})},".comments .js-collapse-nested click"(t){this.collapseComment(t.closest(".comment"))},".comments .comment .js-expand-nested click"(t){F(z(t.closest(".comment"),{collapsed:!1}))},".js-show-commenter-solution click"(t){let e=t.closest(".comment");const s=e.data("context");s.show_solutions?F(z(e,{show_solutions:!1})):s.solutions?F(z(e,{show_solutions:!0})):h.post(this._app.route("user_solution",{userId:s.user_id})).then(i=>{const n=i.data;e=F(z(e,{solutions:[n],show_solutions:!0})),oe(e)}).catch(i=>{le.call(this,i)}),Ae()},".js-new-comment-thread-link click"(){re(a(".comments > .comments-list > .new-comment"),600)},".comments .js-show-comments:not(.is-disabled) click"(t,e){const i=t.closest(".comments").find("ul.comments-list").first();t.addClass("is-disabled"),t.data("open")?D(i.get(0),{finish:()=>{t.removeClass("is-disabled"),$(),t.data("open",!1)}}):O(i.get(0),{finish:()=>{t.removeClass("is-disabled"),$(),t.data("open",!0)}})},".comments .comment .js-reply click"(t,e){let s=t.closest(".comment");s.find(".js-expand-nested").is(":visible")&&(s=F(z(s,{collapsed:!1}))),this.newComment(s)},".comments .new-comment .js-expand click"(t,e){e.preventDefault(),e.stopPropagation();const s=t.closest(".new-comment");s.data("editor").editor.enterFullScreen(),s.find("dl.tabs > dd:first a").trigger("click"),setTimeout(()=>t.parent().removeClass("is-active"),0)},".comments a.js-remove click"(t,e){this._app.confirmModal.show({messageHtml:"You sure you want to remove this comment?",confirm:()=>{const s=t.closest(".comments[data-comment-url]"),i=t.closest(".comment"),n=this._app.route(s.data("commentUrl"),{comment_id:i.attr("id")});h.delete(n).then(o=>{const r=o.data;i.find("figure").hide(),r.success&&D(i.get(0),{finish:()=>{Xi.call(i,"@comments").remove(),$()}})}).catch(o=>{le.call(this,o)})}})},".js-show-spoiler click"(t){const e=t.closest(".comments[data-comment-url]");let s=t.closest(".comment");const i=this._app.route(e.data("commentUrl"),{comment_id:s.attr("id")})+"/content";s=F(z(s,{markdown:"<i>Loading...</i>"})),h.get(i).then(n=>{const o=n.data;F(z(s,{markdown:o.markdown,markdown_html:o.markdownHtml}))}).catch(n=>{le.call(this,n)})},".comments a.js-flag click"(t,e){const s=t.closest(".comments[data-comment-url]"),i=t.closest(".comment"),n=this._app.route(s.data("commentUrl"),{comment_id:i.attr("id")})+"/flag";h.post(n,{type:t.data("flag")}).then(o=>{const r=o.data;r.success?(this._app.alerts.success(`Successfully ${r.verb} comment`),r.comment?be(i,r.comment):i.data("context").masked=r.flagged,F(i)):this._app.alerts.fail(r.reason||r.message||"Was unable to flag comment. Try again later.")}).catch(o=>{le.call(this,o)})},".comments a.js-edit click"(t,e){this.getActionsBar(t).hide(),this.closeNewComments(t),F(t.closest(".comment"),"#_comment_new")},".comments a.js-cancel click"(t,e){const s=t.closest(".new-comment"),i=s.data("context");i.id?F(s,"#_comment_item"):i.nest_level===1?D(s.get(0),{duration:200,finish:()=>{s.remove(),this.getActionsBar(s).show(),$()}}):s.removeClass("is-active")},".comments a.js-post click"(t,e){t.closest(".new-comment").find(".js-resolved").is(":checked")?this.markCommentClosed(t):this.saveComment(t)},".comments .new-comment texteditor.submit"(t,e){const s=t.closest(".modal");s.length>0?s.find("li.confirm a.btn").trigger("click"):t.closest(".new-comment").find(".js-post").trigger("click")},".comments .new-comment .preedit input focus"(t,e){this.closeNewComments(t);const s=t.closest(".new-comment");s.addClass("is-active"),s.data("editor").focus(),s.closest(".js-scroll-area").length===0&&a(window).trigger("resize"),re(s,600)},".comments .comment-label-filters a:not(.is-active) click"(t){this.setFilter(t,"label","no-label")},".comments .comment-state-filters a:not(.is-active) click"(t){this.setFilter(t,"state")},".comments .js-comment-id-link click"(t,e){a(".comment.is-focused").removeClass("is-focused");const s=t.closest(".comment");s.addClass("is-focused"),s.length===1&&s.get(0).scrollIntoView()}};function Xi(t){const e=t.indexOf("@")===0?Qt(this).data("context"):Zi(this).data("context"),s=this.data("context");if(e&&s){const i=e[t.substr(1)];if(i){const n=i.indexOf(s);n>=0&&i.splice(n,1)}}return this}const Zi=t=>t.parents('[data-context="root"]').eq(0),Qt=t=>t.parents("[data-context-key], [data-context], [data-template-selector]").eq(0),es=(t,e=0)=>{let s,i;const n=t.closest(".js-scroll-area");n.length>0?(s=n.scrollTop()+n.offset().top,i=n.height()):(s=a(window).scrollTop(),i=a(window).height()+s);const o=t.height(),r=t.offset().top+e,c=r+o;return c>i?s+(c-i):r<s?r:!1},re=(t,e=600)=>{if(t.length===0)return;const s=es(t);s!==!1&&vi(t.closest(".js-scroll-area, body").get(0),s,e)},ts=t=>t.length!==0&&es(t)===!1,F=(t,e,s={})=>{const i=t.data("view")||t.closest("view").data("view");if(!!i)return s.rootData=s.rootData||i.data,i.renderPartial(t,e,s)},z=(t,e)=>t.data("context",Object.assign(t.data("context")||{},e)),be=(t,e)=>t.data("context",Qi(t.data("context")||{},e)),Qi=(t,e)=>{for(const s of Object.keys(t))e.hasOwnProperty(s)||delete t[s];return Object.assign(t,e)};function le(t){t.response?t.response.status===401?this._app.alerts.fail("Unauthorized: "+t.response.data.reason.replace(/^User .+:/,"").trim()):this._app.alerts.fail(t.response.data.reason):t.request?this._app.alerts.fail("No response was received. Please try again."):this._app.alerts.fail(t.message||"Unknown Error")}class nt extends g{constructor(e,s){super(e,s);const i=Object.assign({backdrop:!0,keyboard:!0,show:!0},this.element.data(),this.options);this.modal=new en(this.element,i),this.element.data("modal",this.modal),i.show&&this.modal.show()}destroy(){this.hide(),super.destroy()}messageEl(){return this.element.find(".modal-body")}show(e={}){if(e=Object.assign({},this.options,e),!e.cancelHtml&&!e.confirm&&!e.altConfirm&&(e.cancelHtml="OK"),e.titleHtml&&this.element.find("h4").html(e.titleHtml),this.view=null,e.view){const i=a('<div class="view"></div>').appendTo(this.messageEl().html(""));this.view=e.view(i)}else e.messageHtml&&this.messageEl().html(e.messageHtml);e.cancelHtml&&this.element.find("li.cancel a").html(e.cancelHtml),e.confirm?e.confirmHtml&&this.element.find("li.confirm").show().find("a").html(e.confirmHtml):this.element.find("li.confirm").hide(),e.altConfirm&&e.altConfirmHtml?this.element.find("li.alt-confirm").show().find("a").addClass(e.altConfirmClass).html(e.altConfirmHtml):this.element.find("li.alt-confirm").hide().find("a").attr("class","button");const s=this.element.find(".modal-footer, .modal-header .close");e.hideActions?s.hide():s.show(),this.showOptions=e,this.modal.show()}hide(){this.modal.hide()}}nt.prototype.events={'*[data-dismiss="modal"] click'(t,e){this.showOptions!=null&&this.showOptions.cancel&&this.showOptions.cancel(e)},"li.alt-confirm a click"(t,e){this.modal.hide(),this.showOptions!=null&&this.showOptions.altConfirm&&this.showOptions.altConfirm(e)},'*[data-confirm="modal"] click, li.confirm a click'(t,e){this.modal.hide(),this.showOptions!=null&&this.showOptions.confirm&&this.showOptions.confirm(e)}};nt.defaults={backdrop:!0,show:!1,keyboard:!1,confirm:null,cancel:null,titleHtml:null,messageHtml:null,cancelHtml:"Cancel",confirmHtml:"Confirm"};class en{constructor(e,s){this.options=s,this.$element=a(e).on("click.dismiss.modal",'[data-dismiss="modal"]',this.hide.bind(this))}toggle(){return this.isShown?this.hide():this.show()}show(){this.isShown||(a("body").addClass("modal-open"),this.isShown=!0,this.$element.trigger("show"),ns.call(this),ss.call(this,()=>{const e=this.$element.hasClass("fade");this.$element.parent().length||this.$element.appendTo(document.body),this.$element.show(),e&&this.$element.get(0).offsetWidth,this.$element.addClass("in"),e?this.$element.one("transitionend",()=>{this.$element.trigger("shown")}):this.$element.trigger("shown")}))}hide(e){e&&e.preventDefault(),!!this.isShown&&(this.isShown=!1,a("body").removeClass("modal-open"),ns.call(this),this.$element.trigger("hide").removeClass("in"),this.$element.hasClass("fade")?tn.call(this):at.call(this))}}function tn(){const t=setTimeout(()=>{this.$element.off("transitionend"),at.call(this)},500);this.$element.one("transitionend",()=>{clearTimeout(t),at.call(this)})}function at(){this.$element.hide().trigger("hidden"),ss.call(this)}function ss(t){if(this.isShown&&this.options.backdrop){const e=this.$element.hasClass("fade")?"fade":"";this.$backdrop=a(`<div class="modal-backdrop ${e}"></div>`).appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.on("click",this.hide.bind(this)),e&&this.$backdrop.get(0).offsetWidth,this.$backdrop.addClass("in"),e?this.$backdrop.one("transitionend",t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),this.$element.hasClass("fade")?this.$backdrop.one("transitionend",is.bind(this)):is.call(this)):t&&t()}function is(){this.$backdrop.remove(),this.$backdrop=null}function ns(){this.isShown&&this.options.keyboard?a(document).on("keyup.dismiss.modal",t=>t.which===27&&this.hide()):this.isShown||a(document).off("keyup.dismiss.modal")}class as extends g{constructor(e,s){super(e,s)}toggle(e){const s=e&&!e.is(".is-focused");a(".dropdown.is-focused").removeClass("is-focused"),s&&e.addClass("is-focused")}}as.prototype.events={".dropdown click"(t){this.toggle(t)},".dropdown dl dd .info mouseenter"(t){t.closest("dd").addClass("show-info")},".dropdown dl dd .info mouseleave"(t){t.closest("dd").removeClass("show-info")},click(t,e){a(e.target).closest(".dropdown").length===0&&this.toggle()},".dropdown dd:not(.is-disabled) click"(t){const e=t.closest(".dropdown");e.children("span").html(t.find("> span").html()||t.html()),e.find("dd.is-active").removeClass("is-active"),t.addClass("is-active"),t.data("load")!==void 0&&t.data("href")&&f.visit(t.data("href"))}};class os extends g{constructor(e,s){super(e,s)}}os.prototype.events={".form-field input focus"(t){t.closest(".form-field").addClass("active")},".form-field input blur"(t){t.closest(".form-field").removeClass("active")},".form-field .prefix i click"(t){const e=t.closest(".form-field").find("input").get(0);e!=null&&e.focus()}};class rs extends g{constructor(e,s){super(e,s);this.adjustMaxHeight()}adjustMaxHeight(){a(".menu-body").css("max-height",a(window).height()-a("#main_header").height())}}rs.prototype.events={"window resize"(){this.adjustMaxHeight()},"#main_header .has-menu click"(t){a(window).width()<768&&t.toggleClass("active")},"#header_profile_link click"(t){if(a(window).width()<768)return t.parent(".has-menu").toggleClass("active"),!1},"body .sidenav-nubbin click"(){a("#app").toggleClass("shift-right")},".js-sign-out click"(t){f.clearCache();const e=a('<form method="post" action="/users/sign_out"></form>'),s=a("meta[name=csrf-param]").attr("content"),i=a("meta[name=csrf-token]").attr("content"),n=['<input name="_method" value="DELETE" type="hidden" />',`<input name="${s}" value="${i}" type="hidden" />`].join("");e.hide().append(n).appendTo("body"),e.trigger("submit")}};class ls extends g{constructor(e,s){super(e,s);this.updateVotes()}updateVotes(e){e==null&&(e=this._app.data&&this._app.data.label_votes),!!e&&e.forEach(s=>{const i=this.element.find(`[data-vote-ref-id='${s.refId}']`);i.length!==0&&s.labels.forEach(n=>{i.find(`.vote-label[data-label='${n}']`).addClass("is-voted")})})}}ls.prototype.events={"#app infinitescrollcontent"(){this.updateVotes()},"a.vote-label click"(t,e){const s=t.closest(".vote-labels"),i={refId:s.data("vote-ref-id"),label:t.data("label")},n=s.closest("[data-labels-vote-url]").data("labels-vote-url")||"label_vote",o=this._app.route(n,i);t.hasClass("is-voted")?h.delete(o).then(r=>{const c=r.data;c.success&&(t.removeClass("is-voted"),t.find("span").html(c.totalVotes))}):h.post(o).then(r=>{const c=r.data;c.success&&(t.find("span").html(c.totalVotes),s.find(".is-voted").trigger("click"),t.addClass("is-voted"))})}};class cs extends g{constructor(e,s){super(e,s);this._app.currentUser!=null&&this._app.currentUser.username&&!this._app.currentUser.guest&&(this.deferred=he(1e3,()=>{this.nextPopupNotification()}))}destroy(){super.destroy(),this.deferred&&(this.deferred.abort(),this.deferred=null)}maybeCheckNext(){a("#popup-notification-container").data("notification-sticky")||(this.deferred=he(500,()=>{this.nextPopupNotification()}))}nextPopupNotification(e){this.deferred=null,h.post(this._app.route("unread_popup_notifications"),{href:location.href,data:this._app.data,default_popup_id:e},{responseType:"text"}).then(s=>{const i=s.data;!i||typeof i!="string"||window.requestAnimationFrame(()=>{a("#popup-notification-container").remove();const n=a(i).appendTo("#app").hide();setTimeout(()=>O(n.get(0)),250)})})}markAllRead(){this.markReadWait=null,this.markedRead=!0;const e=a("#notification_count"),s={ids:e.data("unread-ids")};!s.ids||h.post(this._app.route("mark_notifications_read"),s).then(i=>{pe(e.get(0))})}}cs.prototype.events={"#notifications_drawer mouseenter"(){this.markedRead||(this.markReadWait!=null&&this.markReadWait.abort(),this.markReadWait=he(700,()=>this.markAllRead()))},"#notifications_drawer mouseleave"(){this.markReadWait!=null&&this.markReadWait.abort()},"#popup-notification-container .popup-toast a.close click"(){this.maybeCheckNext(),bi("#popup-notification-container","fadeOutDown",t=>{t.parentNode.removeChild(t)})},"#popup-notification-container .js-show-dialog click"(){a("#popup-notification-container").removeClass("toast").addClass("dialog")},"#popup-notification-container .popup-dialog .js-close click"(){this.maybeCheckNext();const t=a("#popup-notification-container");pe(t.get(0),{finish:()=>{t.remove()}})},"#popup-notification-container .js-tweet click"(t){At(t.data("tweet"))}};class us extends g{constructor(e,s){super(e,s);this.syncStarred()}refreshList(){const e=this.element.find(".stars-item .menu-body");e.length!==0&&h.get(this._app.route("user_stars"),{responseType:"text"}).then(s=>{e.html(s.data)})}toggleCodeChallengeStar(e){const s=e.parent(),i=s.data("id");h.post(this._app.route("star_code_challenge",{id:i})).then(n=>{n.data.success&&(this.updateCodeChallengeStar(s,e.hasClass("js-add-code-challenge-star")),this.refreshList())})}updateCodeChallengeStar(e,s){s?(e.find(".js-add-code-challenge-star").hide(),e.find(".js-remove-code-challenge-star").show()):(e.find(".js-add-code-challenge-star").show(),e.find(".js-remove-code-challenge-star").hide())}syncStarred(){this._app.currentUser&&this._app.currentUser.starred_code_challenge_ids&&this._app.currentUser.starred_code_challenge_ids.forEach(e=>{this.updateCodeChallengeStar(a(`[data-id='${e}']`),!0)})}}us.prototype.events={".js-add-code-challenge-star click"(t){this.toggleCodeChallengeStar(t)},".js-remove-code-challenge-star click"(t){this.toggleCodeChallengeStar(t)},infinitescrollcontent(){this.syncStarred()}};class ds extends g{constructor(e,s){super(e,s)}_resetTabs(e){const s=e.closest("dl.tabs");let i=s.closest(".tabs:not(dl)");i.length===0&&(i=s.parent()),s.is(".is-vertical")&&(i=i.parent());const n=i.find("ul.tabs-content").first();s.find("dd.is-active").removeClass("is-active"),n.find("> li.is-active").removeClass("is-active");const o=e.closest("dd");return setTimeout(()=>o.addClass("is-active"),0),{$tab:o,$content:n}}}ds.prototype.events={".tabs dd:not(.is-active) a[data-tab]:not(.is-disabled) click"(t,e){const s=this._resetTabs(t);e.preventDefault(),s.$content.find(`[data-tab='${t.data("tab")}']`).first().addClass("is-active"),t.closest(".tabs").data("updateLayout")!=="off"&&$()}};const hs="dark-mode",ps="theme-transition";class fs extends g{constructor(e,s){super(e,s);this.isDark=!1,this.initDarkMode()}initDarkMode(){if(document.getElementById("landing"))return;const e=localStorage.getItem(hs);if(e!==null)return this.toggleDarkMode(e==="true");this.toggleDarkMode(!0)}toggleDarkMode(e){this.isDark=!!e,document.documentElement.classList.toggle("dark",this.isDark),localStorage.setItem(hs,this.isDark+""),this._app.darkMode=this.isDark,a("#app").trigger("dark-mode-toggled",[this.isDark])}}fs.prototype.events={".js-toggle-dark-mode click"(t){document.documentElement.classList.add(ps);const e=document.documentElement.classList.contains("dark");this.toggleDarkMode(!e),f.clearCache(),setTimeout(()=>{document.documentElement.classList.remove(ps)},1e3)}};class ms extends g{constructor(e,s){super(e,s);this.updateVotes()}updateVotes(e){e==null&&(e=this._app.data&&this._app.data.votes),!!e&&e.forEach(s=>{const i=this.element.find(`.voter[data-vote-ref-id='${s.refId}']`);i.data("vote-value",s.value),i.find(`.vote[data-vote-value='${s.value}']`).addClass("is-active")})}updateScore(e,s,i,n){if(s===n)return;e.find(".vote").removeClass("is-active");const o=e.find(".score");switch(s){case 1:e.find('.vote[data-vote-value="1"]').addClass("is-active");break;case-1:e.find('.vote[data-vote-value="-1"]').addClass("is-active");break}o.html(i)}}ms.prototype.events={"#app infinitescrollcontent"(){this.updateVotes()},".voter .vote click"(t,e){const s=t.closest(".voter"),i={refId:s.data("vote-ref-id"),value:parseInt(t.data("vote-value"),10)};t.is(".is-active")&&(i.value=0);const n=s.closest("[data-vote-url]").data("vote-url")||"vote";h.post(this._app.route(n,i)).then(o=>{const r=o.data;r.success&&(t.toggleClass("is-active"),this.updateScore(s,i.value,r.score,s.data("vote-value")||0),s.data("vote-value",i.value))})}};class Fe{static setup(e){return this.instance!==null?this.instance.update(e):this.instance=new Fe(e),this.instance}constructor(e){this.localStorage=Ne("app"),this.darkMode=!1,this.assignConfig(e),this.initSentry(),on(),this.configureControls(),this.configureAxios(),this.setPageController(e.pageControllerName),this.configureSentry(),this.afterLoad()}update(e){this.assignConfig(e),this.destroyControls(),this.configureControls(),this.setPageController(e.pageControllerName),this.configureSentry(),this.afterLoad()}assignConfig(e){this.currentUser=e.currentUser,this.routes=e.routes,this.data=e.data,this.ablyConfig={key:e.ablyKey,clientId:e.currentUser&&e.currentUser.id,privateChannelName:e.privateChannelName},this.env=e.env,this.release=window.SENTRY_RELEASE}destroyControls(){for(const e of an)this[e]&&!this[e].destroyed&&(this[e].destroy(),this[e]=null);Oi()}configureControls(){this.header=new rs("#main_header"),this.confirmModal=new nt("#confirm_modal"),this.collectionModal=new st("#collection_modal",{_app:this}),this.alerts=new me("#global_alerts",{useSlide:!0});const e=a("#app");this.tabs=new ds(e),this.dropdowns=new as(e),this.votes=new ms(e,{_app:this}),this.comments=new Zt(e,{_app:this}),this.labelVotes=new ls(e,{_app:this}),this.forms=new os(e),this.notifications=new cs(e,{_app:this}),this.stars=new us(e,{_app:this}),this.theme=new fs(e,{_app:this}),oe(),je(this),$(),setTimeout(()=>{ge()},1e3)}setPageController(e){this.controller&&!this.controller.destroyed&&(this.controller.destroy(),this.controller=null);const s=rn(e);!s||(this.controller=new s("#app",{_app:this}))}configureAxios(){h.defaults.headers.common["x-requested-with"]="XMLHttpRequest",h.interceptors.request.use(e=>(e.headers["x-csrf-token"]=sn(),this.currentUser.jwt&&(e.headers.authorization=this.currentUser.jwt),nn({type:e.method,url:e.url,data:e.data}),e),e=>Promise.reject(e)),h.interceptors.response.use(e=>(gs(e.headers["x-csrf-token"]),e),e=>(e.response&&gs(e.response.headers["x-csrf-token"]),Promise.reject(e)))}initSentry(){qs({dsn:"https://dc778a04207f4100809dddc5f47d43fb@sentry.io/116947",environment:this.env,release:this.release,enabled:["production","staging"].includes(this.env),ignoreErrors:[/NS_ERROR_NOT_INITIALIZED/,"top.GLOBALS","Can't execute code from a freed script","\u041D\u0435 \u0443\u0434\u0430\u0435\u0442\u0441\u044F \u0432\u044B\u043F\u043E\u043B\u043D\u0438\u0442\u044C \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0443 \u0438\u0437 \u043E\u0441\u0432\u043E\u0431\u043E\u0436\u0434\u0435\u043D\u043D\u043E\u0433\u043E \u0441\u0446\u0435\u043D\u0430\u0440\u0438\u044F","No se puede ejecutar c\xF3digo de un script liberado"],blacklistUrls:[/graph\.facebook\.com/i,/connect\.facebook\.net\/en_US\/all\.js/i,/extensions\//i,/^chrome:\/\//i,/js\.intercomcdn\.com/i,/ravenjs/i]})}configureSentry(){Ws(e=>{this.currentUser&&e.setUser({email:this.currentUser.email,username:this.currentUser.username,pro:this.currentUser.subscriber,current_language:this.currentUser.current_language}),e.setExtras({data:this.data,routes:this.routes})}),ct({message:`${document.title}`,category:"Page Loaded",data:this.data})}afterLoad(){this.controller&&typeof this.controller.ready=="function"&&this.controller.ready(),$(),this.currentUser.hideAds&&a("#_carbonad").hide(),f.scrollTop>0&&(document.scrollingElement.scrollTo(0,f.scrollTop),f.scrollTop=0),G.connect(this.ablyConfig)}route(e,s,i){let n=this.routes[e]||e;if(n.startsWith("/")&&(n=`${window.location.protocol}//${window.location.host}${n}`),i&&(n+=n.includes("?")?"&":"?",n+=decodeURIComponent(He(i))),!n)return"";if(s)for(const o of Object.keys(s))n=n.replace(new RegExp(`%7B${o}%7D`,"g"),s[o]);return n}}Fe.instance=null;const sn=()=>a("meta[name='csrf-token']").attr("content"),gs=t=>{t&&a("meta[name=csrf-token]").attr("content",t)},nn=t=>{ct({message:"Ajax Send",category:"xhr",data:{type:t.type,url:t.url,data:t.data}})},an=Object.freeze(["confirmModal","header","collectionModal","alerts","tabs","dropdowns","votes","comments","labelVotes","forms","notifications","stars","theme"]),on=()=>{f.scrollTop=0,document.addEventListener("turbolinks:click",e=>{if(e.target.matches('[data-turbolinks-scroll="false"]')){const s=document.scrollingElement.scrollTop;s>0&&(f.clearCache(),f.scrollTop=s)}},!1);const t=()=>{a("html").toggleClass("scrolling",a(window).scrollTop()>5)};a(window).on("scroll",si(t)),t(),document.addEventListener("turbolinks:before-cache",()=>{a("#carbonads").remove()}),a(document).on("click",".alert-box a.close",e=>{e.preventDefault();const s=a(e.target).closest(".alert-box");pe(s.get(0),{finish:()=>{s.remove()}})})},rn=t=>{switch(t){case"Articles.BlogController":return $i;case"Articles.DocsController":return Fi;case"Articles.ForumController":return Di;case"CodeChallenges.CodeSnippetsController":return Ri;case"CodeChallenges.DiscussController":return $t;case"CodeChallenges.EditorController":return Dt;case"CodeChallenges.ListController":return Rt;case"CodeChallenges.PlayController":return Qe;case"CodeChallenges.ShowController":return Wi;case"CodeChallenges.SolutionsController":return Mt;case"CodeChallenges.TranslationsController":return zi;case"CodeChallengeSolutionGroups.ShowController":return Et;case"CodeSnippets.EditController":return et;case"CodeSnippets.IndexController":return Vt;case"CodeSnippets.ShowController":return Lt;case"CodeSnippets.TranslationsController":return Bi;case"Collections.EditController":return Gi;case"Collections.IndexController":return Pt;case"Collections.ShowController":return Ut;case"Dashboard.IndexController":return Ht;case"Landing.IndexController":return qt;case"PersonalTrainer.SetupController":return Wt;case"Revisions.IndexController":return Ki;case"Subscription.IndexController":return Gt;case"Subscription.EditController":return Kt;case"UsersComparisons.ShowController":return Jt;case"Users.ShowController":return Yt;case"Users.RankingsController":return Ji;case"Registrations.EditController":return zt;default:return null}},P=t=>{t.setAttribute("disabled",""),t.classList.add("cursor-not-allowed")};class ln extends Q{async linkGitHub(e){const s=e.currentTarget.dataset.currentPath||"";ot(e,`/users/auth/github?intent=link&back=${s}`)}async unlinkGitHub(e){ot(e,"/users/unauth/github")}async githubSignIn(e){ot(e,"/users/auth/github")}}const ot=(t,e)=>{const s=t.currentTarget;P(s),t.stopPropagation(),f.clearCache();const i=s.dataset.token,n=a([`<form method="post" action="${e}">`,'<input name="_method" value="POST" type="hidden" />',`<input name="authenticity_token" value="${i}" type="hidden" />`,"</form>"].join(""));n.hide().appendTo("body"),n.trigger("submit")};var cn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ln});class _s extends Q{async checkVotes(e){P(e.currentTarget),e.stopPropagation();try{if((await h.post(`/api/v1/code-challenges/${this.idValue}/check-beta-votes`)).data.success){await L({icon:"info",text:"Successfully enqueued a job. Try refreshing the page in a bit."});return}}catch(s){console.error(s.message)}await L({icon:"error",text:"Something went wrong. Check the console for any error messages, and let the admin know if the problem persists."})}async unpublishBeta(e){P(e.currentTarget),e.stopPropagation();try{if((await h.post(`/api/v1/code-challenges/${this.idValue}/unpublish-beta`)).data.success){await L({icon:"info",text:"Successfully unpublished"}),f.visit();return}}catch(s){console.error(s.message)}await L({icon:"error",text:"Something went wrong. Check the console for any error messages, and let the admin know if the problem persists."})}}B(_s,"values",{id:String});var un=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_s});class ws extends Q{initialize(){this.solution=null}disconnect(){this.solution=null}async invalidate(e){P(e.currentTarget),e.stopPropagation(),await h.post(`/api/v1/code-challenges/projects/${this.idValue}/invalidate`),f.visit()}async revalidate(e){P(e.currentTarget),e.stopPropagation(),await h.post(`/api/v1/code-challenges/projects/${this.idValue}/revalidate`),f.visit()}async removeBetaVote(e){P(e.currentTarget),e.stopPropagation(),await h.delete(`/api/v1/code-challenges/projects/${this.idValue}/beta-vote`),f.visit()}async removeRankAssessment(e){P(e.currentTarget),e.stopPropagation(),await h.delete(`/api/v1/code-challenges/projects/${this.idValue}/rank-assessment`),f.visit()}toggleSolution(e){e.stopPropagation();const n=e.currentTarget.closest("tr").nextSibling;if(this.solution&&(dn(this.solution),this.solution===n)){this.solution=null;return}this.solution=n,hn(this.solution)}}B(ws,"values",{id:String});const dn=t=>t.classList.add("hidden"),hn=t=>t.classList.remove("hidden");var pn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ws});class bs extends Q{async group(e){P(e.currentTarget),e.stopPropagation();const s=e.currentTarget.dataset.solutionId;try{const i=await h.post(`/api/v1/code-challenges/projects/${this.projectIdValue}/solutions/${s}/group`);await L({icon:"info",text:i.data.message})}catch(i){let n="Failed!";i.response&&(n=i.response.data.reason),await L({icon:"error",text:n})}f.visit()}}B(bs,"values",{projectId:String});var fn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:bs});class vs extends Q{async verify(e){await this.doAction(e,"verify",async()=>{await ys("Try refreshing the page in a bit.")})}async invalidate(e){await this.doAction(e,"invalidate")}async flag(e){await this.doAction(e,"cheat_detected")}async unflag(e){await this.doAction(e,"cheat_corrected")}async hide(e){await this.doAction(e,"hide")}async unhide(e){await this.doAction(e,"unhide")}async delete(e){if(P(e.target),e.stopPropagation(),await L({title:"Deleting Solution Group",text:"Deletion is permanent. Are you sure to delete this group?",icon:"warning",buttons:{cancel:"No",confirm:"Yes"}})==="confirm"){try{if((await h.delete(this.solutionGroupUrl)).data.success){xs(),f.visit(this.reviewUrl);return}}catch(i){console.error(i.message)}await ks()}}async doAction(e,s,i=mn){P(e.currentTarget),e.stopPropagation();try{if((await h.post(`${this.solutionGroupUrl}/${s}`)).data.success)return await i()}catch(n){console.error(n.message)}await ks()}get reviewUrl(){return`/kata/reviews/${this.reviewIdValue}`}get solutionGroupUrl(){return`${this.reviewUrl}/groups/${this.groupIdValue}`}}B(vs,"values",{reviewId:String,groupId:String});const mn=async()=>{await ys(),xs(),f.visit()},xs=()=>{const t=document.scrollingElement.scrollTop;t>0&&(f.clearCache(),f.scrollTop=t)},ys=async(t="")=>{await L({icon:"info",text:t||"Action Successful"})},ks=async(t="")=>{await L({icon:"error",text:t||"Something went wrong. Check the console for any error messages, and let the admin know if the problem persists."})};var gn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:vs});const Cs="Show Variations",Ts="Hide Variations";class rt extends Q{initialize(){this.fetched=!1}toggle(e){e.stopPropagation();const s=e.currentTarget,i=this.containerTarget;if(s.textContent===Cs)if(this.fetched)O(i),s.textContent=Ts;else{const n=document.createElement("p");n.textContent="Fetching variations...",i.appendChild(n),O(i);const o=this.reviewIdValue,r=this.groupIdValue;h.get(`/kata/reviews/${o}/groups/${r}/variations`).then(c=>{const d=c.data;if(d.variations.length>0){const m=d.language;for(const T of d.variations){const E=document.createElement("pre");E.setAttribute("lang",m),E.classList.add("p-2"),E.innerHTML=lt.sanitize(`<code>${Ke(T,m)}</code>`),i.appendChild(E)}}this.fetched=!0,i.removeChild(n),s.textContent=Ts})}else D(i),s.textContent=Cs}}B(rt,"targets",["container"]),B(rt,"values",{reviewId:String,groupId:String});var _n=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:rt});const wn=zs.start(),bn={"./auth_controller.js":cn,"./code_challenge_controller.js":un,"./project_controller.js":pn,"./project_solution_controller.js":fn,"./solution_group_controller.js":gn,"./solution_variations_controller.js":_n};Bs(wn,bn);window.App=Fe;f.start();
//# sourceMappingURL=application.51ba6ba3.js.map
